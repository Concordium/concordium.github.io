


<!DOCTYPE html>


<html lang="en" data-content_root="../../../" data-theme="auto">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Development &#8212; Concordium  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "auto";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "auto";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/tabs.css?v=a5c4661c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/custom.css?v=19c83c19" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/tippy.css?v=124524c4" />
  
  <!-- So that users can add custom icons -->
  <script src="../../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=716d1818"></script>
    <script src="../../../_static/design-tabs.js?v=f930bc37"></script>
    <script defer="defer" src="https://unpkg.com/@popperjs/core@2"></script>
    <script defer="defer" src="https://unpkg.com/tippy.js@6"></script>
    <script defer="defer" src="../../../_static/tippy/docs/smart-contracts/best-practices/development.219b3f13-262b-4069-b1c8-ce28cae887b2.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'docs/smart-contracts/best-practices/development';</script>
    <link rel="canonical" href="https://docs.concordium.com/en/mainnet/docs/smart-contracts/best-practices/development.html" />
    <link rel="icon" href="../../../_static/concordium-logo-no-text.svg"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Cost reduction" href="costs.html" />
    <link rel="prev" title="Best Practices" href="index.html" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,400;0,700;1,400;1,700&family=IBM+Plex+Sans:ital,wght@0,400;0,700;1,400;1,700&display=swap" />

  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="auto">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>
<aside class="bd-header-announcement" aria-label="Announcement">
  <div class="bd-header-announcement__content">Learn how to build with Protocol Level Tokens (PLTs). Read more about PLTs on the <a href="https://www.concordium.com/article/smart-money-starts-here-concordiums-protocol-level-tokens" target="_blank">Concordium website</a> or dive into our <a href="https://docs.concordium.com/en/mainnet/docs/plt/index.html">developer documentation</a>.</div>
</aside>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item"><style>
.navbar-brand img {
    max-height: 200px;
    width: auto;
}
</style>

<div>
    <a href="https://developer.concordium.software/">
        <img class="logo light-logo" src="../../../_static/concordium-logo-dark.svg" />
        <img class="logo dark-logo" src="../../../_static/concordium-logo.svg" />
    </a>
</div></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../../index.html">
    Docs
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../tutorials/index.html">
    Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../tools/index.html">
    Tools
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../community/index.html">
    Community
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://github.com/Concordium" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-github-square fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="mailto:support@concordium.software" title="Support" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Support</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://developer.concordium.software/en/mainnet/net/guides/developer-page.html#block-explorers" title="Monitor" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fas fa-chart-line fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Monitor</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://support.concordium.software/latest" title="Discourse" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-discourse fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Discourse</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://discord.com/invite/GpKGE2hCFx" title="Discord" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-discord fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Discord</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://www.youtube.com/channel/UCPZc2CuB2jGbZjD_5zX7-1A" title="YouTube" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-youtube fa-lg" aria-hidden="true"></i>
            <span class="sr-only">YouTube</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://medium.com/@concordium" title="Medium" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-medium fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Medium</span></a>
        </li>
</ul></div>
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../../index.html">
    Docs
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../tutorials/index.html">
    Tutorials
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../tools/index.html">
    Tools
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../community/index.html">
    Community
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://github.com/Concordium" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-github-square fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="mailto:support@concordium.software" title="Support" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Support</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://developer.concordium.software/en/mainnet/net/guides/developer-page.html#block-explorers" title="Monitor" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fas fa-chart-line fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Monitor</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://support.concordium.software/latest" title="Discourse" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-discourse fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Discourse</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://discord.com/invite/GpKGE2hCFx" title="Discord" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-discord fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Discord</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://www.youtube.com/channel/UCPZc2CuB2jGbZjD_5zX7-1A" title="YouTube" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-youtube fa-lg" aria-hidden="true"></i>
            <span class="sr-only">YouTube</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://medium.com/@concordium" title="Medium" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-medium fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Medium</span></a>
        </li>
</ul></div>
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">Concordium Protocol</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../protocol/concordium-protocol.html">What is the Concordium Protocol</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../protocol/identity.html">Identity</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../protocol/principles-of-privacy.html">Principles of privacy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../protocol/user-processes.html">User processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../protocol/identity-disclosure-processes.html">Identity disclosure processes</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../protocol/manage-accounts.html">Accounts</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../protocol/account-concepts.html">Account concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../protocol/account-aliases.html">Account aliases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../protocol/key-derivation-and-usage.html">Key derivation and usage</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../protocol/transactions.html">Transactions</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../protocol/transaction%20lifecycle.html">Transaction lifecycle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../protocol/transaction-fees.html">Transaction fees</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../protocol/consensus-mechanisms.html">Consensus mechanisms</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../protocol/concepts-baker.html">Block production and validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../protocol/time-concepts.html">Time concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../protocol/validator-suspension.html">Validator suspension</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../../protocol/tokenomics.html">Tokenomics</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../protocol/staking.html">Staking</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../protocol/how-to-become-a-validator.html">How to become a validator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../protocol/concepts-delegation.html">How to become a delegator</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Protocol Level Tokens</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../plt/index.html">What are Protocol-Level Tokens (PLTs)?</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../plt/setup-guide/index.html">Get started with PLTs</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../plt/setup-guide/request-ccd.html">Request test CCD</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../plt/setup-guide/request-plt.html">Request PLT issuance</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../../plt/operations/index.html">Operations</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../plt/examples/index.html">Examples</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../plt/examples/concordium-client.html">Concordium Client CLI Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../plt/examples/web-sdk.html">Web SDK</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../plt/examples/rust-sdk.html">Rust SDK</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Smart Contracts</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../guides/quick-start.html">QuickStart</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../introduction.html">What is a smart contract?</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../contract-lifecycle.html">Life cycle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contract-module.html">Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contract-instances.html">Instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contract-schema.html">Contract schemas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../develop-contracts.html">Using Rust</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../guides/build-contract.html">Build</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../guides/setup-contract.html">Set up a project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/compile-module.html">Module Compilation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/custom-errors.html">Custom errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/build-schema.html">Build a contract schema</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/no-std.html">Using <code class="docutils literal notranslate"><span class="pre">no_std</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/fallback-entrypoints.html">Fallback entrypoints</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/upgradeable-contract.html">Upgradeability Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/json-params.html">JSON parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/migrate-contracts.html">Migrate contracts for <code class="docutils literal notranslate"><span class="pre">concordium-std</span></code> 8.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/factory-pattern.html">Factory pattern</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/unit-test-contract.html">Unit testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/integration-test-contract.html">Integration tests</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../guides/deploy-module.html">Deploy</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../guides/initialize-contract.html">Initialize</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/interact-instance.html">Interact</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/inspect-instance.html">Inspect</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/invoke-instance.html">Invoke</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">Best practices</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="costs.html">Cost reduction</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../references/index.html">References</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../references/crypto-primitives.html">Cryptographic primitives</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/host-fns.html">Contract host functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/local-settings.html">Local settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/references-on-chain.html">References on-chain</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/schema-json.html">Schema JSON representation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../references/simulate-context.html">Simulation contexts</a></li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/Concordium/concordium-rust-smart-contracts">Rust contract examples (repo)</a></li>
<li class="toctree-l2"><a class="reference external" href="https://docs.rs/concordium-std/latest/concordium_std/">concordium-std</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Network</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../network/baker-pool.html">Validator Management</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../network/guides/validation-with-wallets.html">Validation with Concordium wallets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../network/guides/become-validator.html">Validation with the Concordium Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../network/guides/add-baker-mw.html">Add a validator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../network/guides/import-validator-keys.html">Import validator keys</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../network/guides/update-baker-mw.html">Change validator options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../network/guides/suspend-unsuspend-validator.html">Suspend/Unsuspend a validator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../network/guides/stop-validator.html">Stop a validator</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../network/nodes/node-requirements.html">Run a Concordium Node</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../network/nodes/run-node-ubuntu/index.html">Run a node on Ubuntu</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../network/nodes/run-node-ubuntu/run-node-ubuntu.html">Install and manage a node on Ubuntu</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../network/nodes/run-node-ubuntu/advanced-node-configuration-on-ubuntu.html">Advanced node configuration on Ubuntu</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../network/nodes/run-node-ubuntu/troubleshoot-node-ubuntu.html">Troubleshoot a node on Ubuntu</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../network/nodes/run-node-macos/index.html">Run a Node on macOS</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../network/nodes/run-node-macos/run-node-macos.html">Install and manage a node on macOS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../network/nodes/run-node-macos/advanced-node-configuration-on-macos.html">Advanced node configuration on macOS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../network/nodes/run-node-macos/troubleshoot-macos.html">Troubleshoot a node on macOS</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../network/nodes/run-node-windows/index.html">Run a node on Windows</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../network/nodes/run-node-windows/run-node-windows.html">Install and manage a node on Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../network/nodes/run-node-windows/advanced-node-configuration-on-windows.html">Advanced node configuration on Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../network/nodes/run-node-windows/node-runner-service-configuration.html">Concordium Windows node runner service configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../network/nodes/run-node-windows/troubleshoot-windows.html">Troubleshoot a node on Windows</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../network/nodes/run-node-docker/index.html">Run a node using Docker</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../network/nodes/run-node-docker/run-node-docker.html">Install and manage a node on Docker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../network/nodes/run-node-docker/advanced-node-configuration-on-docker.html">Advanced node configuration on Docker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../network/nodes/run-node-docker/troubleshoot-docker.html">Troubleshoot a node in Docker</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../network/nodes/run-node-aws/index.html">Run a node on AWS</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../network/nodes/run-node-aws/run-node-aws.html">Run a node on Amazon Web Services (AWS)</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../network/web3-id/index.html">Use Concordium's ID layer</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../network/web3-id/issuer.html">Web3 ID issuers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../network/web3-id/identity-provider-interfaces.html">Wallet identity provider interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../network/guides/create-proofs.html">Create proofs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../network/web3-id/id-attributes-reference.html">ID attributes reference</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../../network/guides/run-local-chain.html">Run a local chain</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../network/indexers/intro.html">Indexers</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../network/indexers/subquery.html">SubQuery</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Integration</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../integration/wallet%20integration/wallet-integration.html">Wallet integration</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../integration/wallet%20integration/integrating-identity-layer.html">Integrating Concordiumâ€™s ID layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../integration/wallet%20integration/supporting-zero-knowledge-proofs.html">Supporting zero-knowledge proofs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../integration/wallet%20integration/supporting-transactions.html">Supporting transactions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../integration/wallet%20integration/supporting-staking.html">Supporting staking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../integration/wallet%20integration/connecting-wallet-to-network.html">Connecting your wallet to the network</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Help &amp; FAQ</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../installation/downloads.html">Downloads</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../installation/verification-instructions.html">Verification instructions</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../../release-notes/release-notes-lp.html">Release notes</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../guides/wallets-lp.html">Concordium wallets</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../guides/wallet-faqs.html">Wallet FAQs</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../guides/deciding-wallet.html">Deciding between the wallets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/concordium-wallet-faq.html">Concordium Wallet FAQ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../browser-wallet/browser-wallet-faq.html">Concordium Wallet for Web FAQ</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../guides/setup-wallets-lp.html">Set up a wallet</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../guides/setup-concordium-wallet.html">Set up the Concordium Wallet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../browser-wallet/setup-browser-wallet.html">Set up the Concordium Wallet for Web</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/overview-desktop.html">Set up the Desktop Wallet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/ledger-tutorial.html">Use your Ledger Device with Concordium Desktop Wallet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../desktop-wallet/install-ledger-app.html">Set up Concordium Governance Ledger App</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../guides/manage-wallets-lp.html">Wallet activities</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../guides/create-identity.html">Create an identity</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../../guides/change-identity-name.html">Change identity name</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../guides/create-account.html">Create an account</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../../guides/change-account-name.html">Change account name</a></li>
</ul>
</details></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/recovery.html">Backup and recovery</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mobile-wallet/change-passcode-mw.html">Update your passcode and biometric settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/address-book.html">Manage address book</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/transaction-report.html">Create a transaction report</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/show-seed-phrase.html">Show seed phrase</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/show-wallet-private-key.html">Show wallet private key</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/import-export-file.html">Import/export file wallet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/wallet.html">Web3 ID in the Concordium Wallet for Web</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../guides/account-activities-lp.html">Account activities</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../guides/send-ccd-wallets.html">Send CCD</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mobile-wallet/share-address-mw.html">Find and share your account address</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../browser-wallet/connect-app.html">Connect dApps to wallets</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../../guides/proofs.html">Proofs and revealing information</a></li>
</ul>
</details></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/tokens.html">Tokens in the wallet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/shield-ccd-wallets.html">Unshield CCD on an account</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../guides/scheduled-release.html">Scheduled releases</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../../desktop-wallet/single-sign-schedule.html">Transfer CCD with a schedule in Desktop Wallet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../mobile-wallet/inspect-release-schedule-mw.html">Inspect a release schedule</a></li>
</ul>
</details></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/export-account-private-key.html">Export account private key</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/export-transaction-logs.html">Export transaction logs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/add-delegation.html">Delegate to a staking pool or passive delegation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/remove-delegation.html">Remove delegation to a staking pool or passive delegation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../guides/update-delegation.html">Update delegation to a staking pool or passive delegation</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../desktop-wallet/dw-lp.html">Desktop Wallet</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../desktop-wallet/single-sign-schedule.html">Transfer CCD with a schedule in Desktop Wallet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../desktop-wallet/transaction-log-filter.html">Apply a transaction log filter in the Desktop Wallet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../desktop-wallet/update-application.html">Update the Desktop Wallet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../desktop-wallet/accounts-desktop.html">Desktop Wallet navigation and settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../desktop-wallet/reset-data.html">Reset desktop wallet data</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../guides/overview-shared-accounts.html">Shared accounts with multiple credentials in Desktop Wallet</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../../desktop-wallet/create-credentials-file.html">Create a credentials file</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../guides/multi-credentials.html">Add credentials to an account</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../desktop-wallet/multisig-simple-transfer.html">Create a multi-signature CCD transfer in the Desktop Wallet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../guides/multisig-transfer.html">Create a scheduled transfer in the Desktop Wallet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../desktop-wallet/sign-transaction.html">Sign a transaction proposal</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../desktop-wallet/proposed-transactions.html">View transaction proposals</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../../guides/cryptox-terms.html">End User License Terms for CryptoX Concordium Wallet</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../help-and-faq/faqs.html">FAQs</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../help-and-faq/delegation-faq.html">Delegation and validation FAQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../help-and-faq/onboarding-guide-ethereum-developers/faq.html">FAQ for Ethereum developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../help-and-faq/onboarding-guide-solana-developers/faq.html">FAQ for Solana developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../help-and-faq/onboarding-guide-solana-developers/overview.html">Onboarding for Solana developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../help-and-faq/set-up-doc-env.html">Set up Concordium documentation environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../help-and-faq/style-guide.html">Concordium documentation style guide</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference external" href="https://proposals.concordium.software/index.html">Concordium Standards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../resources/glossary.html">Glossary of Concordium terms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../resources/exchangeOnBoarding.html">Exchange Onboarding Guide</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Governance Committee Voting</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../voting/gc-voting.html">Concordium Governance Committee elections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../voting/coordinator.html">Election coordinator tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../voting/voting.html">How to vote</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../voting/guardians.html">Guardians</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../voting/verify-election-result.html">Verify election result</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none"></div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="development">
<span id="sc-development-best-practices"></span><h1>Development<a class="headerlink" href="#development" title="Link to this heading">#</a></h1>
<p>This document provides guidelines for developing smart contracts, including best practices for smart contract development, audit, information about common pitfalls and security vulnerabilities, and how to avoid them.</p>
<p>It starts with some general thoughts about smart contract development and then gives more details about writing smart contracts in Rust for Concordium.</p>
<section id="mindset">
<h2>Mindset<a class="headerlink" href="#mindset" title="Link to this heading">#</a></h2>
<p>Smart contract development involves many risks that do not show up in, for example, web programming:</p>
<ul class="simple">
<li><p>the cost of mistakes is very high;</p></li>
<li><p>possibilities for fixing bugs are limited;</p></li>
<li><p>the area is evolving constantly, with new vulnerabilities being discovered regularly;</p></li>
<li><p>malicious parties deliberately try to break your contract, for example, to steal the funds from the contract or account.</p></li>
</ul>
<p>Therefore, it is not sufficient to defend your code against known vulnerabilities.
You can think about smart contracts as mission-critical software, or software for embedded devices rather than a web application.</p>
<p>To minimize the exposure of your smart contract to possible attacks consider the following.</p>
<ul class="simple">
<li><p>Determine the â€œbare minimumâ€ that should be on-chain: use smart contracts only for the part that requires decentralization.</p></li>
<li><p>Keep your contracts simple and minimalistic: stick to strictly necessary functionality only.
The more complexity you have in your contract, the larger the attack surface.</p></li>
<li><p>Be ready if things go wrong after deployment:</p>
<ul>
<li><p>provide â€œpauseâ€ functionality (see more in the <a class="reference internal" href="#best-practices-code-structure"><span class="std std-ref">Recommended structure</span></a> section of this document);</p></li>
<li><p>implement additional approvals/wait periods for dangerous operations;</p></li>
<li><p>make your contract <a class="reference internal" href="../contract-instances.html#contract-instance-upgradeability"><span class="std std-ref">upgradable</span></a>;</p></li>
<li><p>have a clear plan for how to fix bugs found after deployment.</p></li>
</ul>
</li>
<li><p>Extensively review, test and apply automated analysis/verification tools. Use different methods to ensure the correctness of your code.
Do not trust one particular method or tool; make sure that many people have looked at the code and interacted with the smart contract.</p></li>
</ul>
</section>
<section id="specification">
<span id="best-practices-specification"></span><h2>Specification<a class="headerlink" href="#specification" title="Link to this heading">#</a></h2>
<p>A smart contract specification reflects developersâ€™ intentions regarding the smart contract functionality.
It can serve as a guide for the implementation as well as for testing, verifying, and auditing the code.
Start with an outline of the functionality and gradually refine it into specifications of contract entrypoints.</p>
<p>For the entrypoints, consider the following:</p>
<ul class="simple">
<li><p>What is the interface (entrypoints and their parameters)? For example, <code class="docutils literal notranslate"><span class="pre">transfer</span></code> takes three parameters: <code class="docutils literal notranslate"><span class="pre">from</span></code>, <code class="docutils literal notranslate"><span class="pre">to</span></code> addresses, and <code class="docutils literal notranslate"><span class="pre">amount</span></code>.</p></li>
<li><p>Who can access the entrypoints? For example, the transaction sender must be an operator of the <code class="docutils literal notranslate"><span class="pre">from</span></code> account.</p></li>
<li><p>Which properties of these entrypoints should be satisfied? For example, a successful call of <code class="docutils literal notranslate"><span class="pre">transfer(from,</span> <span class="pre">to,</span> <span class="pre">amount)</span></code> decreases the <code class="docutils literal notranslate"><span class="pre">from</span></code> balance and increases the <code class="docutils literal notranslate"><span class="pre">to</span></code> balance by <code class="docutils literal notranslate"><span class="pre">amount</span></code>.</p></li>
</ul>
<p>If the logic of your application requires complex flows that include several contract calls, or features several interacting smart contracts, use diagrams with descriptions to document these.</p>
<p>The specification is not static; it can be refined once you start developing your application.
Work in iterations, refining the specification when new requirements are discovered or old requirements change.</p>
<p>An informal specification can be refined, turned into a formal one, and used as input to automated testing and verification tools.</p>
<p>The absence of specifications complicates the quality assurance of smart contracts.
For example, it makes the auditing process less efficient and more expensive, because the specification has to be recovered from the source code before starting the audit process.</p>
</section>
<section id="concordium-rust-smart-contracts">
<h2>Concordium Rust Smart Contracts<a class="headerlink" href="#concordium-rust-smart-contracts" title="Link to this heading">#</a></h2>
<p>This section provides recommendations for developing smart contracts in Rust.
See <a class="reference internal" href="../introduction.html#introduction"><span class="std std-ref">Introduction to smart contracts</span></a> for basic information.</p>
<section id="recommended-structure">
<span id="best-practices-code-structure"></span><h3>Recommended structure<a class="headerlink" href="#recommended-structure" title="Link to this heading">#</a></h3>
<ul>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">cargo</span> <span class="pre">concordium</span> <span class="pre">init</span></code> with an appropriate template to start a new project.</p></li>
<li><p>For non-trivial contracts, build the contract logic as the state struct implementation.</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">State</span><span class="w"> </span><span class="p">{</span>
<span class="o">..</span><span class="p">.</span>
<span class="p">}</span>

<span class="k">impl</span><span class="w"> </span><span class="n">State</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">fn</span><span class="w"> </span><span class="nf">new</span><span class="p">()</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">Self</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="p">}</span>

<span class="w">    </span><span class="k">fn</span><span class="w"> </span><span class="nf">do_something</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">param</span><span class="p">:</span><span class="w"> </span><span class="nc">MyParameter</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="p">}</span>

<span class="w">    </span><span class="o">..</span><span class="p">.</span>
<span class="p">}</span>

<span class="cp">#[receive(</span>
<span class="cp">    contract = </span><span class="s">&quot;MyContract&quot;</span><span class="cp">,</span>
<span class="cp">    name = </span><span class="s">&quot;doSomething&quot;</span><span class="cp">,</span>
<span class="cp">    parameter = </span><span class="s">&quot;MyParameter&quot;</span><span class="cp">,</span>
<span class="cp">    mutable</span>
<span class="cp">)]</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">contract_do_something</span><span class="p">(</span>
<span class="w">    </span><span class="n">ctx</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">ReceiveContext</span><span class="p">,</span>
<span class="w">    </span><span class="n">host</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="n">Host</span><span class="o">&lt;</span><span class="n">State</span><span class="o">&gt;</span><span class="p">,</span>
<span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">ReceiveResult</span><span class="o">&lt;</span><span class="p">()</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Parse parameters</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">param</span><span class="p">:</span><span class="w"> </span><span class="nc">MyParameter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ctx</span><span class="p">.</span><span class="n">parameter_cursor</span><span class="p">().</span><span class="n">get</span><span class="p">()</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="o">..</span><span class="p">.</span>
<span class="w">    </span><span class="c1">// Perform authorization, potentially using `ctx` info</span>
<span class="w">    </span><span class="n">ensure</span><span class="o">!</span><span class="p">(</span><span class="n">sender</span><span class="p">.</span><span class="n">matches_account</span><span class="p">(</span><span class="o">&amp;</span><span class="n">owner</span><span class="p">));</span>
<span class="w">    </span><span class="o">..</span><span class="p">.</span>
<span class="w">    </span><span class="n">host</span><span class="p">.</span><span class="n">state_mut</span><span class="p">().</span><span class="n">do_something</span><span class="p">(</span><span class="n">param</span><span class="p">);</span>
<span class="w">    </span><span class="o">..</span><span class="p">.</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>Fail early: validate input/perform authorization as early as possible in an entrypoint.
Returning earlier will save energy and make the call cheaper.
Use the <code class="docutils literal notranslate"><span class="pre">ensure!()</span></code> macro to validate and return an error.</p></li>
<li><p>Provide the pause functionality: add a boolean flag to the state controlling whether the contract is active.
The contract owner or admin can control the flag.
See a code snippet from the <a class="reference external" href="https://github.com/Concordium/concordium-rust-smart-contracts/blob/main/examples/cis2-wccd/src/lib.rs">wCCD contract example</a> below.</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">State</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// The admin address pause and unpause the contract</span>
<span class="w">  </span><span class="n">admin</span><span class="p">:</span><span class="w">  </span><span class="nc">Address</span><span class="p">,</span>
<span class="w">  </span><span class="c1">// Contract is paused if `paused = true` and unpaused if `paused = false`.</span>
<span class="w">  </span><span class="n">paused</span><span class="p">:</span><span class="w"> </span><span class="kt">bool</span><span class="p">,</span>
<span class="w">  </span><span class="o">..</span><span class="p">.</span>
<span class="p">}</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">contract_receive</span><span class="p">(</span>
<span class="w">  </span><span class="n">ctx</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">ReceiveContext</span><span class="p">,</span>
<span class="w">  </span><span class="n">host</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="n">Host</span><span class="o">&lt;</span><span class="n">State</span><span class="o">&gt;</span><span class="p">,</span>
<span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">ContractResult</span><span class="o">&lt;</span><span class="p">()</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Check that contract is not paused.</span>
<span class="w">  </span><span class="n">ensure</span><span class="o">!</span><span class="p">(</span><span class="o">!</span><span class="n">host</span><span class="p">.</span><span class="n">state</span><span class="p">().</span><span class="n">paused</span><span class="p">,</span><span class="w"> </span><span class="n">ContractError</span><span class="p">::</span><span class="n">Custom</span><span class="p">(</span><span class="n">CustomContractError</span><span class="p">::</span><span class="n">ContractPaused</span><span class="p">));</span>
<span class="w">  </span><span class="c1">// Continue execution</span>
<span class="w">  </span><span class="o">..</span><span class="p">.</span>
<span class="p">}</span>

<span class="o">..</span><span class="p">.</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">contract_set_paused</span><span class="p">(</span>
<span class="w">  </span><span class="n">ctx</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">ReceiveContext</span><span class="p">,</span>
<span class="w">  </span><span class="n">host</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="n">Host</span><span class="o">&lt;</span><span class="n">State</span><span class="o">&gt;</span><span class="p">,</span>
<span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">ContractResult</span><span class="o">&lt;</span><span class="p">()</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// Check that only the admin is authorized to pause/unpause the contract.</span>
<span class="w">  </span><span class="n">ensure_eq</span><span class="o">!</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="n">sender</span><span class="p">(),</span><span class="w"> </span><span class="n">host</span><span class="p">.</span><span class="n">state</span><span class="p">().</span><span class="n">admin</span><span class="p">,</span><span class="w"> </span><span class="n">ContractError</span><span class="p">::</span><span class="n">Unauthorized</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// Parse the parameter.</span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="n">params</span><span class="p">:</span><span class="w"> </span><span class="nc">SetPausedParams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ctx</span><span class="p">.</span><span class="n">parameter_cursor</span><span class="p">().</span><span class="n">get</span><span class="p">()</span><span class="o">?</span><span class="p">;</span>

<span class="w">  </span><span class="c1">// Update the paused variable.</span>
<span class="w">  </span><span class="n">host</span><span class="p">.</span><span class="n">state_mut</span><span class="p">().</span><span class="n">paused</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">params</span><span class="p">.</span><span class="n">paused</span><span class="p">;</span>

<span class="w">  </span><span class="nb">Ok</span><span class="p">(())</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="denial-of-service">
<span id="best-practices-dos"></span><h3>Denial-of-service<a class="headerlink" href="#denial-of-service" title="Link to this heading">#</a></h3>
<p>This section presents situations when a smart contract ends up in a blocked state making it unusable permanently or for some period of time.</p>
<section id="external-call-failure">
<span id="best-practices-external-call-failure"></span><h4>External call failure<a class="headerlink" href="#external-call-failure" title="Link to this heading">#</a></h4>
<p>Sending funds back to an unknown contract address as part of some complex operation could block this operation from succeeding.
The contract you call might fail for various reasons.
If the contract call fails, the whole operation also fails.</p>
<p>Consider splitting withdrawal of funds from the rest of the contract logic.
You could create a separate entrypoint allowing users, which could be smart contracts, to request funds back.
This pattern is called <em>Pull over Push</em>, where <em>Pull</em> corresponds to the user explicitly requesting funds and <em>Push</em> to sending the funds back as part of some other operation.</p>
<p>Note that this pattern is not always necessary.
In the <a class="reference external" href="https://github.com/Concordium/concordium-rust-smart-contracts/blob/main/examples/auction/src/lib.rs">auction contract</a> example it is safe to refund the previous bidder as part of the bidding functionality, because on Concordium transferring to accounts is guaranteed not to execute any code.
However, if you want smart contract addresses to participate in the auction, it could lead to blocking if the receiving contract fails.
In this case, consider using the <em>Pull over Push</em> pattern.</p>
</section>
<section id="operations-with-unknown-bound">
<h4>Operations with unknown bound<a class="headerlink" href="#operations-with-unknown-bound" title="Link to this heading">#</a></h4>
<p>Interacting over data structures that store data updated by users can become expensive over time, once it has more and more entries.</p>
<p>Consider the following map for storing all user bids in an auction contract:</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="k">pub</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">State</span><span class="o">&lt;</span><span class="n">S</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">StateApi</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">bids</span><span class="p">:</span><span class="w"> </span><span class="nc">StateMap</span><span class="o">&lt;</span><span class="n">Address</span><span class="p">,</span><span class="w"> </span><span class="n">Amount</span><span class="p">,</span><span class="w"> </span><span class="n">S</span><span class="o">&gt;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Computing the maximum for each new bid requires iterating over the map.
As the number of participants grows it becomes more expensive to compute the highest bid.
Eventually, it might not fit into the block energy limit and bidding becomes blocked.
See <a class="reference internal" href="../contract-instances.html#contract-instance-operations"><span class="std std-ref">Limits</span></a> for more information.</p>
<p>This situation is not necessarily an attack, it could occur naturally during the contract lifetime.
In general, all computations requiring iteration with no clear bound could be an issue.
For the auction, consider adding <code class="docutils literal notranslate"><span class="pre">highest_bid:</span> <span class="pre">Amount</span></code> to the state.
Update <code class="docutils literal notranslate"><span class="pre">highest_bid</span></code> once a new bidder proposes a higher bid.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Keep only relevant data in the contract state.
For example, if you are interested in historical data for all the bids, but your contract logic requires only the highest bid to make a decision, consider <a class="reference internal" href="../contract-instances.html#contract-instances-logging-events"><span class="std std-ref">logging events</span></a> instead.
An off-chain part of your dApp can then use logs to obtain the historical data.</p>
</div>
</section>
</section>
<section id="external-calls">
<span id="best-practices-external-calls"></span><h3>External Calls<a class="headerlink" href="#external-calls" title="Link to this heading">#</a></h3>
<p>Treat every external call as a potential security risk.
Calling another contract gives control to potentially malicious code that could make arbitrary calls to any other contract, including your own contract.
Calls to your contract might change its state through entrypoints that permit updating the state; see the <a class="reference internal" href="#best-practices-reentrancy"><span class="std std-ref">Reentrancy</span></a> section of this document.
Moreover, you should not make any assumptions about energy consumption, or expect that the execution succeeds.
Your contract should be able to correctly handle situations when the call to an external contract fails.</p>
<section id="general-recommendations">
<h4>General recommendations<a class="headerlink" href="#general-recommendations" title="Link to this heading">#</a></h4>
<ul>
<li><p><em>Avoid complex interactions</em>.
Avoid splitting the on-chain part of your dApp into several smart contracts unless it is strictly necessary.
For example, instead of using the <em>proxy pattern for upgradability</em>, use <a class="reference internal" href="../contract-instances.html#contract-instance-upgradeability"><span class="std std-ref">natively upgradable contracts</span></a>.
Using the proxy makes the implementation more complex by introducing contract interactions.
Proxies can be useful for other purposes, but for upgradability, it is recommended to use  <a class="reference internal" href="../contract-instances.html#contract-instance-upgradeability"><span class="std std-ref">natively upgradable contracts</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A simple <em>proxy pattern</em> splits your contract into the proxy contract that serves as a relayer and main contract that contains the actual implementation of the functionality.
The address of the main contract can be updated in the state of the proxy contract, making the whole setup upgradable. (See <a class="reference external" href="https://docs.openzeppelin.com/contracts/4.x/api/proxy">here</a> for more information).</p>
</div>
</li>
<li><p><em>Think about the contract state</em>.
Do not assume that the contract state stays the same after an external call.
See the <a class="reference internal" href="#best-practices-reentrancy"><span class="std std-ref">Reentrancy</span></a> section of this document for details.</p></li>
<li><p><em>Protect from denial-of-service (DoS) attacks</em>.
Calls to an <em>unknown</em>, e.g. user-provided, contract address can fail unpredictably.
When this call is part of some complex operation, the whole operation will fail as well.
In some cases, this results in blocking the functionality of your contract for all users.
Read more in the <a class="reference internal" href="#best-practices-external-call-failure"><span class="std std-ref">External call failure</span></a> section of this document.</p></li>
</ul>
</section>
<section id="reentrancy">
<span id="best-practices-reentrancy"></span><h4>Reentrancy<a class="headerlink" href="#reentrancy" title="Link to this heading">#</a></h4>
<p>The <em>reentrant behavior</em> is not specific to smart contracts: it is a well known issue in the context of concurrency.
A procedure can be interrupted in the middle of its execution, run again in <em>another</em> execution context, and then continue execution from the interruption point.
In case of smart contracts, each call to external smart contracts interrupts the execution and hands over control to unknown code.
Do not treat external contract invocations as regular method calls.
Instead, think of them as sending a message and temporarily pausing execution of your contract.
The receiving side has full control of what to do next and can choose to call your contract again while it is still in the â€œpausedâ€ state waiting for the external call to be completed.
Once the external call is completed, the contract state and balance might be different from those before the call.
See an <a class="reference internal" href="../guides/unit-test-contract.html#reentracny-unit-testing"><span class="std std-ref">example</span></a> based on <a class="reference external" href="https://en.wikipedia.org/wiki/The_DAO_(organization)">the DAO</a> Ethereum smart contract vulnerability of how reentrancy can be discovered using unit testing.</p>
<ul>
<li><p>Avoid changing the state after an external call: use the <em>Checks-Effects-Interactions</em> pattern: validate data, update the contract state, make external calls.</p></li>
<li><p>If you need to perform some state changes after an external call use <a class="reference external" href="https://docs.rs/concordium-std/latest/concordium_std/struct.ExternHost.html#method.invoke_contract_read_only">invoke_contract_read_only</a>.
If the read-only invocation succeeds, it ensures that the state has not been changed after returning from the external call.
Using <code class="docutils literal notranslate"><span class="pre">invoke_contract_read_only</span></code> covers most of the cases that require protecting the contract state from updating due to reentrancy.</p></li>
<li><p>Alternatively, consider using a <em>mutex</em>: a boolean flag that is set before making an external call, preventing all entrypoints from reentrancy. Reset after the call is complete.</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="k">pub</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">State</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="o">..</span><span class="p">.</span>
<span class="w">  </span><span class="n">lock</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kt">bool</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">entrypoint_with_mutex</span><span class="p">(</span>
<span class="w">  </span><span class="n">ctx</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">ReceiveContext</span><span class="p">,</span>
<span class="w">  </span><span class="n">host</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="n">Host</span><span class="o">&lt;</span><span class="n">State</span><span class="o">&gt;</span><span class="p">,</span>
<span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="p">(),</span><span class="w"> </span><span class="n">Error</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">ensure</span><span class="o">!</span><span class="p">(</span><span class="o">!</span><span class="n">host</span><span class="p">.</span><span class="n">state</span><span class="p">().</span><span class="n">lock</span><span class="p">,</span><span class="w"> </span><span class="n">Error</span><span class="p">::</span><span class="n">Locked</span><span class="p">);</span>
<span class="w">  </span><span class="n">host</span><span class="p">.</span><span class="n">state_mut</span><span class="p">().</span><span class="n">lock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<span class="w">  </span><span class="o">..</span><span class="p">.</span>
<span class="w">  </span><span class="n">host</span><span class="p">.</span><span class="n">invoke_contract</span><span class="p">(</span><span class="o">..</span><span class="p">.);</span>
<span class="w">  </span><span class="o">..</span><span class="p">.</span>
<span class="w">  </span><span class="n">host</span><span class="p">.</span><span class="n">state_mut</span><span class="p">().</span><span class="n">lock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Using a mutex complicates the contract logic.
First, think about using simpler solutions, like the <em>Checks-Effects-Interactions</em> pattern, or <code class="docutils literal notranslate"><span class="pre">invoke_contract_read_only</span></code>.
Think carefully which entrypoints you want to protect and make sure that the contract will not end up locked forever.</p>
</div>
</li>
</ul>
</section>
</section>
<section id="code-documentation">
<span id="best-practices-code-documentation"></span><h3>Code documentation<a class="headerlink" href="#code-documentation" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Write an outline of the smart contract functionality in the beginning of the file; if the contract implements some standards, mention it.</p></li>
<li><p>Document decisions/choices in the code.</p></li>
<li><p>Document entrypoints:</p>
<ul>
<li><p>What functionality does the entrypoint implement?</p></li>
<li><p>Who has access rights to call the entrypoint?</p></li>
<li><p>When is the call rejected?</p></li>
<li><p>What events are logged and when?</p></li>
</ul>
</li>
<li><p>Document tests:</p>
<ul>
<li><p>What scenario/property is being tested?</p></li>
<li><p>What are the assumptions: input data is assumed to be valid, users have enough rights, etc.</p></li>
</ul>
</li>
</ul>
</section>
<section id="automated-testing">
<span id="best-practices-code-automated-testing"></span><h3>Automated testing<a class="headerlink" href="#automated-testing" title="Link to this heading">#</a></h3>
<p>The Concordium standard library <a class="reference external" href="https://docs.rs/concordium-std/latest/concordium_std/">concordium-std</a> offers several possibilities for testing the smart contract code.</p>
<ul class="simple">
<li><p>Use <a class="reference internal" href="../guides/integration-test-contract.html#integration-test-contract"><span class="std std-ref">Integration testing</span></a> to test particular cases where you define what is the valid output.</p></li>
<li><p>(<strong>Deprecated</strong>) Use <a class="reference internal" href="../guides/unit-test-contract.html#unit-test-contract"><span class="std std-ref">Unit testing</span></a> to test particular cases where you define what is the valid output.</p></li>
<li><p>(<strong>Deprecated</strong>) <a class="reference internal" href="../guides/unit-test-contract.html#writing-property-based-tests"><span class="std std-ref">Property-based testing</span></a> is a variant of randomized testing that repeatedly checks a <em>property</em> with randomly generated input.</p></li>
</ul>
<p>Use the <a class="reference internal" href="#best-practices-specification"><span class="std std-ref">smart contract specification</span></a> guidelines from this document to come up with cases and properties to test.</p>
</section>
<section id="checklist">
<h3>Checklist<a class="headerlink" href="#checklist" title="Link to this heading">#</a></h3>
<p>Make sure that:</p>
<ul class="simple">
<li><p>you have a smart contract specification;</p></li>
<li><p>your code follows the <a class="reference internal" href="#best-practices-code-structure"><span class="std std-ref">recommended structure</span></a> described in this document;</p></li>
<li><p>you looked carefully for all <em>known</em> sources of issues, e.g. <a class="reference internal" href="#best-practices-external-calls"><span class="std std-ref">external calls</span></a>, arithmetic overflows, etc.</p></li>
<li><p>you have a <em>disaster recovery plan</em>: the pause functionality, upgradability, etc.</p></li>
<li><p>you used formatting and linting tools (see the <a class="reference external" href="https://github.com/Concordium/concordium-rust-smart-contracts#contributing">Contributing section</a>);</p></li>
<li><p>you <a class="reference internal" href="#best-practices-code-documentation"><span class="std std-ref">documented your code properly</span></a>;</p></li>
<li><p>you tested your code according to the specification, using both <a class="reference internal" href="#best-practices-code-automated-testing"><span class="std std-ref">automated</span></a> and manual testing;</p></li>
<li><p>your code was reviewed externally.</p></li>
</ul>
</section>
</section>
</section>


                </article>
              
              
              
                <footer class="bd-footer-article">
                  <div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><style>
  legend {
    font-size: 12px;
    font-weight:bold ;
  }

  label {
    font-size: 12px;
  }
</style>

<fieldset>
  <legend>Was this article helpful?</legend>
  <input type="radio" id="Yes" name="rating" value="Yes" onclick="_paq.push(['trackEvent', 'Rating', 'ClickYes', 'Yes']);">
  <label for="Yes">Yes</label>
  <input type="radio" id="No" name="rating" value="No" onclick="_paq.push(['trackEvent', 'Rating', 'ClickNo', 'No']);">
  <label for="No">No</label>
</fieldset>

<!-- Matomo Tag Manager -->
<script>
  var _mtm = window._mtm = window._mtm || [];
  _mtm.push({'mtm.startTime': (new Date().getTime()), 'event': 'mtm.Start'});
  (function() {
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src='https://cdn.matomo.cloud/concordium.matomo.cloud/container_8ZIoCz8b.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Matomo Tag Manager --></div>
  
</div>
                </footer>
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Best Practices</p>
      </div>
    </a>
    <a class="right-next"
       href="costs.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Cost reduction</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mindset">Mindset</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#specification">Specification</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#concordium-rust-smart-contracts">Concordium Rust Smart Contracts</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#recommended-structure">Recommended structure</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#denial-of-service">Denial-of-service</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#external-call-failure">External call failure</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#operations-with-unknown-bound">Operations with unknown bound</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#external-calls">External Calls</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#general-recommendations">General recommendations</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#reentrancy">Reentrancy</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#code-documentation">Code documentation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#automated-testing">Automated testing</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#checklist">Checklist</a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  
  <div class="tocsection editthispage">
    <a href="https://github.com/Concordium/concordium.github.io/edit/main/source/mainnet/docs/smart-contracts/best-practices/development.rst">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on GitHub
        
      
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  

  <p class="copyright">
    
      Â© Copyright 2021 - 2025, Concordium Software ApS.
      <br/>
    
  </p>

  <style>
    .cc {
      position: relative;
      bottom: 0%;
      left: 0%;
    }

    .cc a {
      display: inline-block;
      text-align: left;
      padding-left: 16px;
      padding-bottom: 8px;
      color: black;
      font-size: 8px;
    }
</style>

<div class="cc">
  <a text-decoration=none href="http://creativecommons.org/licenses/by-sa/4.0/">
    <img src="../../../_static/cc-sa-by.png" />
  </a>
  <a text-decoration=none href="../../../net/guides/legal.html" >
    Legal information
  </a>
</div>
  <div id="cookie-consent" class="consent">     
    <p>This website only aggregates and analyzes the actions you take here if you allow cookies. If you do not allow cookies, it protects your privacy, but also prevents the owner from learning from your actions and creating a better experience for you and other users.</p><p>Note that if you opt in and you clear your cookies, delete the opt-in cookie, or if you change computers or Web browsers, you will need to perform the opt-in procedure again.</p>
    <button onclick="consentGranted()">Allow</button>     
    <button onclick="consentDenied()">Decline</button>     
    <a href="https://concordium.com/privacy-policy/">Privacy policy</a> 
</div>  

<!-- Matomo --> 
<script>   
var _paq = window._paq = window._paq || [];  

// Save the choice in a cookie with proper attributes
function storeChoice(granted) {   
    // Set cookie with 1 year expiration, path, and secure attributes
    const expires = new Date();
    expires.setFullYear(expires.getFullYear() + 1);
    document.cookie = "cookie-consent=" + granted + "; expires=" + expires.toUTCString() + "; path=/; SameSite=Lax";
}  

// Look for a cookie storing the previous choice of the user. 
// Returns null if no choice was stored, true if granted, false if denied
function loadChoice() {   
    if (!document.cookie.includes("cookie-consent=")) {       
        return null;   
    }   
    return document.cookie.includes("cookie-consent=true");
}  

// Removes the cookie consent banner safely
function removeCookieConsentBanner() {   
    const banner = document.getElementById("cookie-consent");
    if (banner) {
        banner.remove();
    }
}  

// Called by the cookie consent banner if granted permission
function consentGranted() {   
    storeChoice(true);
    _paq.push(['setCookieConsentGiven']);   
    removeCookieConsentBanner();
}  

// Called by the cookie consent banner if denied permission
function consentDenied() {   
    storeChoice(false);  // FIXED: Now correctly stores false
    removeCookieConsentBanner();
}  

// Check for stored consent and act accordingly
const stored = loadChoice(); 
if (stored === true) {
    // User previously granted consent
    _paq.push(['setCookieConsentGiven']);
    removeCookieConsentBanner();
} else if (stored === false) {
    // User previously denied consent
    removeCookieConsentBanner();
}
// If stored === null, show the banner (do nothing)

_paq.push(['requireCookieConsent']); 
/* tracker methods like "setCustomDimension" should be called before "trackPageView" */ 
_paq.push(['trackPageView']); 
_paq.push(['enableLinkTracking']);  

(function() {     
    var u="https://concordium.matomo.cloud/";     
    _paq.push(['setTrackerUrl', u+'matomo.php']);     
    _paq.push(['setSiteId', '2']);     
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];     
    g.async=true; g.src='//cdn.matomo.cloud/concordium.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);   
})();    

// Only remember consent if it was actually granted
if (stored === true) {
    _paq.push(['rememberCookieConsentGiven']);
}
</script>   

<!-- Start of HubSpot Embed Code --> 
<script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/4771748.js"></script> 
<!-- End of HubSpot Embed Code -->

  </body>
</html>