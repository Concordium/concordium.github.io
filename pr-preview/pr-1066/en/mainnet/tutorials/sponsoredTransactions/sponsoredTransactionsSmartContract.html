


<!DOCTYPE html>


<html lang="en" data-content_root="../../" data-theme="light">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Sponsored Transactions Smart Contract &#8212; Concordium  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=fd3f3429" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=a5c4661c" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=53c713d1" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/tippy.css?v=6175c28d" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=716d1818"></script>
    <script src="../../_static/design-tabs.js?v=36754332"></script>
    <script defer="defer" src="https://unpkg.com/@popperjs/core@2"></script>
    <script defer="defer" src="https://unpkg.com/tippy.js@6"></script>
    <script defer="defer" src="../../_static/tippy/tutorials/sponsoredTransactions/sponsoredTransactionsSmartContract.40727964-7a67-42b4-8e3c-50311cf9e653.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'tutorials/sponsoredTransactions/sponsoredTransactionsSmartContract';</script>
    <link rel="icon" href="../../_static/concordium-logo-no-text.svg"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Sponsored Transactions Frontend and Backend" href="sponsoredTransactionsFrontendAndBackend.html" />
    <link rel="prev" title="A Sponsored Transactions dApp" href="index.html" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,400;0,700;1,400;1,700&family=IBM+Plex+Sans:ital,wght@0,400;0,700;1,400;1,700&display=swap" />

  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="light">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item"><style>
.navbar-brand img {
    max-height: 200px;
    width: auto;
}
</style>

<div>
    <a href="https://developer.concordium.software/">
        <img class="logo" src="../../_static/concordium-logo-dark.svg" />
    </a>
</div></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../docs/index.html">
                        Docs
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../index.html">
                        Tutorials
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../tools/index.html">
                        Tools
                      </a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://github.com/Concordium" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fab fa-github-square fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="mailto:support@concordium.software" title="Support" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Support</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://developer.concordium.software/en/mainnet/net/guides/developer-page.html#block-explorers" title="Monitor" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fas fa-chart-line fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Monitor</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://support.concordium.software/latest" title="Discourse" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fab fa-discourse fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Discourse</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://www.youtube.com/channel/UCPZc2CuB2jGbZjD_5zX7-1A" title="YouTube" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fab fa-youtube fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">YouTube</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://medium.com/concordium" title="Medium" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fab fa-medium fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Medium</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://academy.concordium.software/ccd-academy/getting-started" title="Academy" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fas fa-graduation-cap fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Academy</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../docs/index.html">
                        Docs
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../index.html">
                        Tutorials
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../tools/index.html">
                        Tools
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://github.com/Concordium" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fab fa-github-square fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="mailto:support@concordium.software" title="Support" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Support</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://developer.concordium.software/en/mainnet/net/guides/developer-page.html#block-explorers" title="Monitor" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fas fa-chart-line fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Monitor</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://support.concordium.software/latest" title="Discourse" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fab fa-discourse fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Discourse</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://www.youtube.com/channel/UCPZc2CuB2jGbZjD_5zX7-1A" title="YouTube" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fab fa-youtube fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">YouTube</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://medium.com/concordium" title="Medium" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fab fa-medium fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Medium</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://academy.concordium.software/ccd-academy/getting-started" title="Academy" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fas fa-graduation-cap fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Academy</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../smart-contracts-tutorials.html"> Smart contract tutorials</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../setup-env.html">Setup the development environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../counter/counter-contract.html">Counter</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../piggy-bank/index.html">PiggyBank</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../piggy-bank/writing.html">Writing the piggy bank smart contract</a></li>
<li class="toctree-l3"><a class="reference internal" href="../piggy-bank/testing.html">Testing the piggy bank smart contract</a></li>
<li class="toctree-l3"><a class="reference internal" href="../piggy-bank/deploying.html">Deploying the piggy bank smart contract</a></li>
<li class="toctree-l3"><a class="reference internal" href="../piggy-bank/frontend.html">Setting up a frontend</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../wCCD/index.html">wCCD</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../wCCD/wCCD-introduction.html">Understanding the wCCD token protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../wCCD/wCCD-interacting.html">Interacting with the wCCD token protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../wCCD/wCCD-frontend-set-up.html">Setting up the frontend</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../voting/index.html">The Voting dApp</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../voting/voting-sc.html">Writing a voting smart contract</a></li>
<li class="toctree-l3"><a class="reference internal" href="../voting/voting-dapp.html">Setting up the frontend</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../nft-minting/index.html">Mint an NFT</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../nft-minting/upload-nft.html">Upload the NFT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nft-minting/build-smart-contract.html">Initialize, build, and deploy the smart contract</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nft-minting/mint-xfer.html">Mint and transfer the NFT</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../sft-minting/index.html">Mint a semi-fungible token</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../sft-minting/setup.html">Setup the development environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sft-minting/build-smart-contract.html">Smart contract modifications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sft-minting/mint-xfer.html">Mint and transfer semi-fungible token</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../fungible-tokens/index.html">Mint fungible tokens</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../fungible-tokens/smart-contract.html">Smart contract implementation for fungible tokens</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fungible-tokens/mint-xfer.html">Mint, transfer, and burn fungible tokens</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../nft-marketplace/index.html">NFT marketplace smart contract tutorial</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../nft-marketplace/smart-contract.html">Build and deploy the smart contract</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../eSealing/index.html">eSealing</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../eSealing/eSealing_dapp.html">Exploring the eSealing dapp</a></li>
</ul>
</li>
<li class="toctree-l2 current active has-children"><a class="reference internal" href="index.html">Sponsored Transactions</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l3 current active"><a class="current reference internal" href="#">Exploring the sponsored Transactions Smart Contract</a></li>
<li class="toctree-l3"><a class="reference internal" href="sponsoredTransactionsFrontendAndBackend.html">Exploring the sponsored Transactions dApp</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../smartContractUpgrade/index.html">Smart Contract Upgrade</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-11"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../smartContractUpgrade/smartContractUpgrade.html">Native upgradability</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../daap-examples/dapp-examples.html"> dApp examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../company-identity/company-identities.html"> How to create a company identity</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">





<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">Tutorials</a></li>
    
    
    <li class="breadcrumb-item"><i class="fa-solid fa-ellipsis"></i></li>
    
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">A Sponsored Transactions dApp</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Sponsored...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="sponsored-transactions-smart-contract">
<span id="sponsoredtransactionssmartcontract"></span><h1>Sponsored Transactions Smart Contract<a class="headerlink" href="#sponsored-transactions-smart-contract" title="Link to this heading">#</a></h1>
<p>The goal of this part of the tutorial is to understand how the sponsored
transaction mechanism is implemented in the smart contract and how to create and verify an Ed25519 signature in the smart contract code.</p>
<p>Clone the <a class="reference external" href="https://github.com/Concordium/concordium-rust-smart-contracts/tree/main/examples/cis3-nft-sponsored-txs">sponsored transaction example</a>
which you will modify in this tutorial.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span>git<span class="w"> </span>clone<span class="w"> </span>--recurse-submodules<span class="w"> </span>git@github.com:Concordium/concordium-rust-smart-contracts.git
</pre></div>
</div>
<p>Navigate to the correct example folder:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span><span class="nb">cd</span><span class="w"> </span>./examples/cis3-nft-sponsored-txs
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">cis3_nft</span></code> contract implements the <a class="reference external" href="https://proposals.concordium.software/CIS/cis-3.html">CIS-3 standard (sponsored transactions)</a>. The standard defines that the contract has to expose the
<code class="docutils literal notranslate"><span class="pre">permit</span></code> and the <code class="docutils literal notranslate"><span class="pre">supportsPermit</span></code> functions.</p>
<section id="permit-function">
<h2><code class="docutils literal notranslate"><span class="pre">permit</span></code> function<a class="headerlink" href="#permit-function" title="Link to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">permit</span></code> function verifies an ed25519 signature from a sponsoree and authorizes the sponsor to execute the logic of
specific entrypoints (<code class="docutils literal notranslate"><span class="pre">transfer/updateOperator</span></code> in the example code) on behalf of the sponsoree. The sponsored transaction mechanism replaces
the authorization checks conducted on the sender/invoker variable with signature verification.
That is, the sponsoree needs to sign a message (indicating its intended action), then
anyone can invoke the <code class="docutils literal notranslate"><span class="pre">permit</span></code> function with this signed message to execute the sponsoree’s intended action.
The smart contract logic checks if the <code class="docutils literal notranslate"><span class="pre">signature</span></code> was generated by the sponsoree with the <code class="docutils literal notranslate"><span class="pre">check_account_signature</span></code> host function.
This function looks up the public key/keys associated with the signer address and verifies that the signer has generated the <code class="docutils literal notranslate"><span class="pre">signature</span></code> by signing the <code class="docutils literal notranslate"><span class="pre">message_hash</span></code>.</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// Check signature.</span>
<span class="kd">let</span><span class="w"> </span><span class="n">valid_signature</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">host</span><span class="p">.</span><span class="n">check_account_signature</span><span class="p">(</span><span class="n">param</span><span class="p">.</span><span class="n">signer</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">param</span><span class="p">.</span><span class="n">signature</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">message_hash</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="n">ensure</span><span class="o">!</span><span class="p">(</span><span class="n">valid_signature</span><span class="p">,</span><span class="w"> </span><span class="n">CustomContractError</span>::<span class="n">WrongSignature</span><span class="p">.</span><span class="n">into</span><span class="p">());</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Ed25519 is an elliptic curve signing algorithm using EdDSA and Curve25519. It belongs to asymmetric cryptography,
also known as public-key cryptography, where you generate a pair of related keys –
one public key and one private key. The sponsoree signs a message with its private key
and anyone can verify the sponsoree’s signature using its public key. The public key is shared with other entities (e.g., the smart contract) while the private key is only known to the sponsoree.
The smart contract needs to know the public key to be able to verify that the sponsoree signed the message with the corresponding private key.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Concordium Wallet for Web prepends the message with the account address (<code class="docutils literal notranslate"><span class="pre">signer</span></code>) and 8 zero bytes before signing it.
This ensures that signed messages (prepended with 8 zero bytes and the account address) can be distinguished from transactions (prepended with the account nonce and the account address).
The smart contract logic reverse engineers the Concordium Wallet for Web implementation by equally prepending the account address (signer) and 8 zero bytes to the message.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Concordium accounts can be multi-sig and each account has at least one <code class="docutils literal notranslate"><span class="pre">public</span> <span class="pre">key</span></code> and at least
one <code class="docutils literal notranslate"><span class="pre">private</span> <span class="pre">key</span></code> associated with it.
For this sponsored transactions example, the accounts in the Concordium Wallet for Web (or Concordium Wallet for Mobile)
have exactly one <code class="docutils literal notranslate"><span class="pre">public</span> <span class="pre">key</span></code> and exactly one <code class="docutils literal notranslate"><span class="pre">private</span> <span class="pre">key</span></code> (no multi-sig accounts).
You use your <code class="docutils literal notranslate"><span class="pre">private</span> <span class="pre">key</span></code> to sign the message in the wallet and your <code class="docutils literal notranslate"><span class="pre">public</span> <span class="pre">key</span></code> is
used in the smart contract to verify that this signature was generated in the wallet with the associated <code class="docutils literal notranslate"><span class="pre">private</span> <span class="pre">key</span></code>.
Never share your <code class="docutils literal notranslate"><span class="pre">private</span> <span class="pre">key</span></code>.</p>
</div>
</section>
<section id="supportspermit-function">
<h2><code class="docutils literal notranslate"><span class="pre">supportsPermit</span></code> function<a class="headerlink" href="#supportspermit-function" title="Link to this heading">#</a></h2>
<p>This function can be queried with a list of given entrypoint names.
The response contains corresponding results for each entrypoint,
where the result is either “Entrypoint is not supported and can not be invoked via
the permit function using the sponsored transaction mechanism” or “Entrypoint is supported and
can be invoked via the permit function using the sponsored transaction mechanism”.</p>
<p>You can explore the function by invoking it with the <code class="docutils literal notranslate"><span class="pre">concordium-client</span></code> as follows:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span>concordium-client<span class="w"> </span>contract<span class="w"> </span>invoke<span class="w"> </span><span class="m">6372</span><span class="w"> </span>--entrypoint<span class="w"> </span>supportsPermit<span class="w"> </span>--parameter-json<span class="w"> </span>supportsPermit.json<span class="w"> </span>--grpc-port<span class="w"> </span><span class="m">20000</span><span class="w"> </span>--grpc-ip<span class="w"> </span>node.testnet.concordium.com
</pre></div>
</div>
<p>For example, this <code class="docutils literal notranslate"><span class="pre">supportsPermit.json</span></code> file results in the below screenshot.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;queries&quot;</span><span class="p">:[</span><span class="s2">&quot;aaaa&quot;</span><span class="p">,</span><span class="s2">&quot;transfer&quot;</span><span class="p">,</span><span class="s2">&quot;updateOperator&quot;</span><span class="p">]}</span>
</pre></div>
</div>
<img alt="Output of supportsPermit function" class="align-center" src="../../_images/supportsPermit.png" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Comprehensive instructions on how to download and set up <code class="docutils literal notranslate"><span class="pre">concordium-client</span></code> can be found in <a class="reference internal" href="../setup-env.html#setup-env"><span class="std std-ref">Setup the development environment</span></a>.</p>
</div>
</section>
<section id="nonces-registry">
<h2><code class="docutils literal notranslate"><span class="pre">Nonces</span></code> registry<a class="headerlink" href="#nonces-registry" title="Link to this heading">#</a></h2>
<p>The smart contract has a registry to link an account to its next nonce.
The nonce is increased sequentially every time a signed message (corresponding to the account) is successfully executed in the <code class="docutils literal notranslate"><span class="pre">permit</span></code> function.
The nonce is used to prevent replay attacks of the signed message because only a message signed with the next nonce in sequence can be executed as seen below:</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">// Check the nonce to prevent replay attacks.</span>
<span class="n">ensure_eq</span><span class="o">!</span><span class="p">(</span><span class="n">message</span><span class="p">.</span><span class="n">nonce</span><span class="p">,</span><span class="w"> </span><span class="n">nonce</span><span class="p">,</span><span class="w"> </span><span class="n">CustomContractError</span>::<span class="n">NonceMismatch</span><span class="p">.</span><span class="n">into</span><span class="p">());</span>
</pre></div>
</div>
</section>
<section id="testing-the-signature-verification">
<h2>Testing the signature verification<a class="headerlink" href="#testing-the-signature-verification" title="Link to this heading">#</a></h2>
<p>In this section, you will learn how to create an Ed25519 signature
that you can use for your test cases to confirm that the smart contract signature verification logic works as expected.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The commands in this section have to be executed from the <cite>./examples/cis3-nft-sponsored-txs</cite> folder where the <code class="docutils literal notranslate"><span class="pre">Cargo.toml</span></code> file is defined for this project.</p>
</div>
<p>Run the test cases to confirm that they pass before you start modifying the code:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span>cargo<span class="w"> </span><span class="nb">test</span>
<span class="go">or</span>
<span class="gp">$</span>cargo<span class="w"> </span>concordium<span class="w"> </span><span class="nb">test</span>
</pre></div>
</div>
<img alt="Running the test cases" class="align-center" src="../../_images/testCases.png" />
<p>You should see no errors and all the test cases are green indicating that they passed successfully.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Comprehensive instructions on how to download and set up  <code class="docutils literal notranslate"><span class="pre">cargo</span> <span class="pre">concordium</span></code> can be found in <a class="reference internal" href="../setup-env.html#setup-env"><span class="std std-ref">Setup the development environment</span></a>.</p>
</div>
<p>The next few commands explain how you can display the <code class="docutils literal notranslate"><span class="pre">message_hash</span></code> that you would need to sign.</p>
<p>Add the following to the smart contract <code class="docutils literal notranslate"><span class="pre">permit</span></code> function after the variable <code class="docutils literal notranslate"><span class="pre">message_hash</span></code> is defined.</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Message hash: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">HashSha2256</span><span class="p">(</span><span class="n">message_hash</span><span class="p">));</span>
</pre></div>
</div>
<p>This prints the <code class="docutils literal notranslate"><span class="pre">message_hash</span></code> when running the test cases as follows:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span>cargo<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--<span class="w"> </span>--nocapture
</pre></div>
</div>
<img alt="Printing the message hash" class="align-center" src="../../_images/messageHash.png" />
<p>The test cases have two tests (<cite>test_permit_transfer/test_permit_update_operator</cite>) that execute the <code class="docutils literal notranslate"><span class="pre">permit</span></code> function, and that is why you see two <code class="docutils literal notranslate"><span class="pre">message_hashes</span></code> printed out in the console. You can comment out one of the tests to not get confused about
which message you are going to sign. You need to generate a public-private key pair to sign this <code class="docutils literal notranslate"><span class="pre">message_hash</span></code>.
You can use an <a class="reference external" href="https://cyphr.me/ed25519_tool/ed.html">Ed25519 signature generation tool</a> for testing to generate such keys and signatures.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Only use these online tools that generate private keys for you in your test cases.
Don’t use the key in a production setting, since the private key might be known
to the online webpage provider and should not be considered safe.</p>
</div>
<p>Copy the <code class="docutils literal notranslate"><span class="pre">message_hash</span></code> into the message field and switch the <code class="docutils literal notranslate"><span class="pre">Msg</span> <span class="pre">Encoding</span></code> to <code class="docutils literal notranslate"><span class="pre">hex</span></code> (not <code class="docutils literal notranslate"><span class="pre">text</span></code>).</p>
<p>Click the <code class="docutils literal notranslate"><span class="pre">Generate</span> <span class="pre">Random</span> <span class="pre">Key</span></code> button and click the <code class="docutils literal notranslate"><span class="pre">Sign</span></code> button.</p>
<img alt="Generate an Ed25519 signature" class="align-center" src="../../_images/Ed25519SignatureGeneration.png" />
<p>This action generates a signature in the last field in the above screenshot.
The <code class="docutils literal notranslate"><span class="pre">signature</span></code> and <code class="docutils literal notranslate"><span class="pre">public</span> <span class="pre">key</span></code> in the above screenshot can be copied into the below code snippets to decode them to bytes.</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="n">signature</span>:<span class="nc">SignatureEd25519</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;FC87CE9497CBD9DDDFB6CED31914D4FB93DD158EEFE7AF927AB31BB47178E61A33BEA52568475C161EC5B7A5E86B9F5F0274274192665D83197C4CE9A24C7C06&quot;</span><span class="p">.</span><span class="n">parse</span><span class="p">().</span><span class="n">unwrap</span><span class="p">();</span>
<span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Signature: {:?}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">signature</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span>
</pre></div>
</div>
<p>Add the above code snippet to the top of a test case and run the test cases again to output the signature in bytes.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span>cargo<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--<span class="w"> </span>--nocapture
</pre></div>
</div>
<p>The output should look similar to:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span>signature:<span class="w"> </span><span class="o">[</span><span class="m">252</span>,<span class="w"> </span><span class="m">135</span>,<span class="w"> </span><span class="m">206</span>,<span class="w"> </span><span class="m">148</span>,<span class="w"> </span><span class="m">151</span>,<span class="w"> </span><span class="m">203</span>,<span class="w"> </span><span class="m">217</span>,<span class="w"> </span><span class="m">221</span>,<span class="w"> </span><span class="m">223</span>,<span class="w"> </span><span class="m">182</span>,<span class="w"> </span><span class="m">206</span>,<span class="w"> </span><span class="m">211</span>,<span class="w"> </span><span class="m">25</span>,<span class="w"> </span><span class="m">20</span>,<span class="w"> </span><span class="m">212</span>,<span class="w"> </span><span class="m">251</span>,<span class="w"> </span><span class="m">147</span>,<span class="w"> </span><span class="m">221</span>,<span class="w"> </span><span class="m">21</span>,<span class="w"> </span><span class="m">142</span>,<span class="w"> </span><span class="m">239</span>,<span class="w"> </span><span class="m">231</span>,<span class="w"> </span><span class="m">175</span>,<span class="w"> </span><span class="m">146</span>,<span class="w"> </span><span class="m">122</span>,<span class="w"> </span><span class="m">179</span>,<span class="w"> </span><span class="m">27</span>,<span class="w"> </span><span class="m">180</span>,<span class="w"> </span><span class="m">113</span>,<span class="w"> </span><span class="m">120</span>,<span class="w"> </span><span class="m">230</span>,<span class="w"> </span><span class="m">26</span>,<span class="w"> </span><span class="m">51</span>,<span class="w"> </span><span class="m">190</span>,<span class="w"> </span><span class="m">165</span>,<span class="w"> </span><span class="m">37</span>,<span class="w"> </span><span class="m">104</span>,<span class="w"> </span><span class="m">71</span>,<span class="w"> </span><span class="m">92</span>,<span class="w"> </span><span class="m">22</span>,<span class="w"> </span><span class="m">30</span>,<span class="w"> </span><span class="m">197</span>,<span class="w"> </span><span class="m">183</span>,<span class="w"> </span><span class="m">165</span>,<span class="w"> </span><span class="m">232</span>,<span class="w"> </span><span class="m">107</span>,<span class="w"> </span><span class="m">159</span>,<span class="w"> </span><span class="m">95</span>,<span class="w"> </span><span class="m">2</span>,<span class="w"> </span><span class="m">116</span>,<span class="w"> </span><span class="m">39</span>,<span class="w"> </span><span class="m">65</span>,<span class="w"> </span><span class="m">146</span>,<span class="w"> </span><span class="m">102</span>,<span class="w"> </span><span class="m">93</span>,<span class="w"> </span><span class="m">131</span>,<span class="w"> </span><span class="m">25</span>,<span class="w"> </span><span class="m">124</span>,<span class="w"> </span><span class="m">76</span>,<span class="w"> </span><span class="m">233</span>,<span class="w"> </span><span class="m">162</span>,<span class="w"> </span><span class="m">76</span>,<span class="w"> </span><span class="m">124</span>,<span class="w"> </span><span class="m">6</span><span class="o">]</span>
</pre></div>
</div>
<p>You can create the below signature constant. This signature can be used in test cases to check if your signature verification logic in the smart contract works.</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="k">const</span><span class="w"> </span><span class="n">SIGNATURE</span>: <span class="nc">SignatureEd25519</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SignatureEd25519</span><span class="p">([</span><span class="mi">252</span><span class="p">,</span><span class="w"> </span><span class="mi">135</span><span class="p">,</span><span class="w"> </span><span class="mi">206</span><span class="p">,</span><span class="w"> </span><span class="mi">148</span><span class="p">,</span><span class="w"> </span><span class="mi">151</span><span class="p">,</span><span class="w"> </span><span class="mi">203</span><span class="p">,</span><span class="w"> </span><span class="mi">217</span><span class="p">,</span><span class="w"> </span><span class="mi">221</span><span class="p">,</span><span class="w"> </span><span class="mi">223</span><span class="p">,</span><span class="w"> </span><span class="mi">182</span><span class="p">,</span><span class="w"> </span><span class="mi">206</span><span class="p">,</span><span class="w"> </span><span class="mi">211</span><span class="p">,</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="mi">212</span><span class="p">,</span><span class="w"> </span><span class="mi">251</span><span class="p">,</span><span class="w"> </span><span class="mi">147</span><span class="p">,</span><span class="w"> </span><span class="mi">221</span><span class="p">,</span><span class="w"> </span><span class="mi">21</span><span class="p">,</span><span class="w"> </span><span class="mi">142</span><span class="p">,</span><span class="w"> </span><span class="mi">239</span><span class="p">,</span><span class="w"> </span><span class="mi">231</span><span class="p">,</span><span class="w"> </span><span class="mi">175</span><span class="p">,</span><span class="w"> </span><span class="mi">146</span><span class="p">,</span><span class="w"> </span><span class="mi">122</span><span class="p">,</span><span class="w"> </span><span class="mi">179</span><span class="p">,</span><span class="w"> </span><span class="mi">27</span><span class="p">,</span><span class="w"> </span><span class="mi">180</span><span class="p">,</span><span class="w"> </span><span class="mi">113</span><span class="p">,</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w"> </span><span class="mi">230</span><span class="p">,</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="mi">51</span><span class="p">,</span><span class="w"> </span><span class="mi">190</span><span class="p">,</span><span class="w"> </span><span class="mi">165</span><span class="p">,</span><span class="w"> </span><span class="mi">37</span><span class="p">,</span><span class="w"> </span><span class="mi">104</span><span class="p">,</span><span class="w"> </span><span class="mi">71</span><span class="p">,</span><span class="w"> </span><span class="mi">92</span><span class="p">,</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="mi">197</span><span class="p">,</span><span class="w"> </span><span class="mi">183</span><span class="p">,</span><span class="w"> </span><span class="mi">165</span><span class="p">,</span><span class="w"> </span><span class="mi">232</span><span class="p">,</span><span class="w"> </span><span class="mi">107</span><span class="p">,</span><span class="w"> </span><span class="mi">159</span><span class="p">,</span><span class="w"> </span><span class="mi">95</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">116</span><span class="p">,</span><span class="w"> </span><span class="mi">39</span><span class="p">,</span><span class="w"> </span><span class="mi">65</span><span class="p">,</span><span class="w"> </span><span class="mi">146</span><span class="p">,</span><span class="w"> </span><span class="mi">102</span><span class="p">,</span><span class="w"> </span><span class="mi">93</span><span class="p">,</span><span class="w"> </span><span class="mi">131</span><span class="p">,</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w"> </span><span class="mi">124</span><span class="p">,</span><span class="w"> </span><span class="mi">76</span><span class="p">,</span><span class="w"> </span><span class="mi">233</span><span class="p">,</span><span class="w"> </span><span class="mi">162</span><span class="p">,</span><span class="w"> </span><span class="mi">76</span><span class="p">,</span><span class="w"> </span><span class="mi">124</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">]);</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">public</span> <span class="pre">key</span></code> from the above screenshot can be converted in a similar fashion.</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="n">public_key</span>:<span class="nc">PublicKeyEd25519</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;8728D5F139ABEF87188BBF18B9A75B4E27DF81BD6BC9CC1B7582A09D74BC3C88&quot;</span><span class="p">.</span><span class="n">parse</span><span class="p">().</span><span class="n">unwrap</span><span class="p">();</span>
<span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Public key: {:?}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">public_key</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span>
</pre></div>
</div>
<p>Add the above code snippet to the top of a test case and run the test cases again to output the public key in bytes.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span>cargo<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--<span class="w"> </span>--nocapture
</pre></div>
</div>
<p>The output should look similar to:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span>public_key:<span class="w"> </span><span class="o">[</span><span class="m">135</span>,<span class="w"> </span><span class="m">40</span>,<span class="w"> </span><span class="m">213</span>,<span class="w"> </span><span class="m">241</span>,<span class="w"> </span><span class="m">57</span>,<span class="w"> </span><span class="m">171</span>,<span class="w"> </span><span class="m">239</span>,<span class="w"> </span><span class="m">135</span>,<span class="w"> </span><span class="m">24</span>,<span class="w"> </span><span class="m">139</span>,<span class="w"> </span><span class="m">191</span>,<span class="w"> </span><span class="m">24</span>,<span class="w"> </span><span class="m">185</span>,<span class="w"> </span><span class="m">167</span>,<span class="w"> </span><span class="m">91</span>,<span class="w"> </span><span class="m">78</span>,<span class="w"> </span><span class="m">39</span>,<span class="w"> </span><span class="m">223</span>,<span class="w"> </span><span class="m">129</span>,<span class="w"> </span><span class="m">189</span>,<span class="w"> </span><span class="m">107</span>,<span class="w"> </span><span class="m">201</span>,<span class="w"> </span><span class="m">204</span>,<span class="w"> </span><span class="m">27</span>,<span class="w"> </span><span class="m">117</span>,<span class="w"> </span><span class="m">130</span>,<span class="w"> </span><span class="m">160</span>,<span class="w"> </span><span class="m">157</span>,<span class="w"> </span><span class="m">116</span>,<span class="w"> </span><span class="m">188</span>,<span class="w"> </span><span class="m">60</span>,<span class="w"> </span><span class="m">136</span><span class="o">]</span>
</pre></div>
</div>
<p>You can create the below public key constant. This public key can be used in test cases to check if your signature verification logic in the smart contract works.</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="k">const</span><span class="w"> </span><span class="n">PUBLIC_KEY</span>: <span class="nc">PublicKeyEd25519</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PublicKeyEd25519</span><span class="p">([</span><span class="mi">135</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">213</span><span class="p">,</span><span class="w"> </span><span class="mi">241</span><span class="p">,</span><span class="w"> </span><span class="mi">57</span><span class="p">,</span><span class="w"> </span><span class="mi">171</span><span class="p">,</span><span class="w"> </span><span class="mi">239</span><span class="p">,</span><span class="w"> </span><span class="mi">135</span><span class="p">,</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span><span class="w"> </span><span class="mi">139</span><span class="p">,</span><span class="w"> </span><span class="mi">191</span><span class="p">,</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span><span class="w"> </span><span class="mi">185</span><span class="p">,</span><span class="w"> </span><span class="mi">167</span><span class="p">,</span><span class="w"> </span><span class="mi">91</span><span class="p">,</span><span class="w"> </span><span class="mi">78</span><span class="p">,</span><span class="w"> </span><span class="mi">39</span><span class="p">,</span><span class="w"> </span><span class="mi">223</span><span class="p">,</span><span class="w"> </span><span class="mi">129</span><span class="p">,</span><span class="w"> </span><span class="mi">189</span><span class="p">,</span><span class="w"> </span><span class="mi">107</span><span class="p">,</span><span class="w"> </span><span class="mi">201</span><span class="p">,</span><span class="w"> </span><span class="mi">204</span><span class="p">,</span><span class="w"> </span><span class="mi">27</span><span class="p">,</span><span class="w"> </span><span class="mi">117</span><span class="p">,</span><span class="w"> </span><span class="mi">130</span><span class="p">,</span><span class="w"> </span><span class="mi">160</span><span class="p">,</span><span class="w"> </span><span class="mi">157</span><span class="p">,</span><span class="w"> </span><span class="mi">116</span><span class="p">,</span><span class="w"> </span><span class="mi">188</span><span class="p">,</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w"> </span><span class="mi">136</span><span class="p">]);</span>
</pre></div>
</div>
</section>
</section>


                </article>
              
              
              
                <footer class="bd-footer-article">
                  <div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><style>
  legend {
    font-size: 12px;
    font-weight:bold ;
  }

  label {
    font-size: 12px;
  }
</style>

<fieldset>
  <legend>Was this article helpful?</legend>
  <input type="radio" id="Yes" name="rating" value="Yes" onclick="_paq.push(['trackEvent', 'Rating', 'ClickYes', 'Yes']);">
  <label for="Yes">Yes</label>
  <input type="radio" id="No" name="rating" value="No" onclick="_paq.push(['trackEvent', 'Rating', 'ClickNo', 'No']);">
  <label for="No">No</label>
</fieldset>

<!-- Matomo Tag Manager -->
<script>
  var _mtm = window._mtm = window._mtm || [];
  _mtm.push({'mtm.startTime': (new Date().getTime()), 'event': 'mtm.Start'});
  (function() {
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src='https://cdn.matomo.cloud/concordium.matomo.cloud/container_8ZIoCz8b.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Matomo Tag Manager --></div>
  
</div>
                </footer>
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">A Sponsored Transactions dApp</p>
      </div>
    </a>
    <a class="right-next"
       href="sponsoredTransactionsFrontendAndBackend.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Sponsored Transactions Frontend and Backend</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#permit-function"><code class="docutils literal notranslate"><span class="pre">permit</span></code> function</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#supportspermit-function"><code class="docutils literal notranslate"><span class="pre">supportsPermit</span></code> function</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#nonces-registry"><code class="docutils literal notranslate"><span class="pre">Nonces</span></code> registry</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#testing-the-signature-verification">Testing the signature verification</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  
  <div class="tocsection editthispage">
    <a href="https://github.com/Concordium/concordium.github.io/edit/main/source/mainnet/tutorials/sponsoredTransactions/sponsoredTransactionsSmartContract.rst">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on GitHub
        
      
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  

  <p class="copyright">
    
      © Copyright 2021 - 2024, Concordium Software ApS.
      <br/>
    
  </p>

  <style>
    .cc {
      position: relative;
      bottom: 0%;
      left: 0%;
    }

    .cc a {
      display: inline-block;
      text-align: left;
      padding-left: 16px;
      padding-bottom: 8px;
      color: black;
      font-size: 8px;
    }
</style>

<div class="cc">
  <a text-decoration=none href="http://creativecommons.org/licenses/by-sa/4.0/">
    <img src="../../_static/cc-sa-by.png" />
  </a>
  <a text-decoration=none href="../../net/guides/legal.html" >
    Legal information
  </a>
</div>
  <div id="cookie-consent" class="consent">
    <p>This website only aggregates and analyzes the actions you take here if you allow cookies. If you do not allow cookies, it protects your privacy, but also prevents the owner from learning from your actions and creating a better experience for you and other users.</p><p>Note that if you opt in and you clear your cookies, delete the opt-in cookie, or if you change computers or Web browsers, you will need to perform the opt-in procedure again.</p>
    <button onclick="consentGranted()">Allow</button>
    <button onclick="consentDenied()">Decline</button>
    <a href="https://concordium.com/privacy-policy/">Privacy policy</a>
</div>

<!-- Matomo -->
<script>
  var _paq = window._paq = window._paq || [];

// Save the choice in a cookie
function storeChoice(granted) {
  document.cookie = "cookie-consent=" + granted
}

// Look for a cookie storing the previous choice of the user.
// Returns undefined if no choice was stored, otherwise a boolean for whether the
// user gave consent.
function loadChoice() {
  if (!document.cookie.includes("cookie-consent=")) {
      return undefined;
  }
  return document.cookie.includes("cookie-consent=true")
}

// Removes the cookie consent banner
function removeCookieConsentBanner() {
  document.getElementById("cookie-consent").remove()
}

// Called by the cookie consent banner if granted permission
function consentGranted() {
  storeChoice(true)
  _paq.push(['setCookieConsentGiven']);
  removeCookieConsentBanner()
}

// Called by the cookie consent banner if denied permission
function consentDenied() {
  storeChoice(true)
  removeCookieConsentBanner()
}

const stored = loadChoice();
if (stored) {
 consentGranted()
}

_paq.push(['requireCookieConsent']);
/* tracker methods like "setCustomDimension" should be called before "trackPageView" */
_paq.push(['trackPageView']);
_paq.push(['enableLinkTracking']);

(function() {
    var u="https://concordium.matomo.cloud/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '2']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src='//cdn.matomo.cloud/concordium.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
  })();

  // remember tracking consent was given for all subsequent page views and visits
_paq.push(['rememberCookieConsentGiven']);

</script>


<!-- Start of HubSpot Embed Code -->
<script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/4771748.js"></script>
<!-- End of HubSpot Embed Code -->

  </body>
</html>