


<!DOCTYPE html>


<html lang="en" data-content_root="../../" data-theme="light">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Build and deploy the smart contract &#8212; Concordium  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=fd3f3429" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=a5c4661c" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=5aabfdf0" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/tippy.css?v=6175c28d" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=716d1818"></script>
    <script src="../../_static/design-tabs.js?v=36754332"></script>
    <script defer="defer" src="https://unpkg.com/@popperjs/core@2"></script>
    <script defer="defer" src="https://unpkg.com/tippy.js@6"></script>
    <script defer="defer" src="../../_static/tippy/tutorials/nft-marketplace/smart-contract.b595df50-35b9-4bcf-b124-724f03b04d06.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'tutorials/nft-marketplace/smart-contract';</script>
    <link rel="icon" href="../../_static/concordium-logo-no-text.svg"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="An eSealing dApp" href="../eSealing/index.html" />
    <link rel="prev" title="NFT marketplace smart contract tutorial" href="index.html" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,400;0,700;1,400;1,700&family=IBM+Plex+Sans:ital,wght@0,400;0,700;1,400;1,700&display=swap" />

  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="light">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item"><style>
.navbar-brand img {
    max-height: 200px;
    width: auto;
}
</style>

<div>
    <a href="https://developer.concordium.software/">
        <img class="logo" src="../../_static/concordium-logo-dark.svg" />
    </a>
</div></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../docs/index.html">
                        Docs
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../index.html">
                        Tutorials
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../tools/index.html">
                        Tools
                      </a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://github.com/Concordium" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fab fa-github-square fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="mailto:support@concordium.software" title="Support" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Support</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://developer.concordium.software/en/mainnet/net/guides/developer-page.html#block-explorers" title="Monitor" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fas fa-chart-line fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Monitor</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://support.concordium.software/latest" title="Discourse" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fab fa-discourse fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Discourse</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://www.youtube.com/channel/UCPZc2CuB2jGbZjD_5zX7-1A" title="YouTube" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fab fa-youtube fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">YouTube</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://medium.com/concordium" title="Medium" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fab fa-medium fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Medium</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://academy.concordium.software/ccd-academy/getting-started" title="Academy" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fas fa-graduation-cap fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Academy</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../docs/index.html">
                        Docs
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../index.html">
                        Tutorials
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../tools/index.html">
                        Tools
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://github.com/Concordium" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fab fa-github-square fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="mailto:support@concordium.software" title="Support" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Support</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://developer.concordium.software/en/mainnet/net/guides/developer-page.html#block-explorers" title="Monitor" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fas fa-chart-line fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Monitor</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://support.concordium.software/latest" title="Discourse" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fab fa-discourse fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Discourse</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://www.youtube.com/channel/UCPZc2CuB2jGbZjD_5zX7-1A" title="YouTube" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fab fa-youtube fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">YouTube</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://medium.com/concordium" title="Medium" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fab fa-medium fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Medium</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://academy.concordium.software/ccd-academy/getting-started" title="Academy" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fas fa-graduation-cap fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">Academy</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../smart-contracts-tutorials.html"> Smart contract tutorials</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../setup-env.html">Setup the development environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../counter/counter-contract.html">Counter</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../piggy-bank/index.html">PiggyBank</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../piggy-bank/writing.html">Writing the piggy bank smart contract</a></li>
<li class="toctree-l3"><a class="reference internal" href="../piggy-bank/testing.html">Testing the piggy bank smart contract</a></li>
<li class="toctree-l3"><a class="reference internal" href="../piggy-bank/deploying.html">Deploying the piggy bank smart contract</a></li>
<li class="toctree-l3"><a class="reference internal" href="../piggy-bank/frontend.html">Setting up a frontend</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../wCCD/index.html">wCCD</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../wCCD/wCCD-introduction.html">Understanding the wCCD token protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../wCCD/wCCD-interacting.html">Interacting with the wCCD token protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../wCCD/wCCD-frontend-set-up.html">Setting up the frontend</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../voting/index.html">The Voting dApp</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../voting/voting-sc.html">Writing a voting smart contract</a></li>
<li class="toctree-l3"><a class="reference internal" href="../voting/voting-dapp.html">Setting up the frontend</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../nft-minting/index.html">Mint an NFT</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../nft-minting/upload-nft.html">Upload the NFT</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nft-minting/build-smart-contract.html">Initialize, build, and deploy the smart contract</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nft-minting/mint-xfer.html">Mint and transfer the NFT</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../sft-minting/index.html">Mint a semi-fungible token</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../sft-minting/setup.html">Setup the development environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sft-minting/build-smart-contract.html">Smart contract modifications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sft-minting/mint-xfer.html">Mint and transfer semi-fungible token</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../fungible-tokens/index.html">Mint fungible tokens</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../fungible-tokens/smart-contract.html">Smart contract implementation for fungible tokens</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fungible-tokens/mint-xfer.html">Mint, transfer, and burn fungible tokens</a></li>
</ul>
</li>
<li class="toctree-l2 current active has-children"><a class="reference internal" href="index.html">NFT marketplace smart contract tutorial</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l3 current active"><a class="current reference internal" href="#">Build and deploy the smart contract</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../eSealing/index.html">eSealing</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../eSealing/eSealing_dapp.html">Exploring the eSealing dapp</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../sponsoredTransactions/index.html">Sponsored Transactions</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../sponsoredTransactions/sponsoredTransactionsSmartContract.html">Exploring the sponsored Transactions Smart Contract</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sponsoredTransactions/sponsoredTransactionsFrontendAndBackend.html">Exploring the sponsored Transactions dApp</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../smartContractUpgrade/index.html">Smart Contract Upgrade</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-11"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../smartContractUpgrade/smartContractUpgrade.html">Native upgradability</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../daap-examples/dapp-examples.html"> dApp examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../company-identity/company-identities.html"> How to create a company identity</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">





<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">Tutorials</a></li>
    
    
    <li class="breadcrumb-item"><i class="fa-solid fa-ellipsis"></i></li>
    
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">NFT marketplace smart contract tutorial</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Build and...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="build-and-deploy-the-smart-contract">
<span id="nft-mp-sc"></span><h1>Build and deploy the smart contract<a class="headerlink" href="#build-and-deploy-the-smart-contract" title="Link to this heading">#</a></h1>
<p>The flow will be the same as in the previous tutorials. You will build the contract, deploy it, and then create an instance of it. While selling your NFTs, there will be some additional steps.</p>
<p>Now, you have the smart contract and helpers in your project’s folder. In that folder, create another one called <code class="docutils literal notranslate"><span class="pre">dist/marketplace-contract</span></code> for your output files. Then run the command below to build the contract WASM module. Note that we embed the schema in the contract by using the <code class="docutils literal notranslate"><span class="pre">--schema-embed</span></code> option.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cargo concordium build --out dist/marketplace-contract/module.wasm.v1 --schema-embed</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../../_images/build-sc1.png"><img alt="../../_images/build-sc1.png" src="../../_images/build-sc1.png" style="width: 75%;" />
</a>
<p>Deploy the compiled WASM module with the following command.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">concordium-client module deploy dist/marketplace-contract/module.wasm.v1 --sender &lt;YOUR-ACCOUNT-ADDRESS&gt; --name &lt;YOUR-CONTRACT-NAME&gt; --grpc-port 20001</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../../_images/deploy-sc1.png"><img alt="../../_images/deploy-sc1.png" src="../../_images/deploy-sc1.png" style="width: 75%;" />
</a>
<section id="initialize-the-marketplace-smart-contract">
<h2>Initialize the marketplace smart contract<a class="headerlink" href="#initialize-the-marketplace-smart-contract" title="Link to this heading">#</a></h2>
<p>Create an instance of the marketplace contract with the command below. Look at the <code class="docutils literal notranslate"><span class="pre">init</span></code> function. As you can see in the code below, it expects an <code class="docutils literal notranslate"><span class="pre">InitParam</span></code> input which will be used to set the commission value in the <code class="docutils literal notranslate"><span class="pre">State::new()</span></code> function while initializing your marketplace state.</p>
<div class="highlight-Rust notranslate"><div class="highlight"><pre><span></span><span class="sd">/// Initializes a new Marketplace Contract</span>
<span class="sd">///</span>
<span class="sd">/// This function can be called by using InitParams.</span>
<span class="sd">/// The commission should be less than the maximum allowed value of 10000 basis points</span>
<span class="cp">#[init(contract = </span><span class="s">&quot;Market-NFT&quot;</span><span class="cp">, parameter = </span><span class="s">&quot;InitParams&quot;</span><span class="cp">)]</span>
<span class="k">fn</span> <span class="nf">init</span><span class="p">(</span>
<span class="w">    </span><span class="n">ctx</span>: <span class="kp">&amp;</span><span class="nc">InitContext</span><span class="p">,</span>
<span class="w">    </span><span class="n">state_builder</span>: <span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="n">StateBuilder</span><span class="p">,</span>
<span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">InitResult</span><span class="o">&lt;</span><span class="n">State</span><span class="o">&lt;</span><span class="n">ContractTokenId</span><span class="p">,</span><span class="w"> </span><span class="n">ContractTokenAmount</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">params</span>: <span class="nc">InitParams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ctx</span>
<span class="w">        </span><span class="p">.</span><span class="n">parameter_cursor</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="n">get</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="n">map_err</span><span class="p">(</span><span class="o">|</span><span class="n">_e</span><span class="o">|</span><span class="w"> </span><span class="n">MarketplaceError</span>::<span class="n">ParseParams</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">params</span><span class="p">.</span><span class="n">commission</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">MAX_BASIS_POINTS</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">InitResult</span>::<span class="nb">Err</span><span class="p">(</span><span class="n">Reject</span>::<span class="n">from</span><span class="p">(</span><span class="n">MarketplaceError</span>::<span class="n">InvalidCommission</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nb">Ok</span><span class="p">(</span><span class="n">State</span>::<span class="n">new</span><span class="p">(</span><span class="n">state_builder</span><span class="p">,</span><span class="w"> </span><span class="n">params</span><span class="p">.</span><span class="n">commission</span><span class="p">))</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Run the following command to initialize the contract.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">concordium-client contract init market --contract Market-NFT --parameter-json ../sample-artifacts/marketplace/init.json --sender &lt;YOUR-ADDRESS&gt; --energy 3000 --grpc-port 20001</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../../_images/init-sc.png"><img alt="../../_images/init-sc.png" src="../../_images/init-sc.png" style="width: 75%;" />
</a>
</section>
<section id="updateoperator-and-add-token">
<h2>UpdateOperator and add token<a class="headerlink" href="#updateoperator-and-add-token" title="Link to this heading">#</a></h2>
<p>Now you are going to sell your NFT. In order to do that, you need to give the marketplace permission to transfer the token to a particular address. You do this with <code class="docutils literal notranslate"><span class="pre">updateOperator()</span></code> function in CIS-2, which is a standard function. What you need to be careful about is that you need to call your token contract with its schema. Then you should be able to do an <code class="docutils literal notranslate"><span class="pre">add()</span></code> operation. Go to the sample artifacts and <code class="docutils literal notranslate"><span class="pre">update-operator.json</span></code> to change the marketplace address. You are allowing the marketplace contract to act on your behalf. If you want to test the logic behind it, skip this and try to call <code class="docutils literal notranslate"><span class="pre">add()</span></code> directly from the contract. It won’t work because your token’s state is not updated yet. As you can see below, the <code class="docutils literal notranslate"><span class="pre">UpdateOperator()</span></code> function updates the state of the token.</p>
<div class="highlight-Rust notranslate"><div class="highlight"><pre><span></span><span class="sd">/// Logs an `UpdateOperator` event.</span>
<span class="sd">///</span>
<span class="sd">/// It rejects if:</span>
<span class="sd">/// - It fails to parse the parameter.</span>
<span class="sd">/// - Fails to log event.</span>
<span class="cp">#[receive(</span>
<span class="cp">    contract = </span><span class="s">&quot;cis-2&quot;</span><span class="cp">,</span>
<span class="cp">    name = </span><span class="s">&quot;updateOperator&quot;</span><span class="cp">,</span>
<span class="cp">    parameter = </span><span class="s">&quot;UpdateOperatorParams&quot;</span><span class="cp">,</span>
<span class="cp">    error = </span><span class="s">&quot;ContractError&quot;</span><span class="cp">,</span>
<span class="cp">    enable_logger,</span>
<span class="cp">    mutable</span>
<span class="cp">)]</span>
<span class="k">fn</span> <span class="nf">contract_update_operator</span><span class="p">(</span>
<span class="w">    </span><span class="n">ctx</span>: <span class="kp">&amp;</span><span class="nc">ReceiveContext</span><span class="p">,</span>
<span class="w">    </span><span class="n">host</span>: <span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="n">Host</span><span class="o">&lt;</span><span class="n">State</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">    </span><span class="n">logger</span>: <span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="n">Logger</span><span class="p">,</span>
<span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">ContractResult</span><span class="o">&lt;</span><span class="p">()</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Parse the parameter.</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">UpdateOperatorParams</span><span class="p">(</span><span class="n">params</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ctx</span><span class="p">.</span><span class="n">parameter_cursor</span><span class="p">().</span><span class="n">get</span><span class="p">()</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// Get the sender who invoked this contract function.</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">sender</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ctx</span><span class="p">.</span><span class="n">sender</span><span class="p">();</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">builder</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">host</span><span class="p">.</span><span class="n">state_and_builder</span><span class="p">();</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">param</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">params</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Update the operator in the state.</span>
<span class="w">        </span><span class="k">match</span><span class="w"> </span><span class="n">param</span><span class="p">.</span><span class="n">update</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">OperatorUpdate</span>::<span class="n">Add</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">state</span><span class="p">.</span><span class="n">add_operator</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sender</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">param</span><span class="p">.</span><span class="n">operator</span><span class="p">,</span><span class="w"> </span><span class="n">builder</span><span class="p">),</span>
<span class="w">            </span><span class="n">OperatorUpdate</span>::<span class="n">Remove</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">state</span><span class="p">.</span><span class="n">remove_operator</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sender</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">param</span><span class="p">.</span><span class="n">operator</span><span class="p">),</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// Log the appropriate event</span>
<span class="w">        </span><span class="n">logger</span><span class="p">.</span><span class="n">log</span><span class="p">(</span>
<span class="w">            </span><span class="o">&amp;</span><span class="n">Cis2Event</span>::<span class="o">&lt;</span><span class="n">ContractTokenId</span><span class="p">,</span><span class="w"> </span><span class="n">ContractTokenAmount</span><span class="o">&gt;</span>::<span class="n">UpdateOperator</span><span class="p">(</span>
<span class="w">                </span><span class="n">UpdateOperatorEvent</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">owner</span>: <span class="nc">sender</span><span class="p">,</span>
<span class="w">                    </span><span class="n">operator</span>: <span class="nc">param</span><span class="p">.</span><span class="n">operator</span><span class="p">,</span>
<span class="w">                    </span><span class="n">update</span>: <span class="nc">param</span><span class="p">.</span><span class="n">update</span><span class="p">,</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">            </span><span class="p">),</span>
<span class="w">        </span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nb">Ok</span><span class="p">(())</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now run the command below.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">concordium-client contract update &lt;YOUR-TOKEN-INDEX&gt; --entrypoint updateOperator --parameter-json ../sample-artifacts/marketplace/update-operator.json --sender &lt;YOUR-ADDRESS&gt; --energy 6000 --grpc-port 20001</span>
</pre></div>
</div>
<p>If successful, you will see something similar to below.</p>
<a class="reference internal image-reference" href="../../_images/update-operator.png"><img alt="../../_images/update-operator.png" src="../../_images/update-operator.png" style="width: 75%;" />
</a>
<p>Before calling the add function, update your <code class="docutils literal notranslate"><span class="pre">sample-artifacts/marketplace/add.json</span></code> file with the <em>index</em>, <em>tokenID</em>, <em>price</em>, <em>royalty</em> and <em>amount</em>. Now call the <code class="docutils literal notranslate"><span class="pre">add</span></code> function with the command below.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">concordium-client contract update &lt;YOUR-MARKETPLACE-CONTRACT-INDEX&gt; --entrypoint add --parameter-json ../sample-artifacts/marketplace/add.json --sender &lt;YOUR-ADDRESS&gt; --energy 10000 --grpc-port 20001</span>
</pre></div>
</div>
<p>Now you have successfully added your token to marketplace.</p>
<a class="reference internal image-reference" href="../../_images/token-added.png"><img alt="../../_images/token-added.png" src="../../_images/token-added.png" style="width: 75%;" />
</a>
<p>To check if the token is in the marketplace, call the <code class="docutils literal notranslate"><span class="pre">list()</span></code> function with the command below.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">concordium-client contract invoke &lt;YOUR-MARKETPLACE-INDEX&gt; --entrypoint list --grpc-port 20001</span>
</pre></div>
</div>
<p>In the image below you can see that the token is listed.</p>
<a class="reference internal image-reference" href="../../_images/token-listed.png"><img alt="../../_images/token-listed.png" src="../../_images/token-listed.png" style="width: 75%;" />
</a>
</section>
<section id="transfer-the-token">
<h2>Transfer the token<a class="headerlink" href="#transfer-the-token" title="Link to this heading">#</a></h2>
<p>Now you are ready to sell it from the marketplace. If you look what it does you see that it takes the <code class="docutils literal notranslate"><span class="pre">token_info</span></code> from input, gets the token’s <code class="docutils literal notranslate"><span class="pre">quantity</span></code>, <code class="docutils literal notranslate"><span class="pre">price</span></code>, and <code class="docutils literal notranslate"><span class="pre">royalty</span></code> values from its state. With 2 <code class="docutils literal notranslate"><span class="pre">ensure!()</span></code> it checks first whether the quantity that user wants to buy is sufficient or not and the amount is enough to buy them. Then through <code class="docutils literal notranslate"><span class="pre">Cis2Client::transfer()</span></code> it completes the token’s transfer operation, handles the payment with royalties, and removes token from the list.</p>
<div class="highlight-Rust notranslate"><div class="highlight"><pre><span></span><span class="sd">/// Allows for transferring the token specified by TransferParams.</span>
<span class="sd">///</span>
<span class="sd">/// This function is the typical buy function of a Marketplace where one account can transfer an Asset by paying a price.</span>
<span class="sd">/// The transfer will fail of the Amount paid is &lt; token_quantity * token_price</span>
<span class="cp">#[receive(</span>
<span class="cp">    contract = </span><span class="s">&quot;Market-NFT&quot;</span><span class="cp">,</span>
<span class="cp">    name = </span><span class="s">&quot;transfer&quot;</span><span class="cp">,</span>
<span class="cp">    parameter = </span><span class="s">&quot;TransferParams&quot;</span><span class="cp">,</span>
<span class="cp">    mutable,</span>
<span class="cp">    payable</span>
<span class="cp">)]</span>
<span class="k">fn</span> <span class="nf">transfer</span><span class="p">(</span>
<span class="w">    </span><span class="n">ctx</span>: <span class="kp">&amp;</span><span class="nc">ReceiveContext</span><span class="p">,</span>
<span class="w">    </span><span class="n">host</span>: <span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="n">Host</span><span class="o">&lt;</span><span class="n">ContractState</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">    </span><span class="n">amount</span>: <span class="nc">Amount</span><span class="p">,</span>
<span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">ContractResult</span><span class="o">&lt;</span><span class="p">()</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">params</span>: <span class="nc">TransferParams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ctx</span>
<span class="w">        </span><span class="p">.</span><span class="n">parameter_cursor</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="n">get</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="n">map_err</span><span class="p">(</span><span class="o">|</span><span class="n">_e</span><span class="o">|</span><span class="w"> </span><span class="n">MarketplaceError</span>::<span class="n">ParseParams</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">token_info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">TokenInfo</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">id</span>: <span class="nc">params</span><span class="p">.</span><span class="n">token_id</span><span class="p">,</span>
<span class="w">        </span><span class="n">address</span>: <span class="nc">params</span><span class="p">.</span><span class="n">nft_contract_address</span><span class="p">,</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">listed_token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">host</span>
<span class="w">        </span><span class="p">.</span><span class="n">state</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="n">get_listed</span><span class="p">(</span><span class="n">token_info</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">params</span><span class="p">.</span><span class="n">owner</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="n">ok_or</span><span class="p">(</span><span class="n">MarketplaceError</span>::<span class="n">TokenNotListed</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">listed_quantity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">listed_token</span><span class="p">.</span><span class="mf">1.</span><span class="n">quantity</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">price_per_unit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">listed_token</span><span class="p">.</span><span class="mf">1.</span><span class="n">price</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">token_royalty_state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">listed_token</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span>

<span class="w">    </span><span class="n">ensure</span><span class="o">!</span><span class="p">(</span>
<span class="w">        </span><span class="n">listed_quantity</span><span class="p">.</span><span class="n">cmp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">params</span><span class="p">.</span><span class="n">quantity</span><span class="p">).</span><span class="n">is_ge</span><span class="p">(),</span>
<span class="w">        </span><span class="n">MarketplaceError</span>::<span class="n">InvalidTokenQuantity</span>
<span class="w">    </span><span class="p">);</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">price_per_unit</span><span class="p">.</span><span class="n">mul</span><span class="p">(</span><span class="n">params</span><span class="p">.</span><span class="n">quantity</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="n">ensure</span><span class="o">!</span><span class="p">(</span>
<span class="w">        </span><span class="n">amount</span><span class="p">.</span><span class="n">cmp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">price</span><span class="p">).</span><span class="n">is_ge</span><span class="p">(),</span>
<span class="w">        </span><span class="n">MarketplaceError</span>::<span class="n">InvalidAmountPaid</span>
<span class="w">    </span><span class="p">);</span>

<span class="w">    </span><span class="n">Cis2Client</span>::<span class="n">transfer</span><span class="p">(</span>
<span class="w">        </span><span class="n">host</span><span class="p">,</span>
<span class="w">        </span><span class="n">params</span><span class="p">.</span><span class="n">token_id</span><span class="p">,</span>
<span class="w">        </span><span class="n">params</span><span class="p">.</span><span class="n">nft_contract_address</span><span class="p">,</span>
<span class="w">        </span><span class="n">params</span><span class="p">.</span><span class="n">quantity</span><span class="p">,</span>
<span class="w">        </span><span class="n">params</span><span class="p">.</span><span class="n">owner</span><span class="p">,</span>
<span class="w">        </span><span class="n">concordium_cis2</span>::<span class="n">Receiver</span>::<span class="n">Account</span><span class="p">(</span><span class="n">params</span><span class="p">.</span><span class="n">to</span><span class="p">),</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="n">map_err</span><span class="p">(</span><span class="n">MarketplaceError</span>::<span class="n">Cis2ClientError</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>

<span class="w">    </span><span class="n">distribute_amounts</span><span class="p">(</span>
<span class="w">        </span><span class="n">host</span><span class="p">,</span>
<span class="w">        </span><span class="n">amount</span><span class="p">,</span>
<span class="w">        </span><span class="o">&amp;</span><span class="n">params</span><span class="p">.</span><span class="n">owner</span><span class="p">,</span>
<span class="w">        </span><span class="o">&amp;</span><span class="n">token_royalty_state</span><span class="p">,</span>
<span class="w">        </span><span class="o">&amp;</span><span class="n">ctx</span><span class="p">.</span><span class="n">owner</span><span class="p">(),</span>
<span class="w">    </span><span class="p">)</span><span class="o">?</span><span class="p">;</span>

<span class="w">    </span><span class="n">host</span><span class="p">.</span><span class="n">state_mut</span><span class="p">().</span><span class="n">decrease_listed_quantity</span><span class="p">(</span>
<span class="w">        </span><span class="o">&amp;</span><span class="n">TokenOwnerInfo</span>::<span class="n">from</span><span class="p">(</span><span class="n">token_info</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">params</span><span class="p">.</span><span class="n">owner</span><span class="p">),</span>
<span class="w">        </span><span class="n">params</span><span class="p">.</span><span class="n">quantity</span><span class="p">,</span>
<span class="w">    </span><span class="p">);</span>
<span class="w">    </span><span class="n">ContractResult</span>::<span class="nb">Ok</span><span class="p">(())</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Run the command below to invoke the <code class="docutils literal notranslate"><span class="pre">transfer()</span></code> function.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">concordium-client contract update &lt;YOUR-MARKETPLACE-CONTRACT&gt; --entrypoint transfer --parameter-json ../sample-artifacts/marketplace/transfer.json --sender &lt;YOUR-ADDRESS&gt; --energy 6000 --amount &lt;PRICE&gt; --grpc-port 20001</span>
</pre></div>
</div>
<p>Below you can see a successful transfer.</p>
<a class="reference internal image-reference" href="../../_images/transfer-success.png"><img alt="../../_images/transfer-success.png" src="../../_images/transfer-success.png" style="width: 75%;" />
</a>
<p>Finally check the marketplace state once more with the <code class="docutils literal notranslate"><span class="pre">list()</span></code> function.</p>
<a class="reference internal image-reference" href="../../_images/mp-no-tokens.png"><img alt="../../_images/mp-no-tokens.png" src="../../_images/mp-no-tokens.png" style="width: 75%;" />
</a>
<p>And cross check with the token contract’s latest state with its <code class="docutils literal notranslate"><span class="pre">view()</span></code> function command below.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">concordium-client  contract invoke &lt;TOKEN-CONTRACT-INDEX&gt; --entrypoint view --grpc-port 20001</span>
</pre></div>
</div>
<p>As you can see, the first account has no balance anymore with the given token ID but the second one has.</p>
<a class="reference internal image-reference" href="../../_images/token-contract-view.png"><img alt="../../_images/token-contract-view.png" src="../../_images/token-contract-view.png" style="width: 75%;" />
</a>
</section>
</section>


                </article>
              
              
              
                <footer class="bd-footer-article">
                  <div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><style>
  legend {
    font-size: 12px;
    font-weight:bold ;
  }

  label {
    font-size: 12px;
  }
</style>

<fieldset>
  <legend>Was this article helpful?</legend>
  <input type="radio" id="Yes" name="rating" value="Yes" onclick="_paq.push(['trackEvent', 'Rating', 'ClickYes', 'Yes']);">
  <label for="Yes">Yes</label>
  <input type="radio" id="No" name="rating" value="No" onclick="_paq.push(['trackEvent', 'Rating', 'ClickNo', 'No']);">
  <label for="No">No</label>
</fieldset>

<!-- Matomo Tag Manager -->
<script>
  var _mtm = window._mtm = window._mtm || [];
  _mtm.push({'mtm.startTime': (new Date().getTime()), 'event': 'mtm.Start'});
  (function() {
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src='https://cdn.matomo.cloud/concordium.matomo.cloud/container_8ZIoCz8b.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Matomo Tag Manager --></div>
  
</div>
                </footer>
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">NFT marketplace smart contract tutorial</p>
      </div>
    </a>
    <a class="right-next"
       href="../eSealing/index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">An eSealing dApp</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#initialize-the-marketplace-smart-contract">Initialize the marketplace smart contract</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#updateoperator-and-add-token">UpdateOperator and add token</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#transfer-the-token">Transfer the token</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  
  <div class="tocsection editthispage">
    <a href="https://github.com/Concordium/concordium.github.io/edit/main/source/mainnet/tutorials/nft-marketplace/smart-contract.rst">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on GitHub
        
      
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  

  <p class="copyright">
    
      © Copyright 2021 - 2024, Concordium Software ApS.
      <br/>
    
  </p>

  <style>
    .cc {
      position: relative;
      bottom: 0%;
      left: 0%;
    }

    .cc a {
      display: inline-block;
      text-align: left;
      padding-left: 16px;
      padding-bottom: 8px;
      color: black;
      font-size: 8px;
    }
</style>

<div class="cc">
  <a text-decoration=none href="http://creativecommons.org/licenses/by-sa/4.0/">
    <img src="../../_static/cc-sa-by.png" />
  </a>
  <a text-decoration=none href="../../net/guides/legal.html" >
    Legal information
  </a>
</div>
  <div id="cookie-consent" class="consent">
    <p>This website only aggregates and analyzes the actions you take here if you allow cookies. If you do not allow cookies, it protects your privacy, but also prevents the owner from learning from your actions and creating a better experience for you and other users.</p><p>Note that if you opt in and you clear your cookies, delete the opt-in cookie, or if you change computers or Web browsers, you will need to perform the opt-in procedure again.</p>
    <button onclick="consentGranted()">Allow</button>
    <button onclick="consentDenied()">Decline</button>
    <a href="https://concordium.com/privacy-policy/">Privacy policy</a>
</div>

<!-- Matomo -->
<script>
  var _paq = window._paq = window._paq || [];

// Save the choice in a cookie
function storeChoice(granted) {
  document.cookie = "cookie-consent=" + granted
}

// Look for a cookie storing the previous choice of the user.
// Returns undefined if no choice was stored, otherwise a boolean for whether the
// user gave consent.
function loadChoice() {
  if (!document.cookie.includes("cookie-consent=")) {
      return undefined;
  }
  return document.cookie.includes("cookie-consent=true")
}

// Removes the cookie consent banner
function removeCookieConsentBanner() {
  document.getElementById("cookie-consent").remove()
}

// Called by the cookie consent banner if granted permission
function consentGranted() {
  storeChoice(true)
  _paq.push(['setCookieConsentGiven']);
  removeCookieConsentBanner()
}

// Called by the cookie consent banner if denied permission
function consentDenied() {
  storeChoice(true)
  removeCookieConsentBanner()
}

const stored = loadChoice();
if (stored) {
 consentGranted()
}

_paq.push(['requireCookieConsent']);
/* tracker methods like "setCustomDimension" should be called before "trackPageView" */
_paq.push(['trackPageView']);
_paq.push(['enableLinkTracking']);

(function() {
    var u="https://concordium.matomo.cloud/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '2']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src='//cdn.matomo.cloud/concordium.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
  })();

  // remember tracking consent was given for all subsequent page views and visits
_paq.push(['rememberCookieConsentGiven']);

</script>


<!-- Start of HubSpot Embed Code -->
<script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/4771748.js"></script>
<!-- End of HubSpot Embed Code -->

  </body>
</html>