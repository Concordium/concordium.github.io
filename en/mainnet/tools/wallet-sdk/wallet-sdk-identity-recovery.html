


<!DOCTYPE html>


<html lang="en" data-content_root="../../" data-theme="auto">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Recover an identity &#8212; Concordium  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "auto";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "auto";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=a5c4661c" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=19c83c19" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/tippy.css?v=124524c4" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=716d1818"></script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script defer="defer" src="https://unpkg.com/@popperjs/core@2"></script>
    <script defer="defer" src="https://unpkg.com/tippy.js@6"></script>
    <script defer="defer" src="../../_static/tippy/tools/wallet-sdk/wallet-sdk-identity-recovery.5c1ce275-b4f2-4076-be52-17c25b684a19.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'tools/wallet-sdk/wallet-sdk-identity-recovery';</script>
    <link rel="canonical" href="https://docs.concordium.com/en/mainnet/tools/wallet-sdk/wallet-sdk-identity-recovery.html" />
    <link rel="icon" href="../../_static/concordium-logo-no-text.svg"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Create an account" href="wallet-sdk-credential-deployment.html" />
    <link rel="prev" title="Create an identity" href="wallet-sdk-identity-creation.html" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,400;0,700;1,400;1,700&family=IBM+Plex+Sans:ital,wght@0,400;0,700;1,400;1,700&display=swap" />

  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="auto">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>
<aside class="bd-header-announcement" aria-label="Announcement">
  <div class="bd-header-announcement__content">Protocol 8 is now live on mainnet. For more information, visit our <a href="https://docs.concordium.com/en/mainnet/docs/release-notes/release-notes-lp.html#mainnet" target="_blank">release notes page</a>.</div>
</aside>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item"><style>
.navbar-brand img {
    max-height: 200px;
    width: auto;
}
</style>

<div>
    <a href="https://developer.concordium.software/">
        <img class="logo light-logo" src="../../_static/concordium-logo-dark.svg" />
        <img class="logo dark-logo" src="../../_static/concordium-logo.svg" />
    </a>
</div></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../docs/index.html">
    Docs
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../tutorials/index.html">
    Tutorials
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    Tools
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../community/index.html">
    Community
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://github.com/Concordium" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-github-square fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="mailto:support@concordium.software" title="Support" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Support</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://developer.concordium.software/en/mainnet/net/guides/developer-page.html#block-explorers" title="Monitor" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fas fa-chart-line fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Monitor</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://support.concordium.software/latest" title="Discourse" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-discourse fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Discourse</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://discord.com/invite/GpKGE2hCFx" title="Discord" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-discord fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Discord</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://www.youtube.com/channel/UCPZc2CuB2jGbZjD_5zX7-1A" title="YouTube" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-youtube fa-lg" aria-hidden="true"></i>
            <span class="sr-only">YouTube</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://medium.com/@concordium" title="Medium" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-medium fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Medium</span></a>
        </li>
</ul></div>
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../docs/index.html">
    Docs
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../tutorials/index.html">
    Tutorials
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    Tools
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../community/index.html">
    Community
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://github.com/Concordium" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-github-square fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="mailto:support@concordium.software" title="Support" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Support</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://developer.concordium.software/en/mainnet/net/guides/developer-page.html#block-explorers" title="Monitor" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fas fa-chart-line fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Monitor</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://support.concordium.software/latest" title="Discourse" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-discourse fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Discourse</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://discord.com/invite/GpKGE2hCFx" title="Discord" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-discord fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Discord</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://www.youtube.com/channel/UCPZc2CuB2jGbZjD_5zX7-1A" title="YouTube" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-youtube fa-lg" aria-hidden="true"></i>
            <span class="sr-only">YouTube</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://medium.com/@concordium" title="Medium" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fab fa-medium fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Medium</span></a>
        </li>
</ul></div>
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../developer-page.html"> Developer resources</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../sdks-apis.html">SDKs and APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../grpc2.html">gRPC V2 documentation</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="wallet-sdk.html"> Wallet SDK</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="wallet-sdk-identity-creation.html">Create an identity</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Recover an identity</a></li>
<li class="toctree-l2"><a class="reference internal" href="wallet-sdk-credential-deployment.html">Create an account</a></li>
<li class="toctree-l2"><a class="reference internal" href="wallet-sdk-account-transaction.html">Submit a transaction to a Concordium node</a></li>
<li class="toctree-l2"><a class="reference internal" href="wallet-sdk-identity-provider.html">Get the list of identity providers</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ccd-scan/ccd-scan.html"> CCDScan</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../ccd-scan/ccd-scan-blocks.html">CCDScan Blocks overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ccd-scan/ccd-scan-transactions.html">CCDScan Transactions overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ccd-scan/ccd-scan-accounts.html">CCDScan Accounts overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ccd-scan/ccd-scan-staking.html">CCDScan Staking overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ccd-scan/ccd-scan-nodes.html">CCDScan Nodes overview</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../concordium-client.html"> Concordium Client</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../transactions.html">Concordium Client transactions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../query-node.html">Querying a node</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multi-sig.html">Multi-sig</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../developer-tools.html"> Auxiliary Tools</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none"></div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="recover-an-identity">
<span id="wallet-sdk-identity-recovery"></span><h1>Recover an identity<a class="headerlink" href="#recover-an-identity" title="Link to this heading">#</a></h1>
<p>The following sections demonstrate the process of creating a request to recover an identity from an identity provider. While accounts are stored on the Concordium blockchain, identities are stored by the selected identity provider during the creation process, and recovery is initiated by sending a request to that specific identity provider.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#generate-an-identity-recovery-request">Generate an identity recovery request</a></p></li>
<li><p><a class="reference internal" href="#send-an-identity-recovery-request">Send an identity recovery request</a></p></li>
</ul>
<section id="generate-an-identity-recovery-request">
<h2>Generate an identity recovery request<a class="headerlink" href="#generate-an-identity-recovery-request" title="Link to this heading">#</a></h2>
<p>The following example demonstrates the process of generating an identity recovery request. Part of the input to the request is a secret value derived from the seed phrase, and this value should be kept secret in a similar manner as the seed phrase and account signing keys.</p>
<p>In the example below, functionality for retrieving the list of identity providers is present. To see an example of how to implement this function, see <a class="reference internal" href="wallet-sdk-identity-provider.html#identity-provider-list"><span class="std std-ref">Get list of identity providers and their metadata</span></a>.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" for="sd-tab-item-0">
TypeScript (Web)</label><div class="sd-tab-content docutils">
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">ConcordiumGRPCWebClient</span><span class="p">,</span>
<span class="w">    </span><span class="nx">ConcordiumHdWallet</span><span class="p">,</span>
<span class="w">    </span><span class="nx">createIdentityRecoveryRequestWithKeys</span><span class="p">,</span>
<span class="w">    </span><span class="nx">IdentityProvider</span><span class="p">,</span>
<span class="w">    </span><span class="nx">IdentityRecoveryRequestWithKeysInput</span><span class="p">,</span>
<span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@concordium/web-sdk&#39;</span><span class="p">;</span>

<span class="c1">// The identity provider to attempt to recover an identity from. Here we simply select the first available, but</span>
<span class="c1">// in a recovery process a wallet would usually loop through all possible options.</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">identityProvider</span><span class="o">:</span><span class="w"> </span><span class="nx">IdentityProvider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">getIdentityProviders</span><span class="p">(</span><span class="nx">walletProxyTestnetBaseUrl</span><span class="p">)[</span><span class="mf">0</span><span class="p">];</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">seedPhrase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;fence tongue sell large master side flock bronze ice accident what humble bring heart swear record valley party jar caution horn cushion endorse position&#39;</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">network</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Testnet&#39;</span><span class="p">;</span><span class="w"> </span><span class="c1">// Or Mainnet, if working on mainnet.</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">wallet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">ConcordiumHdWallet</span><span class="p">.</span><span class="nx">fromSeedPhrase</span><span class="p">(</span><span class="nx">seedPhrase</span><span class="p">,</span><span class="w"> </span><span class="nx">network</span><span class="p">);</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">idCredSec</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">wallet</span><span class="p">.</span><span class="nx">getIdCredSec</span><span class="p">(</span><span class="nx">identityProvider</span><span class="p">.</span><span class="nx">ipInfo</span><span class="p">.</span><span class="nx">ipIdentity</span><span class="p">,</span><span class="w"> </span><span class="nx">identityIndex</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="s1">&#39;hex&#39;</span><span class="p">);</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">ConcordiumGRPCWebClient</span><span class="p">(</span><span class="nx">nodeAddress</span><span class="p">,</span><span class="w"> </span><span class="nx">nodePort</span><span class="p">);</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">cryptographicParameters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">getCryptographicParameters</span><span class="p">();</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">recoveryRequestInput</span><span class="o">:</span><span class="w"> </span><span class="nx">IdentityRecoveryRequestWithKeysInput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">idCredSec</span><span class="p">,</span>
<span class="w">    </span><span class="nx">ipInfo</span><span class="o">:</span><span class="w"> </span><span class="nx">identityProvider</span><span class="p">.</span><span class="nx">ipInfo</span><span class="p">,</span>
<span class="w">    </span><span class="nx">globalContext</span><span class="o">:</span><span class="w"> </span><span class="nx">cryptographicParameters</span><span class="p">,</span>
<span class="w">    </span><span class="nx">timestamp</span><span class="o">:</span><span class="w"> </span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">1000</span><span class="p">),</span>
<span class="p">};</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">recoveryRequest</span><span class="o">:</span><span class="w"> </span><span class="nx">IdRecoveryRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">createIdentityRecoveryRequestWithKeys</span><span class="p">(</span><span class="nx">recoveryRequestInput</span><span class="p">);</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" for="sd-tab-item-1">
Kotlin (Android)</label><div class="sd-tab-content docutils">
<div class="highlight-Kotlin notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="nn">cash.z.ecc.android.bip39.Mnemonics</span>
<span class="k">import</span><span class="w"> </span><span class="nn">com.concordium.sdk.ClientV2</span>
<span class="k">import</span><span class="w"> </span><span class="nn">com.concordium.sdk.Connection</span>
<span class="k">import</span><span class="w"> </span><span class="nn">com.concordium.sdk.TLSConfig</span>
<span class="k">import</span><span class="w"> </span><span class="nn">com.concordium.sdk.crypto.wallet.ConcordiumHdWallet</span>
<span class="k">import</span><span class="w"> </span><span class="nn">com.concordium.sdk.crypto.wallet.Identity</span>
<span class="k">import</span><span class="w"> </span><span class="nn">com.concordium.sdk.crypto.wallet.IdentityRecoveryRequestInput</span>
<span class="k">import</span><span class="w"> </span><span class="nn">com.concordium.sdk.crypto.wallet.Network</span>
<span class="k">import</span><span class="w"> </span><span class="nn">com.concordium.sdk.requests.BlockQuery</span>

<span class="kd">fun</span><span class="w"> </span><span class="nf">createRecoveryRequest</span><span class="p">():</span><span class="w"> </span><span class="kt">String</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// The identity provider to attempt to recover an identity from. Here we simply select the first available, but</span>
<span class="w">    </span><span class="c1">// in a recovery process a wallet would usually loop through all possible options.</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">identityProvider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getIdentityProviders</span><span class="p">(</span><span class="n">walletProxyTestnetBaseUrl</span><span class="p">)</span><span class="o">[</span><span class="m">0</span><span class="o">]</span>

<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">seedPhrase</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;fence tongue sell large master side flock bronze ice accident what humble bring heart swear record valley party jar caution horn cushion endorse position&quot;</span>
<span class="w">    </span><span class="nd">@OptIn</span><span class="p">(</span><span class="n">ExperimentalStdlibApi</span><span class="o">::</span><span class="n">class</span><span class="p">)</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">seedAsHex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Mnemonics</span><span class="p">.</span><span class="na">MnemonicCode</span><span class="p">(</span><span class="n">seedPhrase</span><span class="o">!!</span><span class="p">.</span><span class="na">toCharArray</span><span class="p">()).</span><span class="na">toSeed</span><span class="p">().</span><span class="na">toHexString</span><span class="p">()</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">wallet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ConcordiumHdWallet</span><span class="p">.</span><span class="na">fromHex</span><span class="p">(</span><span class="n">seedAsHex</span><span class="p">,</span><span class="w"> </span><span class="n">Network</span><span class="p">.</span><span class="na">TESTNET</span><span class="p">)</span>

<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">idCredSec</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wallet</span><span class="p">.</span><span class="na">getIdCredSec</span><span class="p">(</span><span class="n">identityProvider</span><span class="p">.</span><span class="na">ipInfo</span><span class="p">.</span><span class="na">ipIdentity</span><span class="p">.</span><span class="na">value</span><span class="p">,</span><span class="w"> </span><span class="n">identityIndex</span><span class="p">)</span>

<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">connection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Connection</span><span class="p">.</span><span class="na">newBuilder</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="na">host</span><span class="p">(</span><span class="n">nodeAddress</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="na">port</span><span class="p">(</span><span class="n">nodePort</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="na">useTLS</span><span class="p">(</span><span class="n">TLSConfig</span><span class="p">.</span><span class="na">auto</span><span class="p">())</span>
<span class="w">        </span><span class="p">.</span><span class="na">build</span><span class="p">()</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ClientV2</span><span class="p">.</span><span class="na">from</span><span class="p">(</span><span class="n">connection</span><span class="p">)</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">cryptographicParameters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="na">getCryptographicParameters</span><span class="p">(</span><span class="n">BlockQuery</span><span class="p">.</span><span class="na">BEST</span><span class="p">)</span>

<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">IdentityRecoveryRequestInput</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="na">globalContext</span><span class="p">(</span><span class="n">cryptographicParameters</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="na">ipInfo</span><span class="p">(</span><span class="n">identityProvider</span><span class="p">.</span><span class="na">ipInfo</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="na">idCredSec</span><span class="p">(</span><span class="n">idCredSec</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="na">timestamp</span><span class="p">(</span><span class="n">java</span><span class="p">.</span><span class="na">time</span><span class="p">.</span><span class="na">Instant</span><span class="p">.</span><span class="na">now</span><span class="p">().</span><span class="na">epochSecond</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="na">build</span><span class="p">()</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Identity</span><span class="p">.</span><span class="na">createIdentityRecoveryRequest</span><span class="p">(</span><span class="n">input</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-2" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" for="sd-tab-item-2">
Swift (macOS, iOS)</label><div class="sd-tab-content docutils">
<div class="highlight-Swift notranslate"><div class="highlight"><pre><span></span><span class="kd">import</span><span class="w"> </span><span class="nc">Concordium</span>
<span class="kd">import</span><span class="w"> </span><span class="nc">MnemonicSwift</span><span class="w"> </span><span class="c1">// external package for converting seed phrase to bytes</span>
<span class="nc">import</span><span class="w"> </span><span class="nc">GRPC</span><span class="w"> </span><span class="c1">// external dependency for gRPC client</span>

<span class="kd">let</span><span class="w"> </span><span class="nv">grpcChannel</span><span class="p">:</span><span class="w"> </span><span class="n">GRPCChannel</span><span class="w"> </span><span class="c1">// see docs for package GRPC or examples in SDK repo</span>
<span class="kd">let</span><span class="w"> </span><span class="nv">client</span><span class="p">:</span><span class="w"> </span><span class="n">NodeClient</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">GRPCNodeClient</span><span class="p">(</span><span class="n">channel</span><span class="p">:</span><span class="w"> </span><span class="n">grpcChannel</span><span class="p">)</span>

<span class="c1">/// Fetch all identity providers.</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">func</span><span class="w"> </span><span class="nf">identityProviders</span><span class="p">(</span><span class="kc">_</span><span class="w"> </span><span class="n">walletProxy</span><span class="p">:</span><span class="w"> </span><span class="n">WalletProxy</span><span class="p">)</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="kr">throws</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="p">[</span><span class="n">IdentityProvider</span><span class="p">]</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nv">res</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">try</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="n">walletProxy</span><span class="p">.</span><span class="n">getIdentityProviders</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">session</span><span class="p">:</span><span class="w"> </span><span class="n">URLSession</span><span class="p">.</span><span class="n">shared</span><span class="p">)</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">res</span><span class="p">.</span><span class="bp">map</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">$0</span><span class="p">.</span><span class="n">toSDKType</span><span class="p">()</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">/// Fetch an identity provider with a specific ID.</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">func</span><span class="w"> </span><span class="nf">findIdentityProvider</span><span class="p">(</span><span class="kc">_</span><span class="w"> </span><span class="n">walletProxy</span><span class="p">:</span><span class="w"> </span><span class="n">WalletProxy</span><span class="p">,</span><span class="w"> </span><span class="kc">_</span><span class="w"> </span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="n">IdentityProviderID</span><span class="p">)</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="kr">throws</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="n">IdentityProvider</span><span class="p">?</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nv">res</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">try</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="n">identityProviders</span><span class="p">(</span><span class="n">walletProxy</span><span class="p">)</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">res</span><span class="p">.</span><span class="bp">first</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">$0</span><span class="p">.</span><span class="n">info</span><span class="p">.</span><span class="n">identity</span><span class="w"> </span><span class="p">==</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Inputs.</span>
<span class="kd">let</span><span class="w"> </span><span class="nv">seedPhrase</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;fence tongue sell large master side flock bronze ice accident what humble bring heart swear record valley party jar caution horn cushion endorse position&quot;</span>
<span class="kd">let</span><span class="w"> </span><span class="nv">network</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">Network</span><span class="p">.</span><span class="n">testnet</span>
<span class="kd">let</span><span class="w"> </span><span class="nv">identityProviderID</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">IdentityProviderID</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="kd">let</span><span class="w"> </span><span class="nv">identityIndex</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">IdentityIndex</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="kd">let</span><span class="w"> </span><span class="nv">walletProxyBaseURL</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">URL</span><span class="p">(</span><span class="n">string</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://wallet-proxy.testnet.concordium.com&quot;</span><span class="p">)</span><span class="o">!</span>
<span class="kd">let</span><span class="w"> </span><span class="nv">identityDisclosureThreshold</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">RevocationThreshold</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="c1">// Configure seed and Wallet Proxy instance.</span>
<span class="kd">let</span><span class="w"> </span><span class="nv">seedHex</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">try</span><span class="w"> </span><span class="n">Mnemonic</span><span class="p">.</span><span class="n">deterministicSeedString</span><span class="p">(</span><span class="n">from</span><span class="p">:</span><span class="w"> </span><span class="n">seedPhrase</span><span class="p">)</span>
<span class="kd">let</span><span class="w"> </span><span class="nv">seed</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">WalletSeed</span><span class="p">(</span><span class="n">seedHex</span><span class="p">:</span><span class="w"> </span><span class="n">seedHex</span><span class="p">,</span><span class="w"> </span><span class="n">network</span><span class="p">:</span><span class="w"> </span><span class="n">network</span><span class="p">)</span>
<span class="kd">let</span><span class="w"> </span><span class="nv">walletProxy</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">WalletProxy</span><span class="p">(</span><span class="n">baseURL</span><span class="p">:</span><span class="w"> </span><span class="n">walletProxyBaseURL</span><span class="p">)</span>
<span class="kd">let</span><span class="w"> </span><span class="nv">identityProvider</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">try</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="n">findIdentityProvider</span><span class="p">(</span><span class="n">walletProxy</span><span class="p">,</span><span class="w"> </span><span class="n">identityProviderID</span><span class="p">)</span><span class="o">!</span>

<span class="c1">// Construct recovery request.</span>
<span class="kd">let</span><span class="w"> </span><span class="nv">cryptoParams</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">try</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">cryptographicParameters</span><span class="p">(</span><span class="n">block</span><span class="p">:</span><span class="w"> </span><span class="p">.</span><span class="n">lastFinal</span><span class="p">)</span>

<span class="kd">let</span><span class="w"> </span><span class="nv">identityRequestBuilder</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">SeedBasedIdentityRequestBuilder</span><span class="p">(</span>
<span class="w">    </span><span class="n">seed</span><span class="p">:</span><span class="w"> </span><span class="n">seed</span><span class="p">,</span>
<span class="w">    </span><span class="n">cryptoParams</span><span class="p">:</span><span class="w"> </span><span class="n">cryptoParams</span>
<span class="p">)</span>
<span class="kd">let</span><span class="w"> </span><span class="nv">reqJSON</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">try</span><span class="w"> </span><span class="n">identityRequestBuilder</span><span class="p">.</span><span class="n">recoveryRequestJSON</span><span class="p">(</span>
<span class="w">    </span><span class="n">provider</span><span class="p">:</span><span class="w"> </span><span class="n">identityProvider</span><span class="p">.</span><span class="n">info</span><span class="p">,</span>
<span class="w">    </span><span class="n">index</span><span class="p">:</span><span class="w"> </span><span class="n">identityIndex</span><span class="p">,</span>
<span class="w">    </span><span class="n">time</span><span class="p">:</span><span class="w"> </span><span class="n">Date</span><span class="p">.</span><span class="n">now</span>
<span class="p">)</span>

<span class="kd">func</span><span class="w"> </span><span class="nf">makeIdentityRecoveryRequest</span><span class="p">(</span>
<span class="w">    </span><span class="kc">_</span><span class="w"> </span><span class="n">seed</span><span class="p">:</span><span class="w"> </span><span class="n">WalletSeed</span><span class="p">,</span>
<span class="w">    </span><span class="kc">_</span><span class="w"> </span><span class="n">cryptoParams</span><span class="p">:</span><span class="w"> </span><span class="n">CryptographicParameters</span><span class="p">,</span>
<span class="w">    </span><span class="kc">_</span><span class="w"> </span><span class="n">identityProvider</span><span class="p">:</span><span class="w"> </span><span class="n">IdentityProvider</span><span class="p">,</span>
<span class="w">    </span><span class="kc">_</span><span class="w"> </span><span class="n">identityIndex</span><span class="p">:</span><span class="w"> </span><span class="n">IdentityIndex</span>
<span class="p">)</span><span class="w"> </span><span class="kr">throws</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="n">IdentityRecoverRequest</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nv">identityRequestBuilder</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">SeedBasedIdentityRequestBuilder</span><span class="p">(</span>
<span class="w">        </span><span class="n">seed</span><span class="p">:</span><span class="w"> </span><span class="n">seed</span><span class="p">,</span>
<span class="w">        </span><span class="n">cryptoParams</span><span class="p">:</span><span class="w"> </span><span class="n">cryptoParams</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nv">reqJSON</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">try</span><span class="w"> </span><span class="n">identityRequestBuilder</span><span class="p">.</span><span class="n">recoveryRequestJSON</span><span class="p">(</span>
<span class="w">        </span><span class="n">provider</span><span class="p">:</span><span class="w"> </span><span class="n">identityProvider</span><span class="p">.</span><span class="n">info</span><span class="p">,</span>
<span class="w">        </span><span class="n">index</span><span class="p">:</span><span class="w"> </span><span class="n">identityIndex</span><span class="p">,</span>
<span class="w">        </span><span class="n">time</span><span class="p">:</span><span class="w"> </span><span class="n">Date</span><span class="p">.</span><span class="n">now</span>
<span class="w">    </span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="send-an-identity-recovery-request">
<h2>Send an identity recovery request<a class="headerlink" href="#send-an-identity-recovery-request" title="Link to this heading">#</a></h2>
<p>The next step is to send the generated identity recovery request to the associated identity provider. If successful, the identity provider will return a redirect to the location from which the identity can be fetched.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-3" name="sd-tab-set-1" type="radio">
<label class="sd-tab-label" for="sd-tab-item-3">
TypeScript (Web)</label><div class="sd-tab-content docutils">
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">IdentityObjectV1</span><span class="p">,</span>
<span class="w">    </span><span class="nx">IdRecoveryRequest</span><span class="p">,</span>
<span class="w">    </span><span class="nx">Versioned</span>
<span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;@concordium/web-sdk&#39;</span><span class="p">;</span>

<span class="c1">// This identity provider must be identical to the one used to generate the identity</span>
<span class="c1">// recovery request, otherwise the request will fail.</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">identityProvider</span><span class="o">:</span><span class="w"> </span><span class="nx">IdentityProviderWithMetadata</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...;</span>

<span class="c1">// See how to generate in the previous section.</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">recoveryRequest</span><span class="o">:</span><span class="w"> </span><span class="nx">IdRecoveryRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">searchParams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">URLSearchParams</span><span class="p">({</span>
<span class="w">    </span><span class="nx">state</span><span class="o">:</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span><span class="w"> </span><span class="nx">idRecoveryRequest</span><span class="o">:</span><span class="w"> </span><span class="nx">recoveryRequest</span><span class="w"> </span><span class="p">}),</span>
<span class="p">});</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`</span><span class="si">${</span><span class="nx">identityProvider</span><span class="p">.</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">recoveryStart</span><span class="si">}</span><span class="sb">?</span><span class="si">${</span><span class="nx">searchParams</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">response</span><span class="p">.</span><span class="nx">ok</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="p">((</span><span class="k">await</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">()).</span><span class="nx">message</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">identityResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">fetch</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">identityResponse</span><span class="p">.</span><span class="nx">ok</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">versionedIdentity</span><span class="o">:</span><span class="w"> </span><span class="nx">Versioned</span><span class="o">&lt;</span><span class="nx">IdentityObjectV1</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>

<span class="w">    </span><span class="c1">// The identity object has been successfully recovered.</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">identity</span><span class="o">:</span><span class="w"> </span><span class="nx">IdentityObjectV1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">versionedIdentity</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-4" name="sd-tab-set-1" type="radio">
<label class="sd-tab-label" for="sd-tab-item-4">
Kotlin (Android)</label><div class="sd-tab-content docutils">
<div class="highlight-Kotlin notranslate"><div class="highlight"><pre><span></span><span class="k">import</span><span class="w"> </span><span class="nn">com.concordium.sdk.crypto.wallet.identityobject.IdentityObject</span>
<span class="k">import</span><span class="w"> </span><span class="nn">com.fasterxml.jackson.module.kotlin.jacksonObjectMapper</span>
<span class="k">import</span><span class="w"> </span><span class="nn">okhttp3.OkHttpClient</span>
<span class="k">import</span><span class="w"> </span><span class="nn">okhttp3.Request</span>

<span class="nd">@JsonAutoDetect</span>
<span class="kd">private</span><span class="w"> </span><span class="kd">data</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">VersionedIdentity</span><span class="p">(</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">v</span><span class="p">:</span><span class="w"> </span><span class="n">Number</span><span class="p">,</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">value</span><span class="p">:</span><span class="w"> </span><span class="n">IdentityObject</span>
<span class="p">)</span>

<span class="kd">fun</span><span class="w"> </span><span class="nf">recoverIdentity</span><span class="p">():</span><span class="w"> </span><span class="n">IdentityObject</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// This identity provider must be identical to the one used to generate the identity</span>
<span class="w">    </span><span class="c1">// recovery request, otherwise the request will fail.</span>
<span class="w">    </span><span class="n">const</span><span class="w"> </span><span class="n">identityProvider</span><span class="p">:</span><span class="w"> </span><span class="n">IdentityProvider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...</span>

<span class="w">    </span><span class="c1">// See how to generate in the previous section.</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">recoveryRequest</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...</span>

<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">baseUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">identityProvider</span><span class="p">.</span><span class="na">metadata</span><span class="p">.</span><span class="na">recoveryStart</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">recoveryUrl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Uri</span><span class="p">.</span><span class="na">parse</span><span class="p">(</span><span class="n">baseUrl</span><span class="o">!!</span><span class="p">).</span><span class="na">buildUpon</span><span class="p">().</span><span class="na">appendQueryParameter</span><span class="p">(</span><span class="s">&quot;state&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">recoveryRequest</span><span class="p">).</span><span class="na">build</span><span class="p">().</span><span class="na">toString</span><span class="p">()</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Request</span><span class="p">.</span><span class="na">Builder</span><span class="p">().</span><span class="na">url</span><span class="p">(</span><span class="n">recoveryUrl</span><span class="p">).</span><span class="na">build</span><span class="p">()</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">httpClient</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OkHttpClient</span><span class="p">().</span><span class="na">newBuilder</span><span class="p">().</span><span class="na">build</span><span class="p">()</span>

<span class="w">    </span><span class="n">httpClient</span><span class="p">.</span><span class="na">newCall</span><span class="p">(</span><span class="n">request</span><span class="p">).</span><span class="na">execute</span><span class="p">().</span><span class="na">use</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">        </span><span class="n">response</span><span class="p">.</span><span class="na">body</span><span class="p">()</span><span class="o">?.</span><span class="na">use</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">body</span><span class="w"> </span><span class="o">-&gt;</span>

<span class="w">            </span><span class="c1">// The identity object has been successfully recovered.</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">jacksonObjectMapper</span><span class="p">().</span><span class="na">readValue</span><span class="p">(</span>
<span class="w">                </span><span class="n">body</span><span class="p">.</span><span class="na">string</span><span class="p">(),</span>
<span class="w">                </span><span class="n">VersionedIdentity</span><span class="o">::</span><span class="n">class</span><span class="p">.</span><span class="na">java</span>
<span class="w">            </span><span class="p">).</span><span class="na">value</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="n">Exception</span><span class="p">(</span><span class="s">&quot;Failed to recover identity&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-5" name="sd-tab-set-1" type="radio">
<label class="sd-tab-label" for="sd-tab-item-5">
Swift (macOS, iOS)</label><div class="sd-tab-content docutils">
<div class="highlight-Swift notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="nv">reqJSON</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="c1">// computed in previous section</span>

<span class="c1">// Wrap recovery request into HTTP request and execute.</span>
<span class="kd">let</span><span class="w"> </span><span class="nv">urlBuilder</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">IdentityRequestURLBuilder</span><span class="p">(</span><span class="n">callbackURL</span><span class="p">:</span><span class="w"> </span><span class="kc">nil</span><span class="p">)</span><span class="w"> </span><span class="c1">// without &#39;callbackURL&#39; the builder only supports recovery</span>
<span class="kd">let</span><span class="w"> </span><span class="nv">identityReq</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">try</span><span class="w"> </span><span class="n">urlBuilder</span><span class="p">.</span><span class="n">recoveryRequest</span><span class="p">(</span>
<span class="w">    </span><span class="n">baseURL</span><span class="p">:</span><span class="w"> </span><span class="n">identityProvider</span><span class="p">.</span><span class="n">metadata</span><span class="p">.</span><span class="n">recoveryStart</span><span class="p">,</span>
<span class="w">    </span><span class="n">requestJSON</span><span class="p">:</span><span class="w"> </span><span class="n">reqJSON</span>
<span class="p">)</span>
<span class="kd">let</span><span class="w"> </span><span class="nv">identity</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">try</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="n">identityReq</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">session</span><span class="p">:</span><span class="w"> </span><span class="n">URLSession</span><span class="p">.</span><span class="n">shared</span><span class="p">)</span>
<span class="bp">print</span><span class="p">(</span><span class="s">&quot;Successfully recovered identity: </span><span class="si">\(</span><span class="n">identity</span><span class="si">)</span><span class="s">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>


                </article>
              
              
              
                <footer class="bd-footer-article">
                  <div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><style>
  legend {
    font-size: 12px;
    font-weight:bold ;
  }

  label {
    font-size: 12px;
  }
</style>

<fieldset>
  <legend>Was this article helpful?</legend>
  <input type="radio" id="Yes" name="rating" value="Yes" onclick="_paq.push(['trackEvent', 'Rating', 'ClickYes', 'Yes']);">
  <label for="Yes">Yes</label>
  <input type="radio" id="No" name="rating" value="No" onclick="_paq.push(['trackEvent', 'Rating', 'ClickNo', 'No']);">
  <label for="No">No</label>
</fieldset>

<!-- Matomo Tag Manager -->
<script>
  var _mtm = window._mtm = window._mtm || [];
  _mtm.push({'mtm.startTime': (new Date().getTime()), 'event': 'mtm.Start'});
  (function() {
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src='https://cdn.matomo.cloud/concordium.matomo.cloud/container_8ZIoCz8b.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Matomo Tag Manager --></div>
  
</div>
                </footer>
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="wallet-sdk-identity-creation.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Create an identity</p>
      </div>
    </a>
    <a class="right-next"
       href="wallet-sdk-credential-deployment.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Create an account</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#generate-an-identity-recovery-request">Generate an identity recovery request</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#send-an-identity-recovery-request">Send an identity recovery request</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  
  <div class="tocsection editthispage">
    <a href="https://github.com/Concordium/concordium.github.io/edit/main/source/mainnet/tools/wallet-sdk/wallet-sdk-identity-recovery.rst">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on GitHub
        
      
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  

  <p class="copyright">
    
       Copyright 2021 - 2025, Concordium Software ApS.
      <br/>
    
  </p>

  <style>
    .cc {
      position: relative;
      bottom: 0%;
      left: 0%;
    }

    .cc a {
      display: inline-block;
      text-align: left;
      padding-left: 16px;
      padding-bottom: 8px;
      color: black;
      font-size: 8px;
    }
</style>

<div class="cc">
  <a text-decoration=none href="http://creativecommons.org/licenses/by-sa/4.0/">
    <img src="../../_static/cc-sa-by.png" />
  </a>
  <a text-decoration=none href="../../net/guides/legal.html" >
    Legal information
  </a>
</div>
  <div id="cookie-consent" class="consent">
    <p>This website only aggregates and analyzes the actions you take here if you allow cookies. If you do not allow cookies, it protects your privacy, but also prevents the owner from learning from your actions and creating a better experience for you and other users.</p><p>Note that if you opt in and you clear your cookies, delete the opt-in cookie, or if you change computers or Web browsers, you will need to perform the opt-in procedure again.</p>
    <button onclick="consentGranted()">Allow</button>
    <button onclick="consentDenied()">Decline</button>
    <a href="https://concordium.com/privacy-policy/">Privacy policy</a>
</div>

<!-- Matomo -->
<script>
  var _paq = window._paq = window._paq || [];

// Save the choice in a cookie
function storeChoice(granted) {
  document.cookie = "cookie-consent=" + granted
}

// Look for a cookie storing the previous choice of the user.
// Returns undefined if no choice was stored, otherwise a boolean for whether the
// user gave consent.
function loadChoice() {
  if (!document.cookie.includes("cookie-consent=")) {
      return undefined;
  }
  return document.cookie.includes("cookie-consent=true")
}

// Removes the cookie consent banner
function removeCookieConsentBanner() {
  document.getElementById("cookie-consent").remove()
}

// Called by the cookie consent banner if granted permission
function consentGranted() {
  storeChoice(true)
  _paq.push(['setCookieConsentGiven']);
  removeCookieConsentBanner()
}

// Called by the cookie consent banner if denied permission
function consentDenied() {
  storeChoice(true)
  removeCookieConsentBanner()
}

const stored = loadChoice();
if (stored) {
 consentGranted()
}

_paq.push(['requireCookieConsent']);
/* tracker methods like "setCustomDimension" should be called before "trackPageView" */
_paq.push(['trackPageView']);
_paq.push(['enableLinkTracking']);

(function() {
    var u="https://concordium.matomo.cloud/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '2']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src='//cdn.matomo.cloud/concordium.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
  })();

  // remember tracking consent was given for all subsequent page views and visits
_paq.push(['rememberCookieConsentGiven']);

</script>


<!-- Start of HubSpot Embed Code -->
<script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/4771748.js"></script>
<!-- End of HubSpot Embed Code -->

  </body>
</html>