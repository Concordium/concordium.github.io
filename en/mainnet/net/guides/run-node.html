



<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Run a node with Docker &mdash; Concordium  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/concordium-logo-no-text.svg"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Overview of setting up the Desktop Wallet" href="overview-desktop.html" />
    <link rel="prev" title="Run a node on a server with Ubuntu" href="run-node-ubuntu.html" />
<link href="../../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: black" >
          


          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/concordium-logo.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
<nav class="sidebar-top-menu">
    <a href="../index.html" class="active" ><i class="icon fa fa-connectdevelop"></i> Mainnet</a>
    <a href="../../smart-contracts/index.html" class=""> <i class="icon fa fa-file-o"></i> Smart Contracts </a>
</nav>

        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation/downloads.html">Downloads</a></li>
</ul>
<p class="caption"><span class="caption-text">Guides</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="run-node-ubuntu.html">Run a node on a server with Ubuntu</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Run a node with Docker</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#before-you-begin">Before you begin</a></li>
<li class="toctree-l2"><a class="reference internal" href="#upgrade-from-open-testnet">Upgrade from Open Testnet</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-a-node">Running a node</a></li>
<li class="toctree-l2"><a class="reference internal" href="#seeing-your-node-on-the-dashboard">Seeing your node on the dashboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="#enabling-inbound-connections">Enabling inbound connections</a></li>
<li class="toctree-l2"><a class="reference internal" href="#stopping-the-node">Stopping the node</a></li>
<li class="toctree-l2"><a class="reference internal" href="#retrieve-node-logs">Retrieve node logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#support-feedback">Support &amp; Feedback</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="overview-desktop.html">Overview of setting up the Desktop Wallet</a></li>
<li class="toctree-l1"><a class="reference internal" href="multisig-transfer.html">Create a scheduled multi-signature GTU transfer in the Desktop Wallet</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview-baker-process.html">Overview of the baker process</a></li>
<li class="toctree-l1"><a class="reference internal" href="add-baker-desktop.html">Add a baker account in the Desktop Wallet</a></li>
<li class="toctree-l1"><a class="reference internal" href="become-baker.html">Become a baker using the Concordium Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="multi-credentials.html">Add credentials to an account</a></li>
</ul>
<p class="caption"><span class="caption-text">Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../concepts/id-accounts.html">Identities and accounts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/concepts-baker.html">Bakers</a></li>
</ul>
<p class="caption"><span class="caption-text">Concordium Mobile Wallet</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mobile-wallet/get-started.html">Get started with the Mobile Wallet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mobile-wallet/accounts-transactions.html">Get started with accounts and transactions in the Mobile Wallet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mobile-wallet/explore-more.html">Explore the <em>More</em> page in the Mobile Wallet</a></li>
</ul>
<p class="caption"><span class="caption-text">Concordium Desktop Wallet</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../desktop-wallet/install-ledger-app.html">Set up the Ledger Nano S and install the Concordium Ledger App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../desktop-wallet/get-started-desktop.html">Set up the Desktop Wallet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../desktop-wallet/create-identity-desktop.html">Create an identity and an initial account in the Desktop Wallet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../desktop-wallet/create-account-desktop.html">Create an account in the  Desktop Wallet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../desktop-wallet/accounts-desktop.html">Overview of accounts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../desktop-wallet/shield-gtu-desktop.html">Shield GTU on an account</a></li>
<li class="toctree-l1"><a class="reference internal" href="../desktop-wallet/export-import-desktop.html">Make a backup of identities, accounts, and addresses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../desktop-wallet/send-gtu-single-desktop.html">Create a single signer GTU transfer in the Desktop Wallet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../desktop-wallet/single-sign-schedule.html">Create a single signer GTU transfer with a schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../desktop-wallet/multisig-simple-transfer.html">Create a multi-signature GTU transfer in the Desktop Wallet</a></li>
</ul>
<p class="caption"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../references/concordium-client.html">Concordium Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/manage-accounts.html">Accounts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/transactions.html">Transactions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/query-node.html">Querying a node</a></li>
</ul>
<p class="caption"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../resources/glossary.html">Glossary of Concordium Terms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources/release-notes-mainnet.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources/third-party-licenses.html">Third Party Licenses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources/dw-licenses.html">Concordium Desktop Wallet Third Party Licenses</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Concordium</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Mainnet</a> &raquo;</li>
        
      <li>Run a node with Docker</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/Concordium/concordium.github.io/blob/mainnet/source/net/guides/run-node.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="run-a-node-with-docker">
<span id="run-a-node"></span><h1>Run a node with Docker<a class="headerlink" href="#run-a-node-with-docker" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#before-you-begin" id="id3">Before you begin</a></p></li>
<li><p><a class="reference internal" href="#upgrade-from-open-testnet" id="id4">Upgrade from Open Testnet</a></p></li>
<li><p><a class="reference internal" href="#running-a-node" id="id5">Running a node</a></p></li>
<li><p><a class="reference internal" href="#seeing-your-node-on-the-dashboard" id="id6">Seeing your node on the dashboard</a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id7">Network dashboard</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#enabling-inbound-connections" id="id8">Enabling inbound connections</a></p>
<ul>
<li><p><a class="reference internal" href="#configuring-ports-and-tokens" id="id9">Configuring ports and tokens</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#stopping-the-node" id="id10">Stopping the node</a></p></li>
<li><p><a class="reference internal" href="#retrieve-node-logs" id="id11">Retrieve node logs</a></p></li>
<li><p><a class="reference internal" href="#support-feedback" id="id12">Support &amp; Feedback</a></p></li>
</ul>
</div>
<p>In this guide, you learn how to run a node on your Linux computer that
participates in the Concordium network. This means that you receive
blocks and transactions from other nodes, as well as propagate
information about blocks and transactions to the nodes in the Concordium
network. After following this guide, you will be able to</p>
<ul class="simple">
<li><p>run a Concordium node</p></li>
<li><p>observe it on the network dashboard and</p></li>
<li><p>query the state of the Concordium blockchain directly from your
machine.</p></li>
</ul>
<p>You do not need an account to run a node.</p>
<div class="section" id="before-you-begin">
<h2>Before you begin<a class="headerlink" href="#before-you-begin" title="Permalink to this headline">¶</a></h2>
<p>Before running a Concordium node you will need to</p>
<ol class="arabic simple">
<li><p>Install and run Docker.</p>
<ul class="simple">
<li><p>On <em>Linux</em>, allow Docker to be run as a non-root user.</p></li>
</ul>
</li>
<li><p>Download and extract the <a class="reference internal" href="../installation/downloads.html#concordium-node-and-client-download"><span class="std std-ref">Concordium Client</span></a> software.</p></li>
</ol>
</div>
<div class="section" id="upgrade-from-open-testnet">
<h2>Upgrade from Open Testnet<a class="headerlink" href="#upgrade-from-open-testnet" title="Permalink to this headline">¶</a></h2>
<p>To upgrade to the current Concordium software for Mainnet:</p>
<ul>
<li><p>Follow the above steps to <a class="reference internal" href="../installation/downloads.html#downloads"><span class="std std-ref">download</span></a> the most recent Concordium
software.</p></li>
<li><p>Run the <code class="docutils literal notranslate"><span class="pre">concordium-node-reset-data</span></code> executable from the unzipped
archive.</p></li>
<li><p>The tool will ask:</p>
<blockquote>
<div><p><em>Do you also want to remove saved keys?</em></p>
</div></blockquote>
<p>Accounts that were created for an Open Testnet are not valid on
Mainnet. Therefore, if you have stored accounts from an Open
Testnet we recommend entering <strong>y</strong> which will delete all account
keys.</p>
</li>
</ul>
</div>
<div class="section" id="running-a-node">
<span id="id1"></span><h2>Running a node<a class="headerlink" href="#running-a-node" title="Permalink to this headline">¶</a></h2>
<p>To start running a client that will join the Mainnet follow these
steps:</p>
<ol class="arabic simple">
<li><p>Open the <code class="docutils literal notranslate"><span class="pre">concordium-node</span></code> executable from the unzipped archive.</p>
<ul class="simple">
<li><p>When <em>restarting</em> a node consider using the
<code class="docutils literal notranslate"><span class="pre">--no-block-state-import</span></code> option. This will download just the
updates to the Concordium blockchain that occurred while the node was
inactive and might speed up the boot process.</p></li>
</ul>
</li>
<li><p>Enter a name for your node. This name will be displayed in the public
dashboard.</p></li>
<li><p>If the tool has been started before you will be asked if you want to
delete the local node database before starting. Pressing <strong>y</strong> will
delete and subsequently recreate the information on the state of the
Concordium blockchain that was saved on your computer. <strong>Note that
deleting the local node database means it will take longer for your
node to catch-up with the Concordium network.</strong></p></li>
</ol>
<p>The tool will now download the Concordium Client image and load it into
Docker. The client will launch and start outputting logging information
about the operation of the node.</p>
</div>
<div class="section" id="seeing-your-node-on-the-dashboard">
<h2>Seeing your node on the dashboard<a class="headerlink" href="#seeing-your-node-on-the-dashboard" title="Permalink to this headline">¶</a></h2>
<p>After running <code class="docutils literal notranslate"><span class="pre">concordium-node</span></code> you can</p>
<ul class="simple">
<li><p>see your node on the <a class="reference external" href="https://dashboard.mainnet.concordium.software/">Network Dashboard</a></p></li>
<li><p><a class="reference internal" href="../references/query-node.html#testnet-query-node"><span class="std std-ref">query</span></a> information about blocks, transactions, and accounts</p></li>
</ul>
<div class="section" id="id2">
<h3>Network dashboard<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>It will take the client a while to catch up with the state of the
Concordium blockchain. This involves, for example, downloading
information about all the blocks in the chain.</p>
<p>Among other information, on the <a class="reference external" href="https://dashboard.mainnet.concordium.software/">Network Dashboard</a> you can
get an idea of how long it will take your node to catch up with the
chain. For that you can compare the node’s <strong>Length</strong> value (number of
blocks your node received) with the <strong>Total Length</strong> value (number of
blocks in the longest chain in the network) which is displayed at the
top of the dashboard.</p>
</div>
</div>
<div class="section" id="enabling-inbound-connections">
<h2>Enabling inbound connections<a class="headerlink" href="#enabling-inbound-connections" title="Permalink to this headline">¶</a></h2>
<p>If you are running your node behind a firewall, or behind your home
router, then you will probably only be able to connect to other nodes,
but other nodes will not be able to initiate connections to your node.
This is perfectly fine, and your node will fully participate in the
Concordium network. It will be able to send transactions and,
<a class="reference internal" href="become-baker.html#become-a-baker"><span class="std std-ref">if so configured</span></a>, to bake and finalize.</p>
<p>However you can also make your node an even better network participant
by enabling inbound connections. By default, <code class="docutils literal notranslate"><span class="pre">concordium-node</span></code> listens
on port <code class="docutils literal notranslate"><span class="pre">8888</span></code> for inbound connections. Depending on your network and
platform configuration you will either need to forward an external port
to <code class="docutils literal notranslate"><span class="pre">8888</span></code> on your router, open it in your firewall, or both. The
details of how this is done will depend on your configuration.</p>
<div class="section" id="configuring-ports-and-tokens">
<h3>Configuring ports and tokens<a class="headerlink" href="#configuring-ports-and-tokens" title="Permalink to this headline">¶</a></h3>
<p>The node listens on four ports, which can be configured by supplying the
appropriate command line arguments when starting the node. The ports
used by the node are as follows:</p>
<ul class="simple">
<li><p>8888, the port for peer-to-peer networking, which can be set with
<code class="docutils literal notranslate"><span class="pre">--listen-node-port</span></code></p></li>
<li><p>8082, the port used by middleware, which can be set with <code class="docutils literal notranslate"><span class="pre">--listen-middleware-port</span></code></p></li>
<li><p>8099, the port used by the node dashboard, which can be set with <code class="docutils literal notranslate"><span class="pre">--listen-dashboard-port</span></code></p></li>
<li><p>10000, the gRPC port, which can be set with <code class="docutils literal notranslate"><span class="pre">--listen-grpc-port</span></code></p></li>
</ul>
<p>An additional mapping is the gRPC token, which defaults to <code class="docutils literal notranslate"><span class="pre">rpcadmin</span></code>, and can
be set with <code class="docutils literal notranslate"><span class="pre">--rpc-server-token</span></code>.</p>
<p>When changing the mappings above the docker container must be
stopped (<a class="reference internal" href="#stop-a-node"><span class="std std-ref">Stopping the node</span></a>), reset, and started again. To reset the container either use
<code class="docutils literal notranslate"><span class="pre">concordium-node-reset-data</span></code> or run <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">rm</span> <span class="pre">concordium-client</span></code> in
a terminal.</p>
<p>We <em>strongly recommend</em> that your firewall should be configured to only
allow public connections on port 8888 (the peer-to-peer networking
port). Someone with access to the other ports may be able to take
control of your node or accounts you have saved on the node.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Docker makes changes to the <a class="reference external" href="https://en.wikipedia.org/wiki/Iptables">iptable</a> on Linux, which means that it is not
easy to block ports in practice.
This is especially a problem <a class="reference external" href="https://github.com/chaifeng/ufw-docker#problem">when using UFW</a>.
The gRPC port is currently not considered secure, and we, therefore,
<em>strongly recommend</em> changing the default gRPC token via the
<code class="docutils literal notranslate"><span class="pre">--rpc-server-token</span></code> flag when running a node.
This will provide reasonable security if the token is only ever used through
a secure channel.</p>
</div>
</div>
</div>
<div class="section" id="stopping-the-node">
<span id="stop-a-node"></span><h2>Stopping the node<a class="headerlink" href="#stopping-the-node" title="Permalink to this headline">¶</a></h2>
<p>To stop the node, press <strong>CTRL+c</strong>, and wait for the node to do a clean
shutdown.</p>
<p>If you accidentally close the window without explicitly shutting down
the client, it will keep running in the background in Docker. In that
case, use the <code class="docutils literal notranslate"><span class="pre">concordium-node-stop</span></code> binary in the same way you opened
the <code class="docutils literal notranslate"><span class="pre">concordium-node</span></code> executable.</p>
</div>
<div class="section" id="retrieve-node-logs">
<h2>Retrieve node logs<a class="headerlink" href="#retrieve-node-logs" title="Permalink to this headline">¶</a></h2>
<p>Logging information for your node can be retrieved using the
<code class="docutils literal notranslate"><span class="pre">concordium-node-retrieve-logs</span></code> tool. This will save logs from the
running image to a file. Additionally, if given permission, it will
retrieve information about the programs currently running on the system.</p>
</div>
<div class="section" id="support-feedback">
<h2>Support &amp; Feedback<a class="headerlink" href="#support-feedback" title="Permalink to this headline">¶</a></h2>
<p>If you have questions or feedback, join us on <a class="reference external" href="https://support.concordium.software/">Discourse</a>, or contact us at <a class="reference external" href="mailto:support&#37;&#52;&#48;concordium&#46;software">support<span>&#64;</span>concordium<span>&#46;</span>software</a>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
<a href="http://creativecommons.org/licenses/by-sa/4.0/">
    <img style="margin-bottom: 0.5em" src="../../_static/cc-sa-by.png" />
</a>

    <p>
        &#169; Copyright 2021, Concordium Software ApS.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: mainnet
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Versions</dt>
      <dd><a href="/en/testnet4/">testnet4</a></dd>
      <dd><a href="/en/mainnet/">mainnet</a></dd>
    </dl>
  </div>
</div>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>