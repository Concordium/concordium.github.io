


<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Run a node with Docker &#8212; Concordium  documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/design-tabs.js"></script>
    <link rel="shortcut icon" href="../../_static/concordium-logo-no-text.svg"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Troubleshoot a node on a server with Docker" href="../nodes/troubleshoot-docker.html" />
    <link rel="prev" title="Docker nodes" href="../nodes/docker.html" />
<link href="../../_static/style.css" rel="stylesheet" type="text/css">

  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../../index.html">
  <img src="../../_static/concordium-logo-dark.svg" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <!DOCTYPE html>
<html>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<style>
body {margin:0;}

.navbar-menu {
  position: fixed;
}

.navbar-menu a {
  display: inline;
  text-align: left;
  padding: 16px;
  color: black;
  font-size: 15px;
}
/* Large devices (laptops/desktops, 992px to 768px ) */
@media only screen and (max-width: 992px) {
  .navbar-menu {
    display: none;}

}
</style>
<body>

<div class="navbar-menu w3-hide-medium w3-hide-small">
  <a href="learn-about-concordium.html">Learn</a>
  <a href="../nodes/node-requirements.html">Run a node</a>
  <a href="deciding-wallet.html">Wallets</a>
  <a href="overview-baker-process.html">Baking</a>
  <a href="developer-page.html">Develop</a>
  <a href="../../smart-contracts/general/introduction.html">Smart Contracts</a>
</div>
</body>
</html>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/Concordium" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="mailto:support@concordium.software" rel="noopener" target="_blank" title="Support"><span><i class="fas fa-envelope"></i></span>
            <label class="sr-only">Support</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://support.concordium.software/latest" rel="noopener" target="_blank" title="Discourse"><img src="../../_static/discourse-brands.svg" class="icon-link-image" alt="Discourse"/></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="list-caption">
 <li class="toctree-l0 has-children">
  <p aria-level="2" class="caption" role="heading">
   <span class="caption-text">
    Installation
   </span>
  </p>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label class="label-parts" for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="nav bd-sidenav">
   <li class="toctree-l1">
    <a class="reference internal" href="../installation/downloads.html">
     Downloads - Mainnet
    </a>
   </li>
   <li class="toctree-l1">
    <a class="reference internal" href="../installation/downloads-testnet.html">
     Downloads - Testnet
    </a>
   </li>
   <li class="toctree-l1">
    <a class="reference internal" href="../installation/verification-instructions.html">
     Verification instructions
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l0 has-children">
  <p aria-level="2" class="caption" role="heading">
   <span class="caption-text">
    Learn
   </span>
  </p>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label class="label-parts" for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="nav bd-sidenav">
   <li class="toctree-l1 has-children">
    <a class="reference internal" href="learn-about-concordium.html">
     Learn about Concordium
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
    <label for="toctree-checkbox-3">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l2">
      <a class="reference internal" href="../concepts/id-accounts.html">
       Identities
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../references/manage-accounts.html">
       Accounts
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../concepts/concepts-backup.html">
       Backup
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../concepts/concepts-transactions.html">
       Transactions overview
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../concepts/concepts-baker.html">
       Bakers
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../concepts/concepts-delegation.html">
       Delegation
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../snippets/delegation-faq.html">
       Delegation FAQ
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="company-identities.html">
       Company identity creation
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../resources/glossary.html">
       Glossary of Concordium Terms
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l0 has-children">
  <p aria-level="2" class="caption" role="heading">
   <span class="caption-text">
    Concordium Wallets
   </span>
  </p>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label class="label-parts" for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="nav bd-sidenav">
   <li class="toctree-l1">
    <a class="reference internal" href="deciding-wallet.html">
     Deciding between the Desktop Wallet and the Mobile Wallet
    </a>
   </li>
   <li class="toctree-l1">
    <a class="reference internal" href="create-identity.html">
     Create an identity and an initial account
    </a>
   </li>
   <li class="toctree-l1">
    <a class="reference internal" href="create-account.html">
     Create an account
    </a>
   </li>
   <li class="toctree-l1">
    <a class="reference internal" href="send-ccd-wallets.html">
     Send CCD
    </a>
   </li>
   <li class="toctree-l1">
    <a class="reference internal" href="shield-ccd-wallets.html">
     Shield and unshield CCD on an account
    </a>
   </li>
   <li class="toctree-l1 has-children">
    <a class="reference internal" href="delegation.html">
     Delegation
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
    <label for="toctree-checkbox-5">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l2">
      <a class="reference internal" href="add-delegation.html">
       Delegate to a baker pool or passive delegation
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="update-delegation.html">
       Update delegation to a baker pool or passive delegation
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="remove-delegation.html">
       Remove delegation to a baker pool or passive delegation
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l1">
    <a class="reference internal" href="shielded-transfer.html">
     Make a shielded transfer on an account
    </a>
   </li>
   <li class="toctree-l1">
    <a class="reference internal" href="export-import.html">
     Make a backup of identities, accounts, and addresses
    </a>
   </li>
   <li class="toctree-l1 has-children">
    <a class="reference internal" href="../mobile-wallet/index.html">
     Mobile Wallet
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
    <label for="toctree-checkbox-6">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l2">
      <a class="reference internal" href="../mobile-wallet/setup-mobile-wallet.html">
       Set up the Mobile Wallet
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../mobile-wallet/share-address-mw.html">
       Find and share your account address
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../mobile-wallet/change-passcode-mw.html">
       Update your passcode and biometric settings
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../mobile-wallet/inspect-release-schedule-mw.html">
       Inspect a release schedule in Mobile Wallet
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l1 has-children">
    <a class="reference internal" href="../desktop-wallet/index.html">
     Desktop Wallet
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
    <label for="toctree-checkbox-7">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l2">
      <a class="reference internal" href="overview-desktop.html">
       Set up the Desktop Wallet
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../desktop-wallet/accounts-desktop.html">
       Use the Desktop Wallet
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../desktop-wallet/single-sign-schedule.html">
       Transfer CCD with a schedule in Desktop Wallet
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../desktop-wallet/transaction-log-filter.html">
       Apply a transaction log filter in the Desktop Wallet
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../desktop-wallet/update-application.html">
       Update the Desktop Wallet
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../desktop-wallet/reset-data.html">
       Reset desktop wallet data
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="overview-shared-accounts.html">
       Shared accounts with multiple credentials in Desktop Wallet
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l0 has-children">
  <p aria-level="2" class="caption" role="heading">
   <span class="caption-text">
    Develop on Concordium
   </span>
  </p>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label class="label-parts" for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current nav bd-sidenav">
   <li class="toctree-l1 has-children">
    <a class="reference internal" href="developer-page.html">
     Developer resources
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
    <label for="toctree-checkbox-9">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l2">
      <a class="reference internal" href="sdks-apis.html">
       SDKs and APIs
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../resources/dashboards.html">
       Dashboards and Status Pages
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../references/developer-tools.html">
       Auxiliary Tools
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../references/grpc.html">
       gRPC documentation
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l1 current active has-children">
    <a class="reference internal" href="../nodes/node-requirements.html">
     Run a node on Concordium
    </a>
    <input checked="" class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
    <label for="toctree-checkbox-10">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul class="current">
     <li class="toctree-l2">
      <a class="reference internal" href="../nodes/ubuntu.html">
       Ubuntu nodes
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../nodes/macos.html">
       MacOS nodes
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../nodes/windows.html">
       Windows nodes
      </a>
     </li>
     <li class="toctree-l2 current active">
      <a class="reference internal" href="../nodes/docker.html">
       Docker nodes
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../nodes/node-runner-service-configuration.html">
       Concordium Windows node runner service configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l1 has-children">
    <a class="reference internal" href="overview-baker-process.html">
     Overview of the baker process
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
    <label for="toctree-checkbox-11">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l2">
      <a class="reference internal" href="baker-pool.html">
       Baker management
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="baker-windows.html">
       Run a baker node on Windows
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../nodes/baker-macos.html">
       Run a baker node on macOS
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../nodes/baker-ubuntu.html">
       Run a baker node on Ubuntu
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../nodes/baker-docker.html">
       Run a baker node on Docker
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="become-baker.html">
       Become a baker using the Concordium Client
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l1 has-children">
    <a class="reference internal" href="../desktop-wallet/baking-dw.html">
     Baking in the Desktop Wallet
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
    <label for="toctree-checkbox-12">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l2">
      <a class="reference internal" href="add-baker-desktop.html">
       Add a baker account in the Desktop Wallet
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../desktop-wallet/update-baker-keys.html">
       Update baker keys in the Desktop Wallet
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../desktop-wallet/remove-baker.html">
       Remove a baker account
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../desktop-wallet/change-baker-stake.html">
       Update the staked amount
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../desktop-wallet/change-restake-settings.html">
       Update the restake settings
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../desktop-wallet/add-baker-pool-dw.html">
       Open a baker pool in Desktop Wallet
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../desktop-wallet/update-baker-pool-dw.html">
       Update a baker pool
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l1 has-children">
    <a class="reference internal" href="../mobile-wallet/baker-mw.html">
     Baking in Mobile Wallet
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
    <label for="toctree-checkbox-13">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l2">
      <a class="reference internal" href="../mobile-wallet/add-baker-mw.html">
       Add baker in Mobile Wallet
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../mobile-wallet/update-baker-mw.html">
       Change baker options in Mobile Wallet
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l1">
    <a class="reference internal" href="../references/concordium-client.html">
     Concordium Client
    </a>
   </li>
   <li class="toctree-l1">
    <a class="reference internal" href="../references/transactions.html">
     Concordium Client transactions
    </a>
   </li>
   <li class="toctree-l1">
    <a class="reference internal" href="../references/query-node.html">
     Querying a node
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l0 has-children">
  <p aria-level="2" class="caption" role="heading">
   <span class="caption-text">
    Smart Contracts v1
   </span>
  </p>
  <input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
  <label class="label-parts" for="toctree-checkbox-14">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="nav bd-sidenav">
   <li class="toctree-l1 has-children">
    <a class="reference internal" href="../../smart-contracts/general/introduction.html">
     Introduction
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/>
    <label for="toctree-checkbox-15">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts/general/contract-module.html">
       Smart contract modules
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts/general/contract-instances.html">
       Smart contract instances
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts/general/contract-schema.html">
       Smart contract schemas
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts/general/develop-contracts.html">
       Developing smart contracts in Rust
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l1 has-children">
    <a class="reference internal" href="../../smart-contracts/tutorials/piggy-bank/index.html">
     Tutorials
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/>
    <label for="toctree-checkbox-16">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts/tutorials/piggy-bank/writing.html">
       Writing the piggy bank smart contract
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts/tutorials/piggy-bank/testing.html">
       Testing the piggy bank smart contract
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts/tutorials/piggy-bank/preparing.html">
       Preparing a testnet node on a server
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts/tutorials/piggy-bank/deploying.html">
       Deploying the piggy bank smart contract
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l1 has-children">
    <a class="reference internal" href="../../smart-contracts/guides/contract-dev-guides.html">
     Contract development guides
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/>
    <label for="toctree-checkbox-17">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts/guides/setup-tools.html">
       Install tools for development
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts/guides/setup-contract.html">
       Setting up a smart contract project
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts/guides/compile-module.html">
       Compile a Rust smart contract module
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts/guides/unit-test-contract.html">
       Unit test a contract in Rust
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts/guides/custom-errors.html">
       Return custom errors
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts/guides/local-simulate.html">
       Locally simulate contract functions
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts/guides/build-schema.html">
       Build a contract schema
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts/guides/no-std.html">
       Build using
       <code class="docutils literal notranslate">
        <span class="pre">
         no_std
        </span>
       </code>
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts/guides/fallback-entrypoints.html">
       Fallback entrypoints
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l1 has-children">
    <a class="reference internal" href="../../smart-contracts/guides/on-chain-index.html">
     On-chain guides
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/>
    <label for="toctree-checkbox-18">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts/guides/deploy-module.html">
       Deploy a smart contract module
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts/guides/initialize-contract.html">
       Initialize a smart contract instance
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts/guides/interact-instance.html">
       Interact with a smart contract instance
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts/guides/inspect-instance.html">
       Inspect a smart contract instance
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts/guides/invoke-instance.html">
       Invoke a smart contract instance
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l1 has-children">
    <a class="reference internal" href="../../smart-contracts/onboarding-guide-ethereum-developers/index.html">
     Ethereum developer onboarding
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" type="checkbox"/>
    <label for="toctree-checkbox-19">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts/onboarding-guide-ethereum-developers/faq.html">
       FAQs
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l1 has-children">
    <a class="reference internal" href="../../smart-contracts/references/index.html">
     References
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" type="checkbox"/>
    <label for="toctree-checkbox-20">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts/references/crypto-primitives.html">
       Cryptographic primitives
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts/references/host-fns.html">
       Contract host functions
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts/references/local-settings.html">
       Local settings
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts/references/references-on-chain.html">
       References on-chain
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts/references/schema-json.html">
       Schema JSON representation
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts/references/simulate-context.html">
       Simulation contexts
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference external" href="https://github.com/Concordium/concordium-rust-smart-contracts">
       Rust contract examples (repo)
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference external" href="https://docs.rs/concordium-std/3.0.0/concordium_std/">
       concordium-std
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l0 has-children">
  <p aria-level="2" class="caption" role="heading">
   <span class="caption-text">
    Smart Contracts v0
   </span>
  </p>
  <input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" type="checkbox"/>
  <label class="label-parts" for="toctree-checkbox-21">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="nav bd-sidenav">
   <li class="toctree-l1 has-children">
    <a class="reference internal" href="../../smart-contracts-v0/general/introduction.html">
     Introduction
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" type="checkbox"/>
    <label for="toctree-checkbox-22">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts-v0/general/contract-module.html">
       Smart contract modules
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts-v0/general/contract-instances.html">
       Smart contract instances
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts-v0/general/contract-schema.html">
       Smart contract schemas
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts-v0/general/develop-contracts.html">
       Developing smart contracts in Rust
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l1 has-children">
    <a class="reference internal" href="../../smart-contracts-v0/tutorials/piggy-bank/index.html">
     Tutorials
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" type="checkbox"/>
    <label for="toctree-checkbox-23">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts-v0/tutorials/piggy-bank/writing.html">
       Writing the piggy bank smart contract
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts-v0/tutorials/piggy-bank/testing.html">
       Testing the piggy bank smart contract
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l1 has-children">
    <a class="reference internal" href="../../smart-contracts-v0/guides/contract-dev-guides.html">
     Contract development guides
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" type="checkbox"/>
    <label for="toctree-checkbox-24">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts-v0/guides/setup-tools.html">
       Install tools for development
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts-v0/guides/setup-contract.html">
       Setting up a smart contract project
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts-v0/guides/compile-module.html">
       Compile a Rust smart contract module
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts-v0/guides/unit-test-contract.html">
       Unit test a contract in Rust
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts-v0/guides/custom-errors.html">
       Return custom errors
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts-v0/guides/local-simulate.html">
       Locally simulate contract functions
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts-v0/guides/build-schema.html">
       Build a contract schema
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts-v0/guides/no-std.html">
       Build using
       <code class="docutils literal notranslate">
        <span class="pre">
         no_std
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l1 has-children">
    <a class="reference internal" href="../../smart-contracts-v0/guides/on-chain-index.html">
     On-chain guides
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" type="checkbox"/>
    <label for="toctree-checkbox-25">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts-v0/guides/deploy-module.html">
       Deploy a smart contract module
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts-v0/guides/initialize-contract.html">
       Initialize a smart contract instance
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts-v0/guides/interact-instance.html">
       Interact with a smart contract instance
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts-v0/guides/inspect-instance.html">
       Inspect a smart contract instance
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l1 has-children">
    <a class="reference internal" href="../../smart-contracts-v0/references/index.html">
     References
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" type="checkbox"/>
    <label for="toctree-checkbox-26">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts-v0/references/schema-json.html">
       Schema JSON representation
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts-v0/references/simulate-context.html">
       Simulation contexts
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts-v0/references/host-fns.html">
       Contract host functions
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts-v0/references/references-on-chain.html">
       References on-chain
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../../smart-contracts-v0/references/local-settings.html">
       Local settings
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference external" href="https://github.com/Concordium/concordium-rust-smart-contracts">
       Rust contract examples (repo)
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference external" href="https://docs.rs/concordium-std/2.0.0/concordium_std/">
       concordium-std
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l0 has-children">
  <p aria-level="2" class="caption" role="heading">
   <span class="caption-text">
    Resources
   </span>
  </p>
  <input class="toctree-checkbox" id="toctree-checkbox-27" name="toctree-checkbox-27" type="checkbox"/>
  <label class="label-parts" for="toctree-checkbox-27">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="nav bd-sidenav">
   <li class="toctree-l1">
    <a class="reference internal" href="../resources/ccd-scan.html">
     CCDScan
    </a>
   </li>
   <li class="toctree-l1">
    <a class="reference internal" href="../resources/release-notes-mainnet.html">
     Release notes - Mainnet
    </a>
   </li>
   <li class="toctree-l1">
    <a class="reference internal" href="../resources/release-notes.html">
     Release Notes - Testnet
    </a>
   </li>
   <li class="toctree-l1 has-children">
    <a class="reference internal" href="../resources/sirius-testnet-reset.html">
     Testnet reset
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-28" name="toctree-checkbox-28" type="checkbox"/>
    <label for="toctree-checkbox-28">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l2">
      <a class="reference internal" href="../resources/sirius-testnet-reset-nodes.html">
       Node migration after Testnet reset
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../resources/sirius-testnet-reset-wallets.html">
       Wallet migration after Testnet reset
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../resources/sirius-testnet-reset-client.html">
       Client migration after Testnet reset
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l1 has-children">
    <a class="reference internal" href="../resources/legal.html">
     Legal
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-29" name="toctree-checkbox-29" type="checkbox"/>
    <label for="toctree-checkbox-29">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l2">
      <a class="reference internal" href="../resources/terms-and-conditions-dw.html">
       Terms and Conditions for Concordium Desktop Wallet
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../resources/terms-and-conditions-mw.html">
       Terms and Conditions for Concordium Mobile Wallet
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../resources/third-party-licenses.html">
       Third Party Licenses
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../resources/third-party-notices.html">
       Third-party Software and Hardware Notices
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../resources/dw-licenses.html">
       Concordium Desktop Wallet Third Party Licenses
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>
  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#before-you-begin">
   Before you begin
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#running-upgrading-a-node">
   Running/upgrading a node
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#run-a-testnet-node">
   Run a testnet node
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#enable-inbound-connections">
   Enable inbound connections
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#retrieve-node-logs">
     Retrieve node logs
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#run-a-mainnet-node">
   Run a mainnet node
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#migration-from-the-previous-docker-distribution">
   Migration from the previous Docker distribution
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#troubleshooting">
   Troubleshooting
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#mounting-host-directories-under-selinux">
     Mounting host directories under SELinux
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#letting-the-node-container-access-the-internet">
     Letting the node container access the internet
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="run-a-node-with-docker">
<span id="run-a-node"></span><h1>Run a node with Docker<a class="headerlink" href="#run-a-node-with-docker" title="Permalink to this headline">#</a></h1>
<p>In this guide, you learn how to run a node on your Linux computer that
participates in the Concordium network. This means that you receive
blocks and transactions from other nodes, as well as propagate
information about blocks and transactions to the nodes in the Concordium
network. After following this guide, you will be able to</p>
<ul class="simple">
<li><p>run a Concordium node</p></li>
<li><p>observe it on the network dashboard and</p></li>
<li><p>query the state of the Concordium blockchain directly from your
machine.</p></li>
</ul>
<p>You do not need an account to run a node.</p>
<div class="section" id="before-you-begin">
<h2>Before you begin<a class="headerlink" href="#before-you-begin" title="Permalink to this headline">#</a></h2>
<p>Before running a Concordium node you will need to</p>
<ol class="arabic simple">
<li><p>Install and run Docker.</p>
<ul class="simple">
<li><p>On <em>Linux</em>, allow Docker to be run as a non-root user.</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://docs.docker.com/compose/install/">Install the compose plugin</a>.</p></li>
</ol>
</div>
<div class="section" id="running-upgrading-a-node">
<span id="running-a-node"></span><h2>Running/upgrading a node<a class="headerlink" href="#running-upgrading-a-node" title="Permalink to this headline">#</a></h2>
<p>Concordium provides two Docker images, a <a class="reference external" href="https://hub.docker.com/r/concordium/mainnet-node">mainnet</a> one and a <a class="reference external" href="https://hub.docker.com/r/concordium/testnet-node">testnet</a> one.
These images are designed to be used together with docker-compose, or a similar driver. This guide provides a sample configuration using <code class="docutils literal notranslate"><span class="pre">docker-compose</span></code>.</p>
<p>The node requires a database which must be stored on the host system so that it persists when the docker container is stopped. It is up to the user to select the location of the database on their host system. In the guide the location used is <code class="docutils literal notranslate"><span class="pre">/var/lib/concordium-mainnet</span></code> or <code class="docutils literal notranslate"><span class="pre">/var/lib/concordium-testent</span></code> but any location to which the user that runs the Docker command has access to will do.</p>
</div>
<div class="section" id="run-a-testnet-node">
<h2>Run a testnet node<a class="headerlink" href="#run-a-testnet-node" title="Permalink to this headline">#</a></h2>
<p>To run a node on testnet use the following configuration file and follow the steps below.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># This is an example configuration for running the testnet node</span>
<span class="nt">version</span><span class="p">:</span> <span class="s">&#39;3&#39;</span>
<span class="nt">services</span><span class="p">:</span>
  <span class="nt">testnet-node</span><span class="p">:</span>
    <span class="nt">container_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">testnet-node</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">concordium/testnet-node:latest</span>
    <span class="nt">environment</span><span class="p">:</span>
      <span class="c1"># Environment specific configuration</span>
      <span class="c1"># The url where IPs of the bootstrap nodes can be found.</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_CONNECTION_BOOTSTRAP_NODES=bootstrap.testnet.concordium.com:8888</span>
      <span class="c1"># Where the genesis is located</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_CONSENSUS_GENESIS_DATA_FILE=/testnet-genesis.dat</span>
      <span class="c1"># General node configuration Data and config directories (it&#39;s OK if they</span>
      <span class="c1"># are the same). This should match the volume mount below. If the location</span>
      <span class="c1"># of the mount inside the container is changed, then these should be</span>
      <span class="c1"># changed accordingly as well.</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_DATA_DIR=/mnt/data</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_CONFIG_DIR=/mnt/data</span>
      <span class="c1"># The port on which the node will listen for incoming connections. This is a</span>
      <span class="c1"># port inside the container. It is mapped to an external port by the port</span>
      <span class="c1"># mapping in the `ports` section below. If the internal and external ports</span>
      <span class="c1"># are going to be different then you should also set</span>
      <span class="c1"># `CONCORDIUM_NODE_EXTERNAL_PORT` variable to what the external port value is.</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_LISTEN_PORT=8889</span>
      <span class="c1"># Desired number of nodes to be connected to.</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_CONNECTION_DESIRED_NODES=5</span>
      <span class="c1"># Maximum number of __nodes__ the node will be connected to.</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_CONNECTION_MAX_ALLOWED_NODES=10</span>
      <span class="c1"># Address of the GRPC server</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_RPC_SERVER_ADDR=0.0.0.0</span>
      <span class="c1"># And its port</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_RPC_SERVER_PORT=10001</span>
      <span class="c1"># Maximum number of __connections__ the node can have. This can temporarily be more than</span>
      <span class="c1"># the number of peers when incoming connections are processed. This limit</span>
      <span class="c1"># ensures that there cannot be too many of those.</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_CONNECTION_HARD_CONNECTION_LIMIT=20</span>
      <span class="c1"># Number of threads to use to process network events. This should be</span>
      <span class="c1"># adjusted based on the resources the node has (in combination with</span>
      <span class="c1"># `CONCORDIUM_NODE_BAKER_HASKELL_RTS_FLAGS`) below.</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_CONNECTION_THREAD_POOL_SIZE=2</span>
      <span class="c1"># The bootstrapping interval in seconds. This makes the node contact the</span>
      <span class="c1"># specified bootstrappers at a given interval to discover new peers.</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_CONNECTION_BOOTSTRAPPING_INTERVAL=1800</span>
      <span class="c1"># Haskell RTS flags to pass to consensus. `-N2` means to use two threads</span>
      <span class="c1"># for consensus operations. `-I0` disables the idle garbage collector</span>
      <span class="c1"># which reduces CPU load for non-baking nodes.</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_BAKER_HASKELL_RTS_FLAGS=-N2,-I0</span>
    <span class="nt">entrypoint</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="s">&quot;/concordium-node&quot;</span><span class="p p-Indicator">]</span>
    <span class="c1"># Exposed ports. The ports the node listens on inside the container (defined</span>
    <span class="c1"># by `CONCORDIUM_NODE_LISTEN_PORT` and `CONCORDIUM_NODE_RPC_SERVER_PORT`)</span>
    <span class="c1"># should match what is defined here. When running multiple nodes the</span>
    <span class="c1"># external ports should be changed so as not to conflict.</span>
    <span class="c1"># In the mapping below, the first port is the `host` port, and the second</span>
    <span class="c1"># port is the `container` port. When the `container` port is changed the</span>
    <span class="c1"># relevant environment variable listed above must be changed as well. For</span>
    <span class="c1"># example, changing `10001:10001` to `10001:13000` would mean that</span>
    <span class="c1"># `CONCORDIUM_NODE_RPC_SERVER_PORT` should be set to `13000`. Otherwise</span>
    <span class="c1"># the node&#39;s gRPC interface will not be available from the host.</span>
    <span class="nt">ports</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="s">&quot;8889:8889&quot;</span>
    <span class="p p-Indicator">-</span> <span class="s">&quot;10001:10001&quot;</span>
    <span class="nt">volumes</span><span class="p">:</span>
    <span class="c1"># The node&#39;s database should be stored in a persistent volume so that it</span>
    <span class="c1"># survives container restart. In this case we map the **host** directory</span>
    <span class="c1"># /var/lib/concordium-testnet to be used as the node&#39;s database directory.</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">/var/lib/concordium-testnet:/mnt/data</span>
  <span class="c1"># The collector reports the state of the node to the network dashboard. A node</span>
  <span class="c1"># can run without reporting to the network dashboard. Remove this section if</span>
  <span class="c1"># that is desired.</span>
  <span class="nt">testnet-node-collector</span><span class="p">:</span>
    <span class="nt">container_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">testnet-node-collector</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">concordium/testnet-node:latest</span>
    <span class="nt">environment</span><span class="p">:</span>
      <span class="c1"># Settings that should be customized by the user.</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_COLLECTOR_NODE_NAME=docker-test</span>
      <span class="c1"># Environment specific settings.</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_COLLECTOR_URL=https://dashboard.testnet.concordium.com/nodes/post</span>
      <span class="c1"># Collection settings.</span>
      <span class="c1"># How often to collect the statistics from the node.</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_COLLECTOR_COLLECT_INTERVAL=5000</span>
      <span class="c1"># The URL where the node can be reached. Note that this will use the</span>
      <span class="c1"># docker created network which maps `testnet-node` to the internal IP of</span>
      <span class="c1"># the `testnet-node`. If the name of the node service is changed from</span>
      <span class="c1"># `testnet-node` then the name here must also be changed.</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_COLLECTOR_GRPC_HOST=http://testnet-node:10001</span>
    <span class="nt">entrypoint</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="s">&quot;/node-collector&quot;</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<ol class="arabic">
<li><p>Save the contents as <code class="docutils literal notranslate"><span class="pre">testnet-node.yaml</span></code>.</p></li>
<li><p>Possibly modify the <strong>volume mount</strong> to map the database directory to a different location on the host system. The volume mount is the following section.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">volumes</span><span class="p">:</span>
   <span class="c1"># The node&#39;s database should be stored in a persistent volume so that it</span>
   <span class="c1"># survives container restart. In this case we map the **host** directory</span>
   <span class="c1"># /var/lib/concordium-testnet to be used as the node&#39;s database directory.</span>
   <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">/var/lib/concordium-testnet:/mnt/data</span>
</pre></div>
</div>
</li>
<li><p>Modify the node name that will appear on the network dashboard. This is set by the environment variable</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_COLLECTOR_NODE_NAME=docker-test</span>
</pre></div>
</div>
<p>This name can be set to any non-empty string. If the name has spaces it should be quoted.</p>
</li>
<li><p>Start the node and the collector.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span>docker-compose up -f testnet-node.yaml
</pre></div>
</div>
</li>
</ol>
<p>The configuration will start two containers, one running the node, and another
running the node collector that reports the node state to the network dashboard.</p>
<p>If you wish to have the node running in the background, then add a <code class="docutils literal notranslate"><span class="pre">-d</span></code> option to the above command.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The sample configuration will always download the latest node image. It is
good practice to choose the version deliberately. To choose a specific
version, find the correct version in
<a class="reference external" href="https://hub.docker.com/r/concordium/testnet-node">hub.docker.com/concordium/testnet-node</a> and change the
<code class="docutils literal notranslate"><span class="pre">image</span></code> value from</p>
<blockquote>
<div><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">concordium/testnet-node:latest</span>
</pre></div>
</div>
</div></blockquote>
<p>to, e.g.,</p>
<blockquote>
<div><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">concordium/testnet-node:4.2.3-0</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="enable-inbound-connections">
<h2>Enable inbound connections<a class="headerlink" href="#enable-inbound-connections" title="Permalink to this headline">#</a></h2>
<p>If you are running your node behind a firewall, or behind your home
router, then you will probably only be able to connect to other nodes,
but other nodes will not be able to initiate connections to your node.
This is perfectly fine, and your node will fully participate in the
Concordium network. It will be able to send transactions and,
<a class="reference internal" href="become-baker.html#become-a-baker"><span class="std std-ref">if so configured</span></a>, to bake and finalize.</p>
<p>However you can also make your node an even better network participant by
enabling inbound connections. The sample configuration above makes the node
listen on port <code class="docutils literal notranslate"><span class="pre">8889</span></code> for inbound connections. Depending on your network and
platform configuration you will either need to forward an external port to
<code class="docutils literal notranslate"><span class="pre">8889</span></code> on your router, open it in your firewall, or both. The details of how
this is done will depend on your configuration.</p>
<div class="section" id="retrieve-node-logs">
<h3>Retrieve node logs<a class="headerlink" href="#retrieve-node-logs" title="Permalink to this headline">#</a></h3>
<p>The sample configuration presented above will log data using docker’s default
logging infrastructure. The logs for the node can be retrieved by running</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span>docker logs testnet-node
</pre></div>
</div>
<p>This outputs the logs to <code class="docutils literal notranslate"><span class="pre">stdout</span></code>.</p>
</div>
</div>
<div class="section" id="run-a-mainnet-node">
<h2>Run a mainnet node<a class="headerlink" href="#run-a-mainnet-node" title="Permalink to this headline">#</a></h2>
<p>The same steps apply as for the testnet node, except the following sample
configuration file should be used.</p>
<p>The main differences from the testnet configuration are:</p>
<ul class="simple">
<li><p>the image used is the mainnet image. See <a class="reference external" href="https://hub.docker.com/r/concordium/mainnet-node">hub.docker.com/concordium/mainnet-node</a>
for a list of currently available versions.</p></li>
<li><p>the node listens on port 8888 instead of 8889 by default</p></li>
<li><p>the node’s GRPC interface is exposed on port 10000 instead of 10001</p></li>
<li><p>the database directory is <code class="docutils literal notranslate"><span class="pre">/var/lib/concordium-mainnet</span></code> instead of
<code class="docutils literal notranslate"><span class="pre">/var/lib/concordium-testnet</span></code></p></li>
</ul>
<p>Logs of the mainnet node can be retrieved by running:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span>docker logs mainnet-node
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># This is an example configuration for running the mainnet node</span>
<span class="nt">version</span><span class="p">:</span> <span class="s">&#39;3&#39;</span>
<span class="nt">services</span><span class="p">:</span>
  <span class="nt">mainnet-node</span><span class="p">:</span>
    <span class="nt">container_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">mainnet-node</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">concordium/mainnet-node:latest</span>
    <span class="nt">environment</span><span class="p">:</span>
      <span class="c1"># Environment specific configuration</span>
      <span class="c1"># The url where IPs of the bootstrap nodes can be found.</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_CONNECTION_BOOTSTRAP_NODES=bootstrap.mainnet.concordium.software:8888</span>
      <span class="c1"># Where the genesis is located</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_CONSENSUS_GENESIS_DATA_FILE=/mainnet-genesis.dat</span>
      <span class="c1"># General node configuration Data and config directories (it&#39;s OK if they</span>
      <span class="c1"># are the same). This should match the volume mount below. If the location</span>
      <span class="c1"># of the mount inside the container is changed, then these should be</span>
      <span class="c1"># changed accordingly as well.</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_DATA_DIR=/mnt/data</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_CONFIG_DIR=/mnt/data</span>
      <span class="c1"># The port on which the node will listen for incoming connections. This is a</span>
      <span class="c1"># port inside the container. It is mapped to an external port by the port</span>
      <span class="c1"># mapping in the `ports` section below. If the internal and external ports</span>
      <span class="c1"># are going to be different then you should also set</span>
      <span class="c1"># `CONCORDIUM_NODE_EXTERNAL_PORT` variable to what the external port value is.</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_LISTEN_PORT=8888</span>
      <span class="c1"># Desired number of nodes to be connected to.</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_CONNECTION_DESIRED_NODES=5</span>
      <span class="c1"># Maximum number of __nodes__ the node will be connected to.</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_CONNECTION_MAX_ALLOWED_NODES=10</span>
      <span class="c1"># Address of the GRPC server</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_RPC_SERVER_ADDR=0.0.0.0</span>
      <span class="c1"># And its port</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_RPC_SERVER_PORT=10000</span>
      <span class="c1"># Maximum number of __connections__ the node can have. This can temporarily be more than</span>
      <span class="c1"># the number of peers when incoming connections are processed. This limit</span>
      <span class="c1"># ensures that there cannot be too many of those.</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_CONNECTION_HARD_CONNECTION_LIMIT=20</span>
      <span class="c1"># Number of threads to use to process network events. This should be</span>
      <span class="c1"># adjusted based on the resources the node has (in combination with</span>
      <span class="c1"># `CONCORDIUM_NODE_BAKER_HASKELL_RTS_FLAGS`) below.</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_CONNECTION_THREAD_POOL_SIZE=2</span>
      <span class="c1"># The bootstrapping interval in seconds. This makes the node contact the</span>
      <span class="c1"># specified bootstrappers at a given interval to discover new peers.</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_CONNECTION_BOOTSTRAPPING_INTERVAL=1800</span>
      <span class="c1"># Haskell RTS flags to pass to consensus. `-N2` means to use two threads</span>
      <span class="c1"># for consensus operations. `-I0` disables the idle garbage collector</span>
      <span class="c1"># which reduces CPU load for non-baking nodes.</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_BAKER_HASKELL_RTS_FLAGS=-N2,-I0</span>
    <span class="nt">entrypoint</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="s">&quot;/concordium-node&quot;</span><span class="p p-Indicator">]</span>
    <span class="c1"># Exposed ports. The ports the node listens on inside the container (defined</span>
    <span class="c1"># by `CONCORDIUM_NODE_LISTEN_PORT` and `CONCORDIUM_NODE_RPC_SERVER_PORT`)</span>
    <span class="c1"># should match what is defined here. When running multiple nodes the</span>
    <span class="c1"># external ports should be changed so as not to conflict.</span>
    <span class="c1"># In the mapping below, the first port is the `host` port, and the second</span>
    <span class="c1"># port is the `container` port. When the `container` port is changed the</span>
    <span class="c1"># relevant environment variable listed above must be changed as well. For</span>
    <span class="c1"># example, changing `10000:10000` to `10000:13000` would mean that</span>
    <span class="c1"># `CONCORDIUM_NODE_RPC_SERVER_PORT` should be set to `13000`. Otherwise</span>
    <span class="c1"># the node&#39;s gRPC interface will not be available from the host.</span>
    <span class="nt">ports</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="s">&quot;8888:8888&quot;</span>
    <span class="p p-Indicator">-</span> <span class="s">&quot;10000:10000&quot;</span>
    <span class="nt">volumes</span><span class="p">:</span>
    <span class="c1"># The node&#39;s database should be stored in a persistent volume so that it</span>
    <span class="c1"># survives container restart. In this case we map the **host** directory</span>
    <span class="c1"># /var/lib/concordium-mainnet to be used as the node&#39;s database directory.</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">/var/lib/concordium-mainnet:/mnt/data</span>
  <span class="c1"># The collector reports the state of the node to the network dashboard. A node</span>
  <span class="c1"># can run without reporting to the network dashboard. Remove this section if</span>
  <span class="c1"># that is desired.</span>
  <span class="nt">mainnet-node-collector</span><span class="p">:</span>
    <span class="nt">container_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">mainnet-node-collector</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">concordium/mainnet-node:latest</span>
    <span class="nt">environment</span><span class="p">:</span>
      <span class="c1"># Settings that should be customized by the user.</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_COLLECTOR_NODE_NAME=docker-test-mainnet</span>
      <span class="c1"># Environment specific settings.</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_COLLECTOR_URL=https://dashboard.mainnet.concordium.software/nodes/post</span>
      <span class="c1"># Collection settings.</span>
      <span class="c1"># How often to collect the statistics from the node.</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_COLLECTOR_COLLECT_INTERVAL=5000</span>
      <span class="c1"># The URL where the node can be reached. Note that this will use the</span>
      <span class="c1"># docker created network which maps `mainnet-node` to the internal IP of</span>
      <span class="c1"># the `mainnet-node`. If the name of the node service is changed from</span>
      <span class="c1"># `mainnet-node` then the name here must also be changed.</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">CONCORDIUM_NODE_COLLECTOR_GRPC_HOST=http://mainnet-node:10000</span>
    <span class="nt">entrypoint</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="s">&quot;/node-collector&quot;</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
</div>
<div class="section" id="migration-from-the-previous-docker-distribution">
<span id="migration-docker-distribution"></span><h2>Migration from the previous Docker distribution<a class="headerlink" href="#migration-from-the-previous-docker-distribution" title="Permalink to this headline">#</a></h2>
<p>In the past Concordium provided a <code class="docutils literal notranslate"><span class="pre">concordium-software</span></code> package which
contained a <code class="docutils literal notranslate"><span class="pre">concordium-node</span></code> binary which orchestrated downloading a Docker
image and running the node. To migrate from that setup:</p>
<ol class="arabic">
<li><p>Stop the running node (e.g., using <code class="docutils literal notranslate"><span class="pre">concordium-node-stop</span></code>)</p></li>
<li><p>Either modify the relevant example configuration file above by mapping the
existing node database directory for use by the new container, i.e., replacing</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">/var/lib/concordium-mainnet:/mnt/data</span>
</pre></div>
</div>
<p>with</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">~/.local/share/concordium:/mnt/data</span>
</pre></div>
</div>
<p>Or, alternatively, moving the contents of <code class="docutils literal notranslate"><span class="pre">~/.local/share/concordium</span></code> to,
e.g., <code class="docutils literal notranslate"><span class="pre">/var/lib/concordium-mainnet</span></code> and keeping the configuration files as
they are.</p>
</li>
<li><p>Start the new node.</p></li>
</ol>
</div>
<div class="section" id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">#</a></h2>
<p>The above configuration describes a basic configuration and has been tested on
Ubuntu 20.04. Other Linux distributions might require some modifications. Below
are some common issues.</p>
<div class="section" id="mounting-host-directories-under-selinux">
<h3>Mounting host directories under SELinux<a class="headerlink" href="#mounting-host-directories-under-selinux" title="Permalink to this headline">#</a></h3>
<p>When mounting host directories on distributions running <a class="reference external" href="https://en.wikipedia.org/wiki/Security-Enhanced_Linux">SELinux</a> special considerations apply.
This in particular includes Fedora and its derivatives. See <a class="reference external" href="https://docs.docker.com/storage/bind-mounts/#configure-the-selinux-label">the Docker documentation</a> for details on how to proceed.</p>
</div>
<div class="section" id="letting-the-node-container-access-the-internet">
<h3>Letting the node container access the internet<a class="headerlink" href="#letting-the-node-container-access-the-internet" title="Permalink to this headline">#</a></h3>
<p>Some Linux distributions whose firewall is not based on iptables, Fedora and
CentOS among them, require additional steps to allow Docker containers to access
external networks, e.g., the internet.</p>
<p>On Fedora run the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span>sudo firewall-cmd --permanent --zone<span class="o">=</span>trusted --add-interface<span class="o">=</span>docker0
</pre></div>
</div>
<p>to allow Docker containers to access external networks.</p>
<p>Note that this will allow any Docker container access to the internet, not just the Concordium node.</p>
<p>Some users on Ubuntu have reported the node does not have internet access. In this case, adding <cite>network_mode: bridge</cite> to each service might solve this problem:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">services</span><span class="p">:</span>
  <span class="nt">mainnet-node</span><span class="p">:</span>
    <span class="nt">container_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">mainnet-node</span>
<span class="hll">    <span class="nt">network_mode</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">bridge</span>
</span>    <span class="l l-Scalar l-Scalar-Plain">...</span>
  <span class="nt">mainnet-node-collector</span><span class="p">:</span>
    <span class="nt">container_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">mainnet-node-collector</span>
<span class="hll">    <span class="nt">network_mode</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">bridge</span>
</span>    <span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
</div>
</div>
</div>


              </div>
              
              
          </main>
          

      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>

<!DOCTYPE html>
<html>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
    body {margin:0px;}
    
    .cc {
      position: relative;
      bottom: 0%;
      left: 0%;
    }
    
    .cc a {
      display: inline-block;
      text-align: left;
      padding: 16px;
      color: black;
      font-size: 8px;
    }
    
</style>
<body>
    
    <div class="cc">
        <a href="http://creativecommons.org/licenses/by-sa/4.0/">
            <img src="../../_static/cc-sa-by.png" />  Copyright 2021 - 2022, Concordium Software ApS
        </a>
    </div>
  </body>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TE81YY48VB"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}

gtag('consent', 'default', { 'ad_storage': 'denied', 'analytics_storage': loadChoice() ? 'granted' : 'denied' });
gtag('js', new Date());
gtag('config', 'G-TE81YY48VB', {'anonymize_ip': true});

// Save the choice in a cookie
function storeChoice(granted) {
    document.cookie = "cookie-consent=" + granted
}

// Look for a cookie storing the previous choice of the user.
// Returns undefined if no choice was stored, otherwise a boolean for whether the
// user gave consent.
function loadChoice() {
    if (!document.cookie.includes("cookie-consent=")) {
        return undefined;
    }
    return document.cookie.includes("cookie-consent=true")
}

// Removes the cookie consent banner
function removeCookieConsentBanner() {
    document.getElementById("cookie-consent").remove()
}

// Called by the cookie consent banner if granted permission
function consentGranted() {
    storeChoice(true)
    gtag('consent', 'update', { 'ad_storage': 'denied', 'analytics_storage': 'granted' });
    removeCookieConsentBanner()
}

// Called by the cookie consent banner if denied permission
function consentDenied() {
    storeChoice(false)
    removeCookieConsentBanner()
}


</script>
<div id="cookie-consent" class="consent">
    <p>We use cookies to ensure that we give you the best experience on our website, but only if you grant us the permission.</p>
    <button onclick="consentGranted()">Allow</button>
    <button onclick="consentDenied()">Decline</button>
    <a href="https://concordium.com/privacy-policy/">Privacy policy</a>
</div>
<script>
    const stored = loadChoice();
    if (stored !== undefined) {
        removeCookieConsentBanner()
    }
</script>

  </body>
</html>