


<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Smart contract modules &#8212; Concordium  documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <link rel="shortcut icon" href="../../_static/concordium-logo-no-text.svg"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Smart contract instances" href="contract-instances.html" />
    <link rel="prev" title="Introduction to smart contracts" href="introduction.html" />
<link href="../../_static/style.css" rel="stylesheet" type="text/css">

  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../../index.html">
  <img src="../../_static/concordium-logo-dark.svg" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <!DOCTYPE html>
<html>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<style>
body {margin:0;}

.navbar-menu {
  position: fixed;
}

.navbar-menu a {
  display: inline;
  text-align: left;
  padding: 16px;
  color: black;
  font-size: 15px;
}
/* Large devices (laptops/desktops, 992px to 768px ) */
@media only screen and (max-width: 992px) {
  .navbar-menu {
    display: none;}

}
</style>
<body>

<div class="navbar-menu w3-hide-medium w3-hide-small">
  <a href="../../net/guides/learn-about-concordium.html">Learn</a>
  <a href="../../net/nodes/node-requirements.html">Run a node</a>
  <a href="../../net/guides/deciding-wallet.html">Wallets</a>
  <a href="../../net/guides/overview-baker-process.html">Baking</a>
  <a href="../../net/guides/developer-page.html">Develop</a>
  <a href="../index.html">Smart Contracts</a>
</div>
</body>
</html>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/Concordium" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="mailto:support@concordium.software" rel="noopener" target="_blank" title="Support"><span><i class="fas fa-envelope"></i></span>
            <label class="sr-only">Support</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://support.concordium.software/latest" rel="noopener" target="_blank" title="Discourse"><img src="../../_static/discourse-brands.svg" class="icon-link-image" alt="Discourse"/></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="list-caption">
 <li class="toctree-l0 has-children">
  <p aria-level="2" class="caption" role="heading">
   <span class="caption-text">
    General
   </span>
  </p>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label class="label-parts" for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current nav bd-sidenav">
   <li class="toctree-l1">
    <a class="reference internal" href="introduction.html">
     Introduction to smart contracts
    </a>
   </li>
   <li class="toctree-l1 current active">
    <a class="current reference internal" href="#">
     Smart contract modules
    </a>
   </li>
   <li class="toctree-l1">
    <a class="reference internal" href="contract-instances.html">
     Smart contract instances
    </a>
   </li>
   <li class="toctree-l1">
    <a class="reference internal" href="contract-schema.html">
     Smart contract schemas
    </a>
   </li>
   <li class="toctree-l1">
    <a class="reference internal" href="resource-accounting.html">
     Resource accounting
    </a>
   </li>
   <li class="toctree-l1">
    <a class="reference internal" href="develop-contracts.html">
     Developing smart contracts in Rust
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l0 has-children">
  <p aria-level="2" class="caption" role="heading">
   <span class="caption-text">
    Tutorials
   </span>
  </p>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label class="label-parts" for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="nav bd-sidenav">
   <li class="toctree-l1 has-children">
    <a class="reference internal" href="../tutorials/piggy-bank/index.html">
     The piggy bank smart contract
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
    <label for="toctree-checkbox-3">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l2">
      <a class="reference internal" href="../tutorials/piggy-bank/writing.html">
       1. Writing the piggy bank smart contract
      </a>
     </li>
     <li class="toctree-l2">
      <a class="reference internal" href="../tutorials/piggy-bank/testing.html">
       2. Testing the piggy bank smart contract
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l0 has-children">
  <p aria-level="2" class="caption" role="heading">
   <span class="caption-text">
    Contract development guides
   </span>
  </p>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label class="label-parts" for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="nav bd-sidenav">
   <li class="toctree-l1">
    <a class="reference internal" href="../guides/setup-tools.html">
     Install tools for development
    </a>
   </li>
   <li class="toctree-l1">
    <a class="reference internal" href="../guides/setup-contract.html">
     Setting up a smart contract project
    </a>
   </li>
   <li class="toctree-l1">
    <a class="reference internal" href="../guides/compile-module.html">
     Compile a Rust smart contract module
    </a>
   </li>
   <li class="toctree-l1">
    <a class="reference internal" href="../guides/unit-test-contract.html">
     Unit test a contract in Rust
    </a>
   </li>
   <li class="toctree-l1">
    <a class="reference internal" href="../guides/custom-errors.html">
     Return custom errors
    </a>
   </li>
   <li class="toctree-l1">
    <a class="reference internal" href="../guides/local-simulate.html">
     Locally simulate contract functions
    </a>
   </li>
   <li class="toctree-l1">
    <a class="reference internal" href="../guides/build-schema.html">
     Build a contract schema
    </a>
   </li>
   <li class="toctree-l1">
    <a class="reference internal" href="../guides/no-std.html">
     Build using
     <code class="docutils literal notranslate">
      <span class="pre">
       no_std
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l0 has-children">
  <p aria-level="2" class="caption" role="heading">
   <span class="caption-text">
    On-chain guides
   </span>
  </p>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label class="label-parts" for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="nav bd-sidenav">
   <li class="toctree-l1">
    <a class="reference internal" href="../guides/deploy-module.html">
     Deploy a smart contract module
    </a>
   </li>
   <li class="toctree-l1">
    <a class="reference internal" href="../guides/initialize-contract.html">
     Initialize a smart contract instance
    </a>
   </li>
   <li class="toctree-l1">
    <a class="reference internal" href="../guides/interact-instance.html">
     Interact with a smart contract instance
    </a>
   </li>
   <li class="toctree-l1">
    <a class="reference internal" href="../guides/inspect-instance.html">
     Inspect a smart contract instance
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l0 has-children">
  <p aria-level="2" class="caption" role="heading">
   <span class="caption-text">
    References
   </span>
  </p>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label class="label-parts" for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="nav bd-sidenav">
   <li class="toctree-l1">
    <a class="reference internal" href="../references/schema-json.html">
     Schema JSON representation
    </a>
   </li>
   <li class="toctree-l1">
    <a class="reference internal" href="../references/simulate-context.html">
     Simulation contexts
    </a>
   </li>
   <li class="toctree-l1">
    <a class="reference internal" href="../references/host-fns.html">
     Contract host functions
    </a>
   </li>
   <li class="toctree-l1">
    <a class="reference internal" href="../references/references-on-chain.html">
     References on-chain
    </a>
   </li>
   <li class="toctree-l1">
    <a class="reference internal" href="../references/local-settings.html">
     Local settings
    </a>
   </li>
   <li class="toctree-l1">
    <a class="reference external" href="https://github.com/Concordium/concordium-rust-smart-contracts">
     Rust contract examples (repo)
    </a>
   </li>
   <li class="toctree-l1">
    <a class="reference external" href="https://docs.rs/concordium-std/latest/concordium_std/">
     concordium-std
    </a>
   </li>
  </ul>
 </li>
</ul>
  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#on-chain-language">
   On-chain language
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#limitations">
     Limitations
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#floating-point-numbers">
       Floating point numbers
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#deployment">
   Deployment
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#smart-contract-on-the-chain">
   Smart contract on the chain
  </a>
 </li>
</ul>

</nav>
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="smart-contract-modules">
<span id="contract-module"></span><h1>Smart contract modules<a class="headerlink" href="#smart-contract-modules" title="Permalink to this headline">#</a></h1>
<p>Smart contracts are deployed on the chain in <em>smart contract modules</em>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A smart contract module is often referred to simply as a <em>module</em>.</p>
</div>
<p>A module can contain one or more smart contracts, allowing code to be shared
among the contracts and can optionally contain <a class="reference internal" href="contract-schema.html#contract-schema"><span class="std std-ref">contract schemas</span></a>.</p>
<div class="figure align-center" id="id2">
<div class="graphviz"><object data="../../_images/graphviz-df720341db2d51e9625f9fcdd20ce92dab0758d7.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph G {
    subgraph cluster_0 {
        node [fillcolor=white, shape=note]
        label = &quot;Module&quot;;
        &quot;Crowdfunding&quot;;
        &quot;Escrow&quot;;
    }
}</p></object></div>
<p class="caption"><span class="caption-text">A smart contract module containing two smart contracts.</span><a class="headerlink" href="#id2" title="Permalink to this image">#</a></p>
</div>
<p>The module must be self-contained, and only have a restricted list of imports
that allow for interaction with the chain.
These are provided by the host environment and are available for the smart
contract by importing a module named <code class="docutils literal notranslate"><span class="pre">concordium</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>Check out <a class="reference internal" href="../references/host-fns.html#host-functions"><span class="std std-ref">Contract host functions</span></a> for a complete reference.</p>
</div>
<div class="section" id="on-chain-language">
<h2>On-chain language<a class="headerlink" href="#on-chain-language" title="Permalink to this headline">#</a></h2>
<p>On the Concordium blockchain the smart contract language is a subset of <a class="reference external" href="https://webassembly.org/">Web
Assembly</a> (Wasm in short) which is designed to be a portable compilation
target and to be run in sandboxed environments. This is useful because smart
contracts will be run by bakers in the network who do not necessarily trust
the code.</p>
<p>Wasm is a low-level language and it is impractical to write by hand. Instead one
can write smart contracts in a more high-level language which is then
compiled to Wasm.</p>
<div class="section" id="limitations">
<span id="wasm-limitations"></span><h3>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline">#</a></h3>
<p>The blockchain environment is very particular in the sense that each node must
be able to execute the contract in exactly the same way, using exactly the same
amount of resources. Otherwise nodes would fail to reach consensus on the
state of the chain. For this reason smart contracts need to be written in a restricted
subset of Wasm.</p>
<div class="section" id="floating-point-numbers">
<h4>Floating point numbers<a class="headerlink" href="#floating-point-numbers" title="Permalink to this headline">#</a></h4>
<p>Although Wasm does have support for floating point numbers, a smart contract is
disallowed to use them. The reason for this is that Wasm floating-point numbers
can have a special <code class="docutils literal notranslate"><span class="pre">NaN</span></code> (“not a number”) value whose treatment can result in nondeterminism.</p>
<p>The restriction applies statically, meaning that smart contracts cannot contain
floating point types, nor can they contain any instructions that involve floating
point values.</p>
</div>
</div>
</div>
<div class="section" id="deployment">
<h2>Deployment<a class="headerlink" href="#deployment" title="Permalink to this headline">#</a></h2>
<p>Deploying a module to the chain means submitting the module bytecode as a
transaction to the Concordium network. If <em>valid</em> this transaction will be
included in a block. This transaction, as every other transaction, has an
associated cost. The cost is based on the size of the bytecode and is charged
for both checking validity of the module and on-chain storage.</p>
<p>The deployment itself does not execute a
smart contract. To execute, a user must first create an <em>instance</em> of a contract.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>See <a class="reference internal" href="contract-instances.html#contract-instances"><span class="std std-ref">Smart contract instances</span></a> for more information.</p>
</div>
</div>
<div class="section" id="smart-contract-on-the-chain">
<span id="contract-on-the-chain"></span><span id="contract-on-chain"></span><span id="smart-contracts-on-the-chain"></span><span id="smart-contracts-on-chain"></span><h2>Smart contract on the chain<a class="headerlink" href="#smart-contract-on-the-chain" title="Permalink to this headline">#</a></h2>
<p>A smart contract on the chain is a collection of functions exported from a deployed
module. The concrete mechanism used for this is the <a class="reference external" href="https://webassembly.org/">Web Assembly</a> export
section. A smart contract must export one function for initializing new
instances and can export zero or more functions for updating the instance.</p>
<p>Since a smart contract module can export functions for multiple different smart
contracts, we associate the functions using a naming scheme:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">init_&lt;contract-name&gt;</span></code>: The function for initializing a smart contract must
start with <code class="docutils literal notranslate"><span class="pre">init_</span></code> followed by a name of the smart contract. The contract
must consist only of ASCII alphanumeric or punctuation characters, and is not
allowed to contain the <code class="docutils literal notranslate"><span class="pre">.</span></code> symbol.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;contract-name&gt;.&lt;receive-function-name&gt;</span></code>: Functions for interacting with a
smart contract are prefixed with the contract name, followed by a <code class="docutils literal notranslate"><span class="pre">.</span></code> and a
name for the function. Same as for the init function, the contract name is not allowed
to contain the <code class="docutils literal notranslate"><span class="pre">.</span></code> symbol.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The function name is limited to 100 bytes. The whole function name must be ASCII alphanumeric and punctuation, not just the contract name.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you develop smart contracts using Rust and <code class="docutils literal notranslate"><span class="pre">concordium-std</span></code>, the
procedural macros <code class="docutils literal notranslate"><span class="pre">#[init(...)]</span></code> and <code class="docutils literal notranslate"><span class="pre">#[receive(...)]</span></code> set up the
correct naming scheme.</p>
</div>
</div>
</div>


              </div>
              
              
          </main>
          

      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>

<!DOCTYPE html>
<html>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
    body {margin:0px;}
    
    .cc {
      position: relative;
      bottom: 0%;
      left: 0%;
    }
    
    .cc a {
      display: inline-block;
      text-align: left;
      padding: 16px;
      color: black;
      font-size: 8px;
    }
    
</style>
<body>
    
    <div class="cc">
        <a href="http://creativecommons.org/licenses/by-sa/4.0/">
            <img src="../../_static/cc-sa-by.png" />  Copyright 2021 - 2022, Concordium Software ApS
        </a>
    </div>
  </body>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TE81YY48VB"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}

gtag('consent', 'default', { 'ad_storage': 'denied', 'analytics_storage': loadChoice() ? 'granted' : 'denied' });
gtag('js', new Date());
gtag('config', 'G-TE81YY48VB', {'anonymize_ip': true});

// Save the choice in a cookie
function storeChoice(granted) {
    document.cookie = "cookie-consent=" + granted
}

// Look for a cookie storing the previous choice of the user.
// Returns undefined if no choice was stored, otherwise a boolean for whether the
// user gave consent.
function loadChoice() {
    if (!document.cookie.includes("cookie-consent=")) {
        return undefined;
    }
    return document.cookie.includes("cookie-consent=true")
}

// Removes the cookie consent banner
function removeCookieConsentBanner() {
    document.getElementById("cookie-consent").remove()
}

// Called by the cookie consent banner if granted permission
function consentGranted() {
    storeChoice(true)
    gtag('consent', 'update', { 'ad_storage': 'denied', 'analytics_storage': 'granted' });
    removeCookieConsentBanner()
}

// Called by the cookie consent banner if denied permission
function consentDenied() {
    storeChoice(false)
    removeCookieConsentBanner()
}


</script>
<div id="cookie-consent" class="consent">
    <p>We use cookies to ensure that we give you the best experience on our website, but only if you grant us the permission.</p>
    <button onclick="consentGranted()">Allow</button>
    <button onclick="consentDenied()">Decline</button>
    <a href="https://concordium.com/privacy-policy/">Privacy policy</a>
</div>
<script>
    const stored = loadChoice();
    if (stored !== undefined) {
        removeCookieConsentBanner()
    }
</script>

  </body>
</html>