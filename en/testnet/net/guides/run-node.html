



<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Run a node with Docker &mdash; Concordium  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/concordium-logo-no-text.svg"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Troubleshoot a node on a server with Docker" href="../nodes/troubleshoot-docker.html" />
    <link rel="prev" title="Docker nodes" href="../nodes/docker.html" />
<link href="../../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #34838C" >
          


          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/concordium-logo-testnet.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
<nav class="sidebar-top-menu">
    <a href="../index.html" class="active" ><i class="icon fa fa-connectdevelop"></i> Testnet</a>
    <a href="../../smart-contracts/index.html" class=""> <i class="icon fa fa-file-o"></i> Smart Contracts </a>
</nav>

        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation/downloads.html">Downloads</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../concepts/concepts.html">Concordium Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="deciding-wallet.html">Deciding between the Desktop Wallet and the Mobile Wallet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources/glossary.html">Glossary of Concordium Terms</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Concordium Mobile Wallet</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mobile-wallet/setup-maintenance-mw.html">Setup and Maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mobile-wallet/transfers-mw.html">Transfers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Concordium Desktop Wallet</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../desktop-wallet/setup-maintenance-dw.html">Setup and Maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../desktop-wallet/transfers-dw.html">Transfers and Transactions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../desktop-wallet/baking-dw.html">Baking in the Desktop Wallet</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Concordium Client</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../references/concordium-client.html">Concordium Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/transactions.html">Concordium Client transactions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/query-node.html">Querying a node</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/node-runner-service-configuration.html">Concordium Windows node runner service configuration</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Run a node</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../nodes/ubuntu.html">Ubuntu nodes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../nodes/docker.html">Docker nodes</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Run a node with Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nodes/troubleshoot-docker.html">Troubleshoot a node on a server with Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nodes/docker.html#support-feedback">Support &amp; Feedback</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../nodes/windows.html">Windows nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nodes/macos.html">MacOS nodes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Baking</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="overview-baker-process.html">Overview of the baker process</a></li>
<li class="toctree-l1"><a class="reference internal" href="become-baker.html">Become a baker using the Concordium Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="baker-windows.html">Run a baker node on Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../desktop-wallet/baking-dw.html">Baking in the Desktop Wallet</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../resources/dashboards.html">Dashboards and Status Pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/developer-tools.html">Auxiliary Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources/release-notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources/legal.html">Legal</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Concordium</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Testnet</a> &raquo;</li>
        
          <li><a href="../nodes/docker.html">Docker nodes</a> &raquo;</li>
        
      <li>Run a node with Docker</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="run-a-node-with-docker">
<span id="run-a-node"></span><h1>Run a node with Docker<a class="headerlink" href="#run-a-node-with-docker" title="Permalink to this headline">Â¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#before-you-begin" id="id2">Before you begin</a></p></li>
<li><p><a class="reference internal" href="#running-upgrading-a-node" id="id3">Running/upgrading a node</a></p></li>
<li><p><a class="reference internal" href="#seeing-your-node-on-the-dashboard" id="id4">Seeing your node on the dashboard</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id5">Network dashboard</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#enable-inbound-connections" id="id6">Enable inbound connections</a></p>
<ul>
<li><p><a class="reference internal" href="#configuring-ports-and-tokens" id="id7">Configuring ports and tokens</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#stop-the-node" id="id8">Stop the node</a></p></li>
<li><p><a class="reference internal" href="#retrieve-node-logs" id="id9">Retrieve node logs</a></p></li>
<li><p><a class="reference internal" href="#support-feedback" id="id10">Support &amp; Feedback</a></p></li>
</ul>
</div>
<p>In this guide, you learn how to run a node on your Linux computer that
participates in the Concordium network. This means that you receive
blocks and transactions from other nodes, as well as propagate
information about blocks and transactions to the nodes in the Concordium
network. After following this guide, you will be able to</p>
<ul class="simple">
<li><p>run a Concordium node</p></li>
<li><p>observe it on the network dashboard and</p></li>
<li><p>query the state of the Concordium blockchain directly from your
machine.</p></li>
</ul>
<p>You do not need an account to run a node.</p>
<div class="section" id="before-you-begin">
<h2>Before you begin<a class="headerlink" href="#before-you-begin" title="Permalink to this headline">Â¶</a></h2>
<p>Before running a Concordium node you will need to</p>
<ol class="arabic simple">
<li><p>Install and run Docker.</p>
<ul class="simple">
<li><p>On <em>Linux</em>, allow Docker to be run as a non-root user.</p></li>
</ul>
</li>
<li><p>Download and extract the <a class="reference internal" href="../installation/downloads.html#concordium-docker-package-download"><span class="std std-ref">full suite for running a node on Linux</span></a>.</p></li>
</ol>
</div>
<div class="section" id="running-upgrading-a-node">
<span id="running-a-node"></span><h2>Running/upgrading a node<a class="headerlink" href="#running-upgrading-a-node" title="Permalink to this headline">Â¶</a></h2>
<p>To start running a client that will join the Testnet follow these
steps:</p>
<ol class="arabic simple">
<li><p>Open the <code class="docutils literal notranslate"><span class="pre">concordium-node</span></code> executable from the unzipped archive.</p>
<ul class="simple">
<li><p>When <em>restarting</em> a node consider using the
<code class="docutils literal notranslate"><span class="pre">--no-block-state-import</span></code> option. This will download just the
updates to the Concordium blockchain that occurred while the node was
inactive and might speed up the boot process.</p></li>
</ul>
</li>
<li><p>Enter a name for your node. This name will be displayed in the public
dashboard.</p></li>
<li><p>If the tool has been started before you will be asked if you want to
delete the local node database before starting. Pressing <strong>y</strong> will
delete and subsequently recreate the information on the state of the
Concordium blockchain that was saved on your computer. <strong>Note that
deleting the local node database means it will take longer for your
node to catch-up with the Concordium network.</strong></p></li>
</ol>
<p>The tool will now download the Concordium Client image and load it into
Docker. The client will launch and start outputting logging information
about the operation of the node.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To upgrade you have to restart the node. The tool automatically checks for the newest version.</p>
</div>
</div>
<div class="section" id="seeing-your-node-on-the-dashboard">
<h2>Seeing your node on the dashboard<a class="headerlink" href="#seeing-your-node-on-the-dashboard" title="Permalink to this headline">Â¶</a></h2>
<p>After running <code class="docutils literal notranslate"><span class="pre">concordium-node</span></code> you can</p>
<ul class="simple">
<li><p>see your node on the <a class="reference external" href="https://dashboard.testnet.concordium.com">Network Dashboard</a></p></li>
<li><p><a class="reference internal" href="../references/query-node.html#testnet-query-node"><span class="std std-ref">query</span></a> information about blocks, transactions, and accounts</p></li>
</ul>
<div class="section" id="id1">
<h3>Network dashboard<a class="headerlink" href="#id1" title="Permalink to this headline">Â¶</a></h3>
<p>It will take the client a while to catch up with the state of the
Concordium blockchain. This involves, for example, downloading
information about all the blocks in the chain.</p>
<p>Among other information, on the <a class="reference external" href="https://dashboard.testnet.concordium.com">Network Dashboard</a> you can
get an idea of how long it will take your node to catch up with the
chain. For that you can compare the nodeâs <strong>Length</strong> value (number of
blocks your node received) with the <strong>Total Length</strong> value (number of
blocks in the longest chain in the network) which is displayed at the
top of the dashboard.</p>
</div>
</div>
<div class="section" id="enable-inbound-connections">
<h2>Enable inbound connections<a class="headerlink" href="#enable-inbound-connections" title="Permalink to this headline">Â¶</a></h2>
<p>If you are running your node behind a firewall, or behind your home
router, then you will probably only be able to connect to other nodes,
but other nodes will not be able to initiate connections to your node.
This is perfectly fine, and your node will fully participate in the
Concordium network. It will be able to send transactions and,
<a class="reference internal" href="become-baker.html#become-a-baker"><span class="std std-ref">if so configured</span></a>, to bake and finalize.</p>
<p>However you can also make your node an even better network participant
by enabling inbound connections. By default, <code class="docutils literal notranslate"><span class="pre">concordium-node</span></code> listens
on port <code class="docutils literal notranslate"><span class="pre">8888</span></code> for inbound connections on <strong>Mainnet</strong> and on port <code class="docutils literal notranslate"><span class="pre">8889</span></code> for inbound connections on <strong>Testnet</strong>. Depending on your network and
platform configuration you will either need to forward an external port
to <code class="docutils literal notranslate"><span class="pre">8888</span></code> or <code class="docutils literal notranslate"><span class="pre">8889</span></code> on your router, open it in your firewall, or both. The
details of how this is done will depend on your configuration.</p>
<div class="section" id="configuring-ports-and-tokens">
<h3>Configuring ports and tokens<a class="headerlink" href="#configuring-ports-and-tokens" title="Permalink to this headline">Â¶</a></h3>
<p>The node listens on four ports, which can be configured by supplying the
appropriate command line arguments when starting the node. The ports
used by the node are as follows:</p>
<ul class="simple">
<li><p>8888, the port for peer-to-peer networking, which can be set with
<code class="docutils literal notranslate"><span class="pre">--listen-node-port</span></code></p></li>
<li><p>8082, the port used by middleware, which can be set with <code class="docutils literal notranslate"><span class="pre">--listen-middleware-port</span></code></p></li>
<li><p>8099, the port used by the node dashboard, which can be set with <code class="docutils literal notranslate"><span class="pre">--listen-dashboard-port</span></code></p></li>
<li><p>10000, the gRPC port for mainnet, which can be set with <code class="docutils literal notranslate"><span class="pre">--listen-grpc-port</span></code></p></li>
<li><p>10001, the gRPC port for testnet, which can be set with <code class="docutils literal notranslate"><span class="pre">--listen-grpc-port</span></code></p></li>
</ul>
<p>An additional mapping is the gRPC token, which defaults to <code class="docutils literal notranslate"><span class="pre">rpcadmin</span></code>, and can
be set with <code class="docutils literal notranslate"><span class="pre">--rpc-server-token</span></code>.</p>
<p>When changing the mappings above the docker container must be
stopped (<a class="reference internal" href="#stop-a-node"><span class="std std-ref">Stop the node</span></a>), reset, and started again. To reset the container either use
<code class="docutils literal notranslate"><span class="pre">concordium-node-reset-data</span></code> or run <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">rm</span> <span class="pre">concordium-client</span></code> in
a terminal.</p>
<p>It is strongly recommended that you configure your firewall to only
allow public connections on port 8888 (the peer-to-peer networking
port). Someone with access to the other ports might be able to take
control of your node or accounts you have saved on the node.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Docker makes changes to the <a class="reference external" href="https://en.wikipedia.org/wiki/Iptables">iptable</a> on Linux, which means that it is not
easy to block ports in practice.
This is especially a problem <a class="reference external" href="https://github.com/chaifeng/ufw-docker#problem">when using UFW</a>.
Because the gRPC port is currently not considered secure, we strongly recommend changing the default gRPC token via the
<code class="docutils literal notranslate"><span class="pre">--rpc-server-token</span></code> flag when running a node.
This will provide reasonable security if the token is only ever used through
a secure channel.</p>
</div>
</div>
</div>
<div class="section" id="stop-the-node">
<span id="stop-a-node"></span><h2>Stop the node<a class="headerlink" href="#stop-the-node" title="Permalink to this headline">Â¶</a></h2>
<p>To stop the node, press <strong>CTRL+c</strong>, and wait for the node to do a clean
shutdown.</p>
<p>If you accidentally close the window without explicitly shutting down
the client, it will keep running in the background in Docker. In that
case, use the <code class="docutils literal notranslate"><span class="pre">concordium-node-stop</span></code> binary in the same way you opened
the <code class="docutils literal notranslate"><span class="pre">concordium-node</span></code> executable.</p>
</div>
<div class="section" id="retrieve-node-logs">
<h2>Retrieve node logs<a class="headerlink" href="#retrieve-node-logs" title="Permalink to this headline">Â¶</a></h2>
<p>Logging information for your node can be retrieved using the
<code class="docutils literal notranslate"><span class="pre">concordium-node-retrieve-logs</span></code> tool. This will save logs from the
running image to a file. Additionally, if given permission, it will
retrieve information about the programs currently running on the system.</p>
</div>
<div class="section" id="support-feedback">
<h2>Support &amp; Feedback<a class="headerlink" href="#support-feedback" title="Permalink to this headline">Â¶</a></h2>
<p>If you have questions or feedback, join us on <a class="reference external" href="https://support.concordium.software/">Discourse</a>, or contact us at <a class="reference external" href="mailto:support&#37;&#52;&#48;concordium&#46;software">support<span>&#64;</span>concordium<span>&#46;</span>software</a>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
<a href="http://creativecommons.org/licenses/by-sa/4.0/">
    <img style="margin-bottom: 0.5em" src="../../_static/cc-sa-by.png" />
</a>

    <p>
        &#169; Copyright 2021 - 2022, Concordium Software ApS.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: testnet
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Versions</dt>
      <dd><a href="/en/mainnet/">mainnet</a></dd>
      <dd><a href="/en/testnet/">testnet</a></dd>
    </dl>
  </div>
</div>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TE81YY48VB"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}

gtag('consent', 'default', { 'ad_storage': 'denied', 'analytics_storage': loadChoice() ? 'granted' : 'denied' });
gtag('js', new Date());
gtag('config', 'G-TE81YY48VB', {'anonymize_ip': true});

// Save the choice in a cookie
function storeChoice(granted) {
    document.cookie = "cookie-consent=" + granted
}

// Look for a cookie storing the previous choice of the user.
// Returns undefined if no choice was stored, otherwise a boolean for whether the
// user gave consent.
function loadChoice() {
    if (!document.cookie.includes("cookie-consent=")) {
        return undefined;
    }
    return document.cookie.includes("cookie-consent=true")
}

// Removes the cookie consent banner
function removeCookieConsentBanner() {
    document.getElementById("cookie-consent").remove()
}

// Called by the cookie consent banner if granted permission
function consentGranted() {
    storeChoice(true)
    gtag('consent', 'update', { 'ad_storage': 'denied', 'analytics_storage': 'granted' });
    removeCookieConsentBanner()
}

// Called by the cookie consent banner if denied permission
function consentDenied() {
    storeChoice(false)
    removeCookieConsentBanner()
}


</script>
<div id="cookie-consent" class="consent">
    <p>We use cookies to ensure that we give you the best experience on our website, but only if you grant us the permission</p>
    <button onclick="consentGranted()">Allow</button>
    <button onclick="consentDenied()">Disallow</button>
    <a href="https://concordium.com/privacy-policy/">Privacy policy</a>
</div>
<script>
    const stored = loadChoice();
    if (stored !== undefined) {
        removeCookieConsentBanner()
    }
</script>


</body>
</html>